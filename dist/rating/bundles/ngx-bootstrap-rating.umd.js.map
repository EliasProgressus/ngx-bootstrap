{"version":3,"file":"ngx-bootstrap-rating.umd.js.map","sources":["ng://ngx-bootstrap/rating/rating.component.ts","ng://ngx-bootstrap/rating/rating.module.ts"],"sourcesContent":["import {\r\n  Component,\r\n  EventEmitter,\r\n  HostListener,\r\n  Input,\r\n  OnInit,\r\n  Output,\r\n  forwardRef, TemplateRef, ChangeDetectionStrategy, ChangeDetectorRef\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { AccessorContent, RatingResults } from './models';\r\n\r\nexport const RATING_CONTROL_VALUE_ACCESSOR: AccessorContent = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => RatingComponent),\r\n  multi: true\r\n};\r\n\r\n@Component({\r\n  selector: 'rating',\r\n  templateUrl: './rating.component.html',\r\n  providers: [RATING_CONTROL_VALUE_ACCESSOR],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RatingComponent implements ControlValueAccessor, OnInit {\r\n  /** number of icons */\r\n  @Input() max = 5;\r\n  /** if true will not react on any user events */\r\n  @Input() readonly: boolean;\r\n  /** array of icons titles, default: ([\"one\", \"two\", \"three\", \"four\", \"five\"]) */\r\n  @Input() titles: string[];\r\n  /** custom template for icons */\r\n  // tslint:disable-next-line:no-any\r\n  @Input() customTemplate: TemplateRef<any>;\r\n  /** fired when icon selected, $event:number equals to selected rating */\r\n  @Output() onHover: EventEmitter<number> = new EventEmitter();\r\n  /** fired when icon selected, $event:number equals to previous rating value */\r\n  @Output() onLeave: EventEmitter<number> = new EventEmitter();\r\n\r\n  // tslint:disable-next-line:no-any\r\n  onChange: any = Function.prototype;\r\n  // tslint:disable-next-line:no-any\r\n  onTouched: any = Function.prototype;\r\n\r\n  range: RatingResults[];\r\n  value: number;\r\n  protected preValue: number;\r\n\r\n  constructor(private changeDetection: ChangeDetectorRef) {}\r\n\r\n  @HostListener('keydown', ['$event'])\r\n  onKeydown(event: KeyboardEvent): void {\r\n    /* tslint:disable-next-line: deprecation */\r\n    if ([37, 38, 39, 40].indexOf(event.which) === -1) {\r\n      return;\r\n    }\r\n\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    /* tslint:disable-next-line: deprecation */\r\n    const sign = event.which === 38 || event.which === 39 ? 1 : -1;\r\n    this.rate(this.value + sign);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.max = typeof this.max !== 'undefined' ? this.max : 5;\r\n    this.titles =\r\n      typeof this.titles !== 'undefined' && this.titles.length > 0\r\n        ? this.titles\r\n        : [];\r\n    this.range = this.buildTemplateObjects(this.max);\r\n  }\r\n\r\n  // model -> view\r\n  writeValue(value: number): void {\r\n    if (value % 1 !== value) {\r\n      this.value = Math.round(value);\r\n      this.preValue = value;\r\n      this.changeDetection.markForCheck();\r\n\r\n      return;\r\n    }\r\n\r\n    this.preValue = value;\r\n    this.value = value;\r\n    this.changeDetection.markForCheck();\r\n  }\r\n\r\n  enter(value: number): void {\r\n    if (!this.readonly) {\r\n      this.value = value;\r\n      this.changeDetection.markForCheck();\r\n      this.onHover.emit(value);\r\n    }\r\n  }\r\n\r\n  reset(): void {\r\n    this.value = this.preValue;\r\n    this.changeDetection.markForCheck();\r\n    this.onLeave.emit(this.value);\r\n  }\r\n\r\n  registerOnChange(fn: (_: number) => {}): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: () => {}): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  rate(value: number): void {\r\n    if (!this.readonly && value >= 0 && value <= this.range.length) {\r\n      this.writeValue(value);\r\n      this.onChange(value);\r\n    }\r\n  }\r\n\r\n  protected buildTemplateObjects(max: number): RatingResults[] {\r\n    const result: RatingResults[] = [];\r\n    for (let i = 0; i < max; i++) {\r\n      result.push({\r\n          index: i,\r\n          title: this.titles[i] || i + 1\r\n        });\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { RatingComponent } from './rating.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [RatingComponent],\r\n  exports: [RatingComponent]\r\n})\r\nexport class RatingModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: RatingModule,\r\n      providers: []\r\n    };\r\n  }\r\n}\r\n"],"names":["NG_VALUE_ACCESSOR","forwardRef","EventEmitter","Component","ChangeDetectionStrategy","ChangeDetectorRef","Input","Output","HostListener","NgModule","CommonModule"],"mappings":"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"}
