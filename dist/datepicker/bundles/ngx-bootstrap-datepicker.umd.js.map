{"version":3,"file":"ngx-bootstrap-datepicker.umd.js.map","sources":["ng://ngx-bootstrap/datepicker/bs-datepicker.config.ts","node_modules/tslib/tslib.es6.js","ng://ngx-bootstrap/datepicker/base/bs-datepicker-container.ts","ng://ngx-bootstrap/datepicker/reducer/bs-datepicker.actions.ts","ng://ngx-bootstrap/datepicker/bs-locale.service.ts","ng://ngx-bootstrap/datepicker/reducer/bs-datepicker.effects.ts","ng://ngx-bootstrap/datepicker/reducer/_defaults.ts","ng://ngx-bootstrap/datepicker/reducer/bs-datepicker.state.ts","ng://ngx-bootstrap/datepicker/utils/bs-calendar-utils.ts","ng://ngx-bootstrap/datepicker/utils/matrix-utils.ts","ng://ngx-bootstrap/datepicker/engine/calc-days-calendar.ts","ng://ngx-bootstrap/datepicker/engine/format-days-calendar.ts","ng://ngx-bootstrap/datepicker/engine/flag-days-calendar.ts","ng://ngx-bootstrap/datepicker/engine/view-mode.ts","ng://ngx-bootstrap/datepicker/engine/format-months-calendar.ts","ng://ngx-bootstrap/datepicker/engine/flag-months-calendar.ts","ng://ngx-bootstrap/datepicker/engine/format-years-calendar.ts","ng://ngx-bootstrap/datepicker/engine/flag-years-calendar.ts","ng://ngx-bootstrap/datepicker/reducer/bs-datepicker.reducer.ts","ng://ngx-bootstrap/datepicker/reducer/bs-datepicker.store.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-datepicker-container.component.ts","ng://ngx-bootstrap/datepicker/bs-datepicker.component.ts","ng://ngx-bootstrap/datepicker/bs-datepicker-inline.config.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-datepicker-inline-container.component.ts","ng://ngx-bootstrap/datepicker/bs-datepicker-inline.component.ts","ng://ngx-bootstrap/datepicker/bs-datepicker-input.directive.ts","ng://ngx-bootstrap/datepicker/bs-daterangepicker.config.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-daterangepicker-container.component.ts","ng://ngx-bootstrap/datepicker/bs-daterangepicker.component.ts","ng://ngx-bootstrap/datepicker/bs-daterangepicker-input.directive.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-calendar-layout.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-current-date-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-custom-dates-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-datepicker-day-decorator.directive.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-datepicker-navigation-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-days-calendar-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-months-calendar-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-timepicker-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-years-calendar-view.component.ts","ng://ngx-bootstrap/datepicker/bs-datepicker.module.ts","ng://ngx-bootstrap/datepicker/date-formatter.ts","ng://ngx-bootstrap/datepicker/datepicker-inner.component.ts","ng://ngx-bootstrap/datepicker/datepicker.config.ts","ng://ngx-bootstrap/datepicker/datepicker.component.ts","ng://ngx-bootstrap/datepicker/daypicker.component.ts","ng://ngx-bootstrap/datepicker/monthpicker.component.ts","ng://ngx-bootstrap/datepicker/yearpicker.component.ts","ng://ngx-bootstrap/datepicker/datepicker.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport {\r\n  DatepickerRenderOptions,\r\n  BsDatepickerViewMode\r\n} from './models';\r\n\r\n\r\n/**\r\n * For date range picker there are `BsDaterangepickerConfig` which inherits all properties,\r\n * except `displayMonths`, for range picker it default to `2`\r\n */\r\n@Injectable()\r\nexport class BsDatepickerConfig implements DatepickerRenderOptions {\r\n  /** sets use adaptive position */\r\n  adaptivePosition = false;\r\n  value?: Date | Date[];\r\n  isDisabled?: boolean;\r\n  /**\r\n   * Default min date for all date/range pickers\r\n   */\r\n  minDate?: Date;\r\n  /**\r\n   * Default max date for all date/range pickers\r\n   */\r\n  maxDate?: Date;\r\n\r\n  daysDisabled?: number[];\r\n\r\n  /**\r\n   * Disable specific dates\r\n   */\r\n  datesDisabled?: Date[];\r\n  /**\r\n   * Makes dates from other months active\r\n   */\r\n  selectFromOtherMonth?: boolean;\r\n\r\n  /**\r\n   * Makes dates from other months active\r\n   */\r\n  selectWeek?: boolean;\r\n\r\n  /**\r\n   * Add class to current day\r\n   */\r\n  customTodayClass?: string;\r\n\r\n  /**\r\n   * Default mode for all date pickers\r\n   */\r\n  minMode?: BsDatepickerViewMode;\r\n\r\n  /** CSS class which will be applied to datepicker container,\r\n   * usually used to set color theme\r\n   */\r\n  containerClass = 'theme-green';\r\n\r\n  // DatepickerRenderOptions\r\n  displayMonths = 1;\r\n  /**\r\n   * Allows to hide week numbers in datepicker\r\n   */\r\n  showWeekNumbers = true;\r\n\r\n  dateInputFormat = 'L';\r\n  // range picker\r\n  rangeSeparator = ' - ';\r\n  /**\r\n   * Date format for date range input field\r\n   */\r\n  rangeInputFormat = 'L';\r\n\r\n  // DatepickerFormatOptions\r\n  monthTitle = 'MMMM';\r\n  yearTitle = 'YYYY';\r\n  dayLabel = 'D';\r\n  monthLabel = 'MMMM';\r\n  yearLabel = 'YYYY';\r\n  weekNumbers = 'w';\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","// datepicker container component\r\n/* tslint:disable:no-empty */\r\nimport { BsCustomDates } from '../themes/bs/bs-custom-dates-view.component';\r\nimport { BsDatepickerEffects } from '../reducer/bs-datepicker.effects';\r\nimport { Observable } from 'rxjs';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationEvent,\r\n  CalendarCellViewModel,\r\n  CellHoverEvent,\r\n  DatepickerRenderOptions,\r\n  DaysCalendarViewModel,\r\n  DayViewModel,\r\n  MonthsCalendarViewModel,\r\n  WeekViewModel,\r\n  YearsCalendarViewModel\r\n} from '../models';\r\n\r\nexport abstract class BsDatepickerAbstractComponent {\r\n  containerClass: string;\r\n  isOtherMonthsActive: boolean;\r\n\r\n  _effects: BsDatepickerEffects;\r\n  _customRangesFish: BsCustomDates[] = [];\r\n\r\n  set minDate(value: Date) {\r\n    this._effects.setMinDate(value);\r\n  }\r\n\r\n  set maxDate(value: Date) {\r\n    this._effects.setMaxDate(value);\r\n  }\r\n  set daysDisabled(value: number[]) {\r\n    this._effects.setDaysDisabled(value);\r\n  }\r\n  set datesDisabled(value: Date[]) {\r\n    this._effects.setDatesDisabled(value);\r\n  }\r\n\r\n  set isDisabled(value: boolean) {\r\n    this._effects.setDisabled(value);\r\n  }\r\n\r\n  viewMode: Observable<BsDatepickerViewMode>;\r\n  daysCalendar: Observable<DaysCalendarViewModel[]>;\r\n  monthsCalendar: Observable<MonthsCalendarViewModel[]>;\r\n  yearsCalendar: Observable<YearsCalendarViewModel[]>;\r\n  options: Observable<DatepickerRenderOptions>;\r\n\r\n  setViewMode(event: BsDatepickerViewMode): void {}\r\n\r\n  navigateTo(event: BsNavigationEvent): void {}\r\n\r\n  dayHoverHandler(event: CellHoverEvent): void {}\r\n\r\n  weekHoverHandler(event: WeekViewModel): void {}\r\n\r\n  monthHoverHandler(event: CellHoverEvent): void {}\r\n\r\n  yearHoverHandler(event: CellHoverEvent): void {}\r\n\r\n  daySelectHandler(day: DayViewModel): void {}\r\n\r\n  monthSelectHandler(event: CalendarCellViewModel): void {}\r\n\r\n  yearSelectHandler(event: CalendarCellViewModel): void {}\r\n\r\n  /* tslint:disable-next-line: no-any */\r\n  _stopPropagation(event: any): void {\r\n    event.stopPropagation();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TimeUnit } from 'ngx-bootstrap/chronos';\r\nimport { Action } from 'ngx-bootstrap/mini-ngrx';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsViewNavigationEvent,\r\n  CellHoverEvent,\r\n  DatepickerRenderOptions\r\n} from '../models';\r\n\r\n@Injectable()\r\nexport class BsDatepickerActions {\r\n  static readonly CALCULATE = '[datepicker] calculate dates matrix';\r\n  static readonly FORMAT = '[datepicker] format datepicker values';\r\n  static readonly FLAG = '[datepicker] set flags';\r\n  static readonly SELECT = '[datepicker] select date';\r\n  static readonly NAVIGATE_OFFSET = '[datepicker] shift view date';\r\n  static readonly NAVIGATE_TO = '[datepicker] change view date';\r\n  static readonly SET_OPTIONS = '[datepicker] update render options';\r\n  static readonly HOVER = '[datepicker] hover date';\r\n  static readonly CHANGE_VIEWMODE = '[datepicker] switch view mode';\r\n\r\n  static readonly SET_MIN_DATE = '[datepicker] set min date';\r\n  static readonly SET_MAX_DATE = '[datepicker] set max date';\r\n  static readonly SET_DAYSDISABLED = '[datepicker] set days disabled';\r\n  static readonly SET_DATESDISABLED = '[datepicker] set dates disabled';\r\n  static readonly SET_IS_DISABLED = '[datepicker] set is disabled';\r\n\r\n  static readonly SET_LOCALE = '[datepicker] set datepicker locale';\r\n\r\n  static readonly SELECT_RANGE = '[daterangepicker] select dates range';\r\n\r\n  calculate(): Action {\r\n    return { type: BsDatepickerActions.CALCULATE };\r\n  }\r\n\r\n  format(): Action {\r\n    return { type: BsDatepickerActions.FORMAT };\r\n  }\r\n\r\n  flag(): Action {\r\n    return { type: BsDatepickerActions.FLAG };\r\n  }\r\n\r\n  select(date: Date): Action {\r\n    return {\r\n      type: BsDatepickerActions.SELECT,\r\n      payload: date\r\n    };\r\n  }\r\n\r\n  changeViewMode(event: BsDatepickerViewMode): Action {\r\n    return {\r\n      type: BsDatepickerActions.CHANGE_VIEWMODE,\r\n      payload: event\r\n    };\r\n  }\r\n\r\n  navigateTo(event: BsViewNavigationEvent): Action {\r\n    return {\r\n      type: BsDatepickerActions.NAVIGATE_TO,\r\n      payload: event\r\n    };\r\n  }\r\n\r\n  navigateStep(step: TimeUnit): Action {\r\n    return {\r\n      type: BsDatepickerActions.NAVIGATE_OFFSET,\r\n      payload: step\r\n    };\r\n  }\r\n\r\n  setOptions(options: DatepickerRenderOptions): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_OPTIONS,\r\n      payload: options\r\n    };\r\n  }\r\n\r\n  // date range picker\r\n  selectRange(value: Date[]): Action {\r\n    return {\r\n      type: BsDatepickerActions.SELECT_RANGE,\r\n      payload: value\r\n    };\r\n  }\r\n\r\n  hoverDay(event: CellHoverEvent): Action {\r\n    return {\r\n      type: BsDatepickerActions.HOVER,\r\n      payload: event.isHovered ? event.cell.date : null\r\n    };\r\n  }\r\n\r\n  minDate(date: Date): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_MIN_DATE,\r\n      payload: date\r\n    };\r\n  }\r\n\r\n  maxDate(date: Date): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_MAX_DATE,\r\n      payload: date\r\n    };\r\n  }\r\n\r\n  daysDisabled(days: number[]): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_DAYSDISABLED,\r\n      payload: days\r\n    };\r\n  }\r\n\r\n  datesDisabled(dates: Date[]): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_DATESDISABLED,\r\n      payload: dates\r\n    };\r\n  }\r\n\r\n  isDisabled(value: boolean): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_IS_DISABLED,\r\n      payload: value\r\n    };\r\n  }\r\n\r\n  setLocale(locale: string): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_LOCALE,\r\n      payload: locale\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class BsLocaleService {\r\n  private _defaultLocale = 'en';\r\n  private _locale = new BehaviorSubject<string>(this._defaultLocale);\r\n  private _localeChange: Observable<string> = this._locale.asObservable();\r\n\r\n  get locale(): BehaviorSubject<string> {\r\n    return this._locale;\r\n  }\r\n\r\n  get localeChange(): Observable<string> {\r\n    return this._localeChange;\r\n  }\r\n\r\n  get currentLocale(): string {\r\n    return this._locale.getValue();\r\n  }\r\n\r\n  use(locale: string): void {\r\n    if (locale === this.currentLocale) {\r\n      return;\r\n    }\r\n\r\n    this._locale.next(locale);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { filter, map } from 'rxjs/operators';\r\n\r\nimport { getFullYear, getMonth } from 'ngx-bootstrap/chronos';\r\n\r\nimport { BsDatepickerAbstractComponent } from '../base/bs-datepicker-container';\r\nimport { BsDatepickerActions } from './bs-datepicker.actions';\r\nimport { BsDatepickerConfig } from '../bs-datepicker.config';\r\nimport { BsDatepickerStore } from './bs-datepicker.store';\r\nimport { BsLocaleService } from '../bs-locale.service';\r\n\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationEvent,\r\n  CalendarCellViewModel,\r\n  CellHoverEvent,\r\n  DatepickerRenderOptions,\r\n  DaysCalendarViewModel,\r\n  DayViewModel,\r\n  MonthsCalendarViewModel,\r\n  YearsCalendarViewModel\r\n} from '../models';\r\n\r\n\r\n@Injectable()\r\nexport class BsDatepickerEffects {\r\n  viewMode: Observable<BsDatepickerViewMode>;\r\n  daysCalendar: Observable<DaysCalendarViewModel[]>;\r\n  monthsCalendar: Observable<MonthsCalendarViewModel[]>;\r\n  yearsCalendar: Observable<YearsCalendarViewModel[]>;\r\n  options: Observable<DatepickerRenderOptions>;\r\n\r\n  private _store: BsDatepickerStore;\r\n  private _subs: Subscription[] = [];\r\n\r\n  constructor(private _actions: BsDatepickerActions,\r\n              private _localeService: BsLocaleService) {}\r\n\r\n  init(_bsDatepickerStore: BsDatepickerStore): BsDatepickerEffects {\r\n    this._store = _bsDatepickerStore;\r\n\r\n    return this;\r\n  }\r\n\r\n  /** setters */\r\n\r\n  setValue(value: Date): void {\r\n    this._store.dispatch(this._actions.select(value));\r\n  }\r\n\r\n  setRangeValue(value: Date[]): void {\r\n    this._store.dispatch(this._actions.selectRange(value));\r\n  }\r\n\r\n  setMinDate(value: Date): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.minDate(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setMaxDate(value: Date): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.maxDate(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDaysDisabled(value: number[]) {\r\n    this._store.dispatch(this._actions.daysDisabled(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDatesDisabled(value: Date[]) {\r\n    this._store.dispatch(this._actions.datesDisabled(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDisabled(value: boolean): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.isDisabled(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  /* Set rendering options */\r\n  setOptions(_config: BsDatepickerConfig): BsDatepickerEffects {\r\n    const _options = Object.assign({locale: this._localeService.currentLocale}, _config);\r\n    this._store.dispatch(this._actions.setOptions(_options));\r\n\r\n    return this;\r\n  }\r\n\r\n  /** view to mode bindings */\r\n  setBindings(container: BsDatepickerAbstractComponent): BsDatepickerEffects {\r\n    container.daysCalendar = this._store\r\n      .select(state => state.flaggedMonths)\r\n      .pipe(\r\n        filter(months => !!months)\r\n      );\r\n\r\n    // month calendar\r\n    container.monthsCalendar = this._store\r\n      .select(state => state.flaggedMonthsCalendar)\r\n      .pipe(\r\n        filter(months => !!months)\r\n      );\r\n\r\n    // year calendar\r\n    container.yearsCalendar = this._store\r\n      .select(state => state.yearsCalendarFlagged)\r\n      .pipe(\r\n        filter(years => !!years)\r\n      );\r\n\r\n    container.viewMode = this._store.select(state => state.view.mode);\r\n\r\n    container.options = this._store\r\n      .select(state => state.showWeekNumbers)\r\n      .pipe(\r\n        map(showWeekNumbers => ({showWeekNumbers}))\r\n      );\r\n\r\n    return this;\r\n  }\r\n\r\n  /** event handlers */\r\n  setEventHandlers(container: BsDatepickerAbstractComponent): BsDatepickerEffects {\r\n    container.setViewMode = (event: BsDatepickerViewMode): void => {\r\n      this._store.dispatch(this._actions.changeViewMode(event));\r\n    };\r\n\r\n    container.navigateTo = (event: BsNavigationEvent): void => {\r\n      this._store.dispatch(this._actions.navigateStep(event.step));\r\n    };\r\n\r\n    container.dayHoverHandler = (event: CellHoverEvent): void => {\r\n      const _cell = event.cell as DayViewModel;\r\n      if (_cell.isOtherMonth || _cell.isDisabled) {\r\n        return;\r\n      }\r\n\r\n      this._store.dispatch(this._actions.hoverDay(event));\r\n      _cell.isHovered = event.isHovered;\r\n    };\r\n\r\n    container.monthHoverHandler = (event: CellHoverEvent): void => {\r\n      event.cell.isHovered = event.isHovered;\r\n    };\r\n\r\n    container.yearHoverHandler = (event: CellHoverEvent): void => {\r\n      event.cell.isHovered = event.isHovered;\r\n    };\r\n\r\n    container.monthSelectHandler = (event: CalendarCellViewModel): void => {\r\n      if (event.isDisabled) {\r\n        return;\r\n      }\r\n      this._store.dispatch(\r\n        this._actions.navigateTo({\r\n          unit: {\r\n            month: getMonth(event.date),\r\n            year: getFullYear(event.date)\r\n          },\r\n          viewMode: 'day'\r\n        })\r\n      );\r\n    };\r\n\r\n    container.yearSelectHandler = (event: CalendarCellViewModel): void => {\r\n      if (event.isDisabled) {\r\n        return;\r\n      }\r\n      this._store.dispatch(\r\n        this._actions.navigateTo({\r\n          unit: {\r\n            year: getFullYear(event.date)\r\n          },\r\n          viewMode: 'month'\r\n        })\r\n      );\r\n    };\r\n\r\n    return this;\r\n  }\r\n\r\n  registerDatepickerSideEffects(): BsDatepickerEffects {\r\n    this._subs.push(\r\n      this._store.select(state => state.view).subscribe(view => {\r\n        this._store.dispatch(this._actions.calculate());\r\n      })\r\n    );\r\n\r\n    // format calendar values on month model change\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.monthsModel)\r\n        .pipe(\r\n          filter(monthModel => !!monthModel)\r\n        )\r\n        .subscribe(month => this._store.dispatch(this._actions.format()))\r\n    );\r\n\r\n    // flag day values\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.formattedMonths)\r\n        .pipe(\r\n          filter(month => !!month)\r\n        )\r\n        .subscribe(month => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // flag day values\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.selectedDate)\r\n        .pipe(\r\n          filter(selectedDate => !!selectedDate)\r\n        )\r\n        .subscribe(selectedDate => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // flag for date range picker\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.selectedRange)\r\n        .pipe(\r\n          filter(selectedRange => !!selectedRange)\r\n        )\r\n        .subscribe(selectedRange => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // monthsCalendar\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.monthsCalendar)\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // years calendar\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.yearsCalendarModel)\r\n        .pipe(\r\n          filter(state => !!state)\r\n        )\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // on hover\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.hoveredDate)\r\n        .pipe(\r\n          filter(hoveredDate => !!hoveredDate)\r\n        )\r\n        .subscribe(hoveredDate => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // on locale change\r\n    this._subs.push(\r\n      this._localeService.localeChange\r\n        .subscribe(locale => this._store.dispatch(this._actions.setLocale(locale)))\r\n    );\r\n\r\n    return this;\r\n  }\r\n\r\n  destroy(): void {\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","import {\r\n  MonthViewOptions\r\n} from '../models';\r\n\r\nexport const defaultMonthOptions: MonthViewOptions = {\r\n  width: 7,\r\n  height: 6\r\n};\r\n","import {\r\n  BsDatepickerViewMode,\r\n  DatepickerFormatOptions,\r\n  DatepickerRenderOptions,\r\n  DaysCalendarModel,\r\n  DaysCalendarViewModel,\r\n  MonthsCalendarViewModel,\r\n  MonthViewOptions,\r\n  YearsCalendarViewModel\r\n} from '../models';\r\nimport { defaultMonthOptions } from './_defaults';\r\nimport { BsDatepickerConfig } from '../bs-datepicker.config';\r\n\r\nexport interface BsDatepickerViewState {\r\n  date: Date;\r\n  mode: BsDatepickerViewMode;\r\n}\r\n\r\nexport class BsDatepickerState\r\n  implements DatepickerRenderOptions, DatepickerFormatOptions {\r\n  // date picker\r\n  selectedDate?: Date;\r\n  // daterange picker\r\n  selectedRange?: Date[];\r\n\r\n  // initial date of calendar, today by default\r\n  view: BsDatepickerViewState;\r\n\r\n  isDisabled?: boolean;\r\n  // bounds\r\n  minDate?: Date;\r\n  maxDate?: Date;\r\n  daysDisabled?: number[];\r\n  datesDisabled?: Date[];\r\n  minMode?: BsDatepickerViewMode;\r\n\r\n  hoveredDate?: Date;\r\n  hoveredMonth?: Date;\r\n  hoveredYear?: Date;\r\n\r\n  // days calendar\r\n  monthsModel?: DaysCalendarModel[];\r\n  formattedMonths?: DaysCalendarViewModel[];\r\n  flaggedMonths?: DaysCalendarViewModel[];\r\n  selectFromOtherMonth?: boolean;\r\n\r\n  // months calendar\r\n  monthsCalendar?: MonthsCalendarViewModel[];\r\n  flaggedMonthsCalendar?: MonthsCalendarViewModel[];\r\n\r\n  // years calendar\r\n  yearsCalendarModel?: YearsCalendarViewModel[];\r\n  yearsCalendarFlagged?: YearsCalendarViewModel[];\r\n\r\n  // options\r\n  monthViewOptions: MonthViewOptions;\r\n\r\n  // DatepickerRenderOptions\r\n  showWeekNumbers?: boolean;\r\n  displayMonths?: number;\r\n\r\n  // DatepickerFormatOptions\r\n  locale: string;\r\n\r\n  monthTitle: string;\r\n  yearTitle: string;\r\n\r\n  dayLabel: string;\r\n  monthLabel: string;\r\n  yearLabel: string;\r\n\r\n  weekNumbers: string;\r\n}\r\n\r\nconst _initialView: BsDatepickerViewState = { date: new Date(), mode: 'day' };\r\n\r\nexport const initialDatepickerState: BsDatepickerState = Object.assign(\r\n  new BsDatepickerConfig(),\r\n  {\r\n    locale: 'en',\r\n    view: _initialView,\r\n    selectedRange: [],\r\n    monthViewOptions: defaultMonthOptions\r\n  }\r\n);\r\n","import {\r\n  getDay,\r\n  isFirstDayOfWeek,\r\n  isAfter,\r\n  isBefore,\r\n  shiftDate,\r\n  endOf,\r\n  startOf,\r\n  isSame\r\n} from 'ngx-bootstrap/chronos';\r\n\r\nexport function getStartingDayOfCalendar(date: Date,\r\n                                         options: { firstDayOfWeek?: number }): Date {\r\n  if (isFirstDayOfWeek(date, options.firstDayOfWeek)) {\r\n    return date;\r\n  }\r\n\r\n  const weekDay = getDay(date);\r\n  const offset = calculateDateOffset(weekDay, options.firstDayOfWeek);\r\n\r\n  return shiftDate(date, {day: -offset});\r\n}\r\n\r\nexport function calculateDateOffset(weekday: number, startingDayOffset: number): number {\r\n  if (startingDayOffset === 0) {\r\n    return weekday;\r\n  }\r\n\r\n  const offset = weekday - startingDayOffset % 7;\r\n\r\n  return offset < 0 ? offset + 7 : offset;\r\n}\r\n\r\nexport function isMonthDisabled(date: Date, min: Date, max: Date): boolean {\r\n  const minBound = min && isBefore(endOf(date, 'month'), min, 'day');\r\n  const maxBound = max && isAfter(startOf(date, 'month'), max, 'day');\r\n\r\n  return minBound || maxBound;\r\n}\r\n\r\nexport function isYearDisabled(date: Date, min: Date, max: Date): boolean {\r\n  const minBound = min && isBefore(endOf(date, 'year'), min, 'day');\r\n  const maxBound = max && isAfter(startOf(date, 'year'), max, 'day');\r\n\r\n  return minBound || maxBound;\r\n}\r\n\r\nexport function isDisabledDate(date: Date, datesDisabled: Date[]): boolean {\r\n  if (datesDisabled === undefined || !datesDisabled || !datesDisabled.length) {\r\n    return false;\r\n  }\r\n\r\n  return datesDisabled.some((dateDisabled: Date) => isSame(date, dateDisabled, 'date'));\r\n}\r\n","import { TimeUnit, shiftDate } from 'ngx-bootstrap/chronos';\r\n\r\nexport type CreateMatrixCb<T> = (date: Date) => T;\r\n\r\nexport interface MatrixOptions {\r\n  height: number;\r\n  width: number;\r\n  initialDate: Date;\r\n  shift: TimeUnit;\r\n}\r\n\r\nexport function createMatrix<T>(\r\n  options: MatrixOptions,\r\n  fn: CreateMatrixCb<T>\r\n): T[][] {\r\n  let prevValue = options.initialDate;\r\n  const matrix: T[][] = new Array(options.height);\r\n  for (let i = 0; i < options.height; i++) {\r\n    matrix[i] = new Array(options.width);\r\n    for (let j = 0; j < options.width; j++) {\r\n      matrix[i][j] = fn(prevValue);\r\n      prevValue = shiftDate(prevValue, options.shift);\r\n    }\r\n  }\r\n\r\n  return matrix;\r\n}\r\n","// user and model input should handle parsing and validating input values\r\n// should accept some options\r\n// todo: split out formatting\r\nimport { DaysCalendarModel, MonthViewOptions } from '../models';\r\nimport { getFirstDayOfMonth } from 'ngx-bootstrap/chronos';\r\nimport { getStartingDayOfCalendar } from '../utils/bs-calendar-utils';\r\nimport { createMatrix } from '../utils/matrix-utils';\r\n\r\nexport function calcDaysCalendar(\r\n  startingDate: Date,\r\n  options: MonthViewOptions\r\n): DaysCalendarModel {\r\n  const firstDay = getFirstDayOfMonth(startingDate);\r\n  const initialDate = getStartingDayOfCalendar(firstDay, options);\r\n\r\n  const matrixOptions = {\r\n    width: options.width,\r\n    height: options.height,\r\n    initialDate,\r\n    shift: { day: 1 }\r\n  };\r\n  const daysMatrix = createMatrix<Date>(matrixOptions, date => date);\r\n\r\n  return {\r\n    daysMatrix,\r\n    month: firstDay\r\n  };\r\n}\r\n","import {\r\n  DatepickerFormatOptions,\r\n  DaysCalendarModel,\r\n  DaysCalendarViewModel\r\n} from '../models';\r\nimport { formatDate, getLocale } from 'ngx-bootstrap/chronos';\r\n\r\nexport function formatDaysCalendar(daysCalendar: DaysCalendarModel,\r\n                                   formatOptions: DatepickerFormatOptions,\r\n                                   monthIndex: number): DaysCalendarViewModel {\r\n  return {\r\n    month: daysCalendar.month,\r\n    monthTitle: formatDate(\r\n      daysCalendar.month,\r\n      formatOptions.monthTitle,\r\n      formatOptions.locale\r\n    ),\r\n    yearTitle: formatDate(\r\n      daysCalendar.month,\r\n      formatOptions.yearTitle,\r\n      formatOptions.locale\r\n    ),\r\n    weekNumbers: getWeekNumbers(\r\n      daysCalendar.daysMatrix,\r\n      formatOptions.weekNumbers,\r\n      formatOptions.locale\r\n    ),\r\n    weekdays: getShiftedWeekdays(formatOptions.locale),\r\n    weeks: daysCalendar.daysMatrix.map((week: Date[], weekIndex: number) => ({\r\n      days: week.map((date: Date, dayIndex: number) => ({\r\n        date,\r\n        label: formatDate(date, formatOptions.dayLabel, formatOptions.locale),\r\n        monthIndex,\r\n        weekIndex,\r\n        dayIndex\r\n      }))\r\n    }))\r\n  };\r\n}\r\n\r\nexport function getWeekNumbers(daysMatrix: Date[][],\r\n                               format: string,\r\n                               locale: string): string[] {\r\n  return daysMatrix.map(\r\n    (days: Date[]) => (days[0] ? formatDate(days[0], format, locale) : '')\r\n  );\r\n}\r\n\r\nexport function getShiftedWeekdays(locale: string): string[] {\r\n  const _locale = getLocale(locale);\r\n  const weekdays = _locale.weekdaysShort() as string[];\r\n  const firstDayOfWeek = _locale.firstDayOfWeek();\r\n\r\n  return [...weekdays.slice(firstDayOfWeek), ...weekdays.slice(0, firstDayOfWeek)];\r\n}\r\n","import {\r\n  DaysCalendarViewModel,\r\n  DayViewModel,\r\n  WeekViewModel\r\n} from '../models';\r\n\r\nimport {\r\n  isAfter,\r\n  isBefore,\r\n  isDisabledDay,\r\n  isSameDay,\r\n  isSameMonth,\r\n  shiftDate\r\n} from 'ngx-bootstrap/chronos';\r\n\r\nimport { isMonthDisabled, isDisabledDate } from '../utils/bs-calendar-utils';\r\n\r\nexport interface FlagDaysCalendarOptions {\r\n  isDisabled: boolean;\r\n  minDate: Date;\r\n  maxDate: Date;\r\n  daysDisabled: number[];\r\n  datesDisabled: Date[];\r\n  hoveredDate: Date;\r\n  selectedDate: Date;\r\n  selectedRange: Date[];\r\n  displayMonths: number;\r\n  monthIndex: number;\r\n}\r\n\r\nexport function flagDaysCalendar(\r\n  formattedMonth: DaysCalendarViewModel,\r\n  options: FlagDaysCalendarOptions\r\n): DaysCalendarViewModel {\r\n  formattedMonth.weeks.forEach((week: WeekViewModel) => {\r\n    /* tslint:disable-next-line: cyclomatic-complexity */\r\n    week.days.forEach((day: DayViewModel, dayIndex: number) => {\r\n      // datepicker\r\n      const isOtherMonth = !isSameMonth(day.date, formattedMonth.month);\r\n\r\n      const isHovered =\r\n        !isOtherMonth && isSameDay(day.date, options.hoveredDate);\r\n      // date range picker\r\n      const isSelectionStart =\r\n        !isOtherMonth &&\r\n        options.selectedRange &&\r\n        isSameDay(day.date, options.selectedRange[0]);\r\n      const isSelectionEnd =\r\n        !isOtherMonth &&\r\n        options.selectedRange &&\r\n        isSameDay(day.date, options.selectedRange[1]);\r\n\r\n      const isSelected =\r\n        (!isOtherMonth && isSameDay(day.date, options.selectedDate)) ||\r\n        isSelectionStart ||\r\n        isSelectionEnd;\r\n\r\n      const isInRange =\r\n        !isOtherMonth &&\r\n        options.selectedRange &&\r\n        isDateInRange(day.date, options.selectedRange, options.hoveredDate);\r\n\r\n      const isDisabled =\r\n        options.isDisabled ||\r\n        isBefore(day.date, options.minDate, 'day') ||\r\n        isAfter(day.date, options.maxDate, 'day') ||\r\n        isDisabledDay(day.date, options.daysDisabled) ||\r\n        isDisabledDate(day.date, options.datesDisabled);\r\n\r\n      const currentDate = new Date();\r\n      const isToday = !isOtherMonth && isSameDay(day.date, currentDate);\r\n\r\n      // decide update or not\r\n      const newDay = Object.assign({}, day, {\r\n        isOtherMonth,\r\n        isHovered,\r\n        isSelected,\r\n        isSelectionStart,\r\n        isSelectionEnd,\r\n        isInRange,\r\n        isDisabled,\r\n        isToday\r\n      });\r\n\r\n      if (\r\n        day.isOtherMonth !== newDay.isOtherMonth ||\r\n        day.isHovered !== newDay.isHovered ||\r\n        day.isSelected !== newDay.isSelected ||\r\n        day.isSelectionStart !== newDay.isSelectionStart ||\r\n        day.isSelectionEnd !== newDay.isSelectionEnd ||\r\n        day.isDisabled !== newDay.isDisabled ||\r\n        day.isInRange !== newDay.isInRange\r\n      ) {\r\n        week.days[dayIndex] = newDay;\r\n      }\r\n    });\r\n  });\r\n\r\n  // todo: add check for linked calendars\r\n  formattedMonth.hideLeftArrow =\r\n    options.isDisabled ||\r\n    (options.monthIndex > 0 && options.monthIndex !== options.displayMonths);\r\n  formattedMonth.hideRightArrow =\r\n    options.isDisabled ||\r\n    (options.monthIndex < options.displayMonths &&\r\n      options.monthIndex + 1 !== options.displayMonths);\r\n\r\n  formattedMonth.disableLeftArrow = isMonthDisabled(\r\n    shiftDate(formattedMonth.month, { month: -1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n  formattedMonth.disableRightArrow = isMonthDisabled(\r\n    shiftDate(formattedMonth.month, { month: 1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n\r\n  return formattedMonth;\r\n}\r\n\r\nfunction isDateInRange(\r\n  date: Date,\r\n  selectedRange: Date[],\r\n  hoveredDate: Date\r\n): boolean {\r\n  if (!date || !selectedRange[0]) {\r\n    return false;\r\n  }\r\n\r\n  if (selectedRange[1]) {\r\n    return date > selectedRange[0] && date <= selectedRange[1];\r\n  }\r\n\r\n  if (hoveredDate) {\r\n    return date > selectedRange[0] && date <= hoveredDate;\r\n  }\r\n\r\n  return false;\r\n}\r\n","import { BsDatepickerViewMode } from '../models';\r\n\r\nexport function canSwitchMode(mode: BsDatepickerViewMode, minMode?: BsDatepickerViewMode): boolean {\r\n  return minMode ? mode >= minMode : true;\r\n}\r\n","import {\r\n  DatepickerFormatOptions,\r\n  MonthsCalendarViewModel,\r\n  CalendarCellViewModel\r\n} from '../models';\r\nimport { startOf, formatDate } from 'ngx-bootstrap/chronos';\r\nimport { createMatrix } from '../utils/matrix-utils';\r\n\r\nconst height = 4;\r\nconst width = 3;\r\nconst shift = { month: 1 };\r\n\r\nexport function formatMonthsCalendar(\r\n  viewDate: Date,\r\n  formatOptions: DatepickerFormatOptions\r\n): MonthsCalendarViewModel {\r\n  const initialDate = startOf(viewDate, 'year');\r\n  const matrixOptions = { width, height, initialDate, shift };\r\n  const monthMatrix = createMatrix<\r\n    CalendarCellViewModel\r\n  >(matrixOptions, date => ({\r\n    date,\r\n    label: formatDate(date, formatOptions.monthLabel, formatOptions.locale)\r\n  }));\r\n\r\n  return {\r\n    months: monthMatrix,\r\n    monthTitle: '',\r\n    yearTitle: formatDate(\r\n      viewDate,\r\n      formatOptions.yearTitle,\r\n      formatOptions.locale\r\n    )\r\n  };\r\n}\r\n","import { isSameMonth, shiftDate } from 'ngx-bootstrap/chronos';\r\nimport {\r\n  MonthsCalendarViewModel,\r\n  CalendarCellViewModel\r\n} from '../models';\r\nimport { isMonthDisabled, isYearDisabled } from '../utils/bs-calendar-utils';\r\n\r\nexport interface FlagMonthCalendarOptions {\r\n  isDisabled: boolean;\r\n  minDate: Date;\r\n  maxDate: Date;\r\n  hoveredMonth: Date;\r\n  displayMonths: number;\r\n  monthIndex: number;\r\n}\r\n\r\nexport function flagMonthsCalendar(\r\n  monthCalendar: MonthsCalendarViewModel,\r\n  options: FlagMonthCalendarOptions\r\n): MonthsCalendarViewModel {\r\n  monthCalendar.months.forEach(\r\n    (months: CalendarCellViewModel[], rowIndex: number) => {\r\n      months.forEach((month: CalendarCellViewModel, monthIndex: number) => {\r\n        const isHovered = isSameMonth(month.date, options.hoveredMonth);\r\n        const isDisabled =\r\n          options.isDisabled ||\r\n          isMonthDisabled(month.date, options.minDate, options.maxDate);\r\n        const newMonth = Object.assign(/*{},*/ month, {\r\n          isHovered,\r\n          isDisabled\r\n        });\r\n        if (\r\n          month.isHovered !== newMonth.isHovered ||\r\n          month.isDisabled !== newMonth.isDisabled\r\n        ) {\r\n          monthCalendar.months[rowIndex][monthIndex] = newMonth;\r\n        }\r\n      });\r\n    }\r\n  );\r\n\r\n  // todo: add check for linked calendars\r\n  monthCalendar.hideLeftArrow =\r\n    options.monthIndex > 0 && options.monthIndex !== options.displayMonths;\r\n  monthCalendar.hideRightArrow =\r\n    options.monthIndex < options.displayMonths &&\r\n    options.monthIndex + 1 !== options.displayMonths;\r\n\r\n  monthCalendar.disableLeftArrow = isYearDisabled(\r\n    shiftDate(monthCalendar.months[0][0].date, { year: -1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n  monthCalendar.disableRightArrow = isYearDisabled(\r\n    shiftDate(monthCalendar.months[0][0].date, { year: 1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n\r\n  return monthCalendar;\r\n}\r\n","import {\r\n  DatepickerFormatOptions,\r\n  YearsCalendarViewModel,\r\n  CalendarCellViewModel\r\n} from '../models';\r\nimport { shiftDate, formatDate } from 'ngx-bootstrap/chronos';\r\nimport { createMatrix } from '../utils/matrix-utils';\r\n\r\nconst height = 4;\r\nconst width = 4;\r\nexport const yearsPerCalendar = height * width;\r\nconst initialShift = (Math.floor(yearsPerCalendar / 2) - 1) * -1;\r\nconst shift = { year: 1 };\r\n\r\nexport function formatYearsCalendar(\r\n  viewDate: Date,\r\n  formatOptions: DatepickerFormatOptions\r\n): YearsCalendarViewModel {\r\n  const initialDate = shiftDate(viewDate, { year: initialShift });\r\n  const matrixOptions = { width, height, initialDate, shift };\r\n  const yearsMatrix = createMatrix<\r\n    CalendarCellViewModel\r\n  >(matrixOptions, date => ({\r\n    date,\r\n    label: formatDate(date, formatOptions.yearLabel, formatOptions.locale)\r\n  }));\r\n  const yearTitle = formatYearRangeTitle(yearsMatrix, formatOptions);\r\n\r\n  return {\r\n    years: yearsMatrix,\r\n    monthTitle: '',\r\n    yearTitle\r\n  };\r\n}\r\n\r\nfunction formatYearRangeTitle(\r\n  yearsMatrix: CalendarCellViewModel[][],\r\n  formatOptions: DatepickerFormatOptions\r\n): string {\r\n  const from = formatDate(\r\n    yearsMatrix[0][0].date,\r\n    formatOptions.yearTitle,\r\n    formatOptions.locale\r\n  );\r\n  const to = formatDate(\r\n    yearsMatrix[height - 1][width - 1].date,\r\n    formatOptions.yearTitle,\r\n    formatOptions.locale\r\n  );\r\n\r\n  return `${from} - ${to}`;\r\n}\r\n","import { isSameYear, shiftDate } from 'ngx-bootstrap/chronos';\r\nimport { YearsCalendarViewModel, CalendarCellViewModel } from '../models';\r\nimport { isYearDisabled } from '../utils/bs-calendar-utils';\r\n\r\nexport interface FlagYearsCalendarOptions {\r\n  isDisabled: boolean;\r\n  minDate: Date;\r\n  maxDate: Date;\r\n  hoveredYear: Date;\r\n  displayMonths: number;\r\n  yearIndex: number;\r\n}\r\n\r\nexport function flagYearsCalendar(\r\n  yearsCalendar: YearsCalendarViewModel,\r\n  options: FlagYearsCalendarOptions\r\n): YearsCalendarViewModel {\r\n  yearsCalendar.years.forEach(\r\n    (years: CalendarCellViewModel[], rowIndex: number) => {\r\n      years.forEach((year: CalendarCellViewModel, yearIndex: number) => {\r\n        const isHovered = isSameYear(year.date, options.hoveredYear);\r\n        const isDisabled =\r\n          options.isDisabled ||\r\n          isYearDisabled(year.date, options.minDate, options.maxDate);\r\n\r\n        const newMonth = Object.assign(/*{},*/ year, { isHovered, isDisabled });\r\n        if (\r\n          year.isHovered !== newMonth.isHovered ||\r\n          year.isDisabled !== newMonth.isDisabled\r\n        ) {\r\n          yearsCalendar.years[rowIndex][yearIndex] = newMonth;\r\n        }\r\n      });\r\n    }\r\n  );\r\n\r\n  // todo: add check for linked calendars\r\n  yearsCalendar.hideLeftArrow =\r\n    options.yearIndex > 0 && options.yearIndex !== options.displayMonths;\r\n  yearsCalendar.hideRightArrow =\r\n    options.yearIndex < options.displayMonths &&\r\n    options.yearIndex + 1 !== options.displayMonths;\r\n\r\n  yearsCalendar.disableLeftArrow = isYearDisabled(\r\n    shiftDate(yearsCalendar.years[0][0].date, { year: -1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n  const i = yearsCalendar.years.length - 1;\r\n  const j = yearsCalendar.years[i].length - 1;\r\n  yearsCalendar.disableRightArrow = isYearDisabled(\r\n    shiftDate(yearsCalendar.years[i][j].date, { year: 1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n\r\n  return yearsCalendar;\r\n}\r\n","// tslint:disable:max-file-line-count\r\nimport { BsDatepickerState, initialDatepickerState } from './bs-datepicker.state';\r\nimport { Action } from 'ngx-bootstrap/mini-ngrx';\r\nimport { BsDatepickerActions } from './bs-datepicker.actions';\r\nimport { calcDaysCalendar } from '../engine/calc-days-calendar';\r\nimport { formatDaysCalendar } from '../engine/format-days-calendar';\r\nimport { flagDaysCalendar } from '../engine/flag-days-calendar';\r\nimport {\r\n  setFullDate,\r\n  shiftDate,\r\n  isArray,\r\n  isDateValid,\r\n  startOf,\r\n  getLocale,\r\n  isAfter,\r\n  isBefore\r\n} from 'ngx-bootstrap/chronos';\r\nimport { canSwitchMode } from '../engine/view-mode';\r\nimport { formatMonthsCalendar } from '../engine/format-months-calendar';\r\nimport { flagMonthsCalendar } from '../engine/flag-months-calendar';\r\nimport { formatYearsCalendar, yearsPerCalendar } from '../engine/format-years-calendar';\r\nimport { flagYearsCalendar } from '../engine/flag-years-calendar';\r\nimport { BsViewNavigationEvent, DatepickerFormatOptions, BsDatepickerViewMode } from '../models';\r\n\r\n\r\n/* tslint:disable-next-line: cyclomatic-complexity */\r\nexport function bsDatepickerReducer(state = initialDatepickerState,\r\n                                    action: Action): BsDatepickerState {\r\n  switch (action.type) {\r\n    case BsDatepickerActions.CALCULATE: {\r\n      return calculateReducer(state);\r\n    }\r\n\r\n    case BsDatepickerActions.FORMAT: {\r\n      return formatReducer(state, action);\r\n    }\r\n\r\n    case BsDatepickerActions.FLAG: {\r\n      return flagReducer(state, action);\r\n    }\r\n\r\n    case BsDatepickerActions.NAVIGATE_OFFSET: {\r\n      const date = shiftDate(startOf(state.view.date, 'month'), action.payload);\r\n      const newState = {\r\n        view: {\r\n          mode: state.view.mode,\r\n          date\r\n        }\r\n      };\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    case BsDatepickerActions.NAVIGATE_TO: {\r\n      const payload: BsViewNavigationEvent = action.payload;\r\n\r\n      const date = setFullDate(state.view.date, payload.unit);\r\n      let newState;\r\n      let mode: BsDatepickerViewMode;\r\n      if (canSwitchMode(payload.viewMode, state.minMode)) {\r\n        mode = payload.viewMode;\r\n        newState = { view: { date, mode } };\r\n      } else {\r\n        mode = state.view.mode;\r\n        newState = { selectedDate: date, view: { date, mode } };\r\n      }\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    case BsDatepickerActions.CHANGE_VIEWMODE: {\r\n      if (!canSwitchMode(action.payload, state.minMode)) {\r\n        return state;\r\n      }\r\n      const date = state.view.date;\r\n      const mode = action.payload;\r\n      const newState = { view: { date, mode } };\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    case BsDatepickerActions.HOVER: {\r\n      return Object.assign({}, state, { hoveredDate: action.payload });\r\n    }\r\n\r\n    case BsDatepickerActions.SELECT: {\r\n      const newState = {\r\n        selectedDate: action.payload,\r\n        view: state.view\r\n      };\r\n\r\n      const mode = state.view.mode;\r\n      const _date = action.payload || state.view.date;\r\n      const date = getViewDate(_date, state.minDate, state.maxDate);\r\n      newState.view = { mode, date };\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    case BsDatepickerActions.SET_OPTIONS: {\r\n      const newState = action.payload;\r\n      // preserve view mode\r\n      const mode = newState.minMode ? newState.minMode : state.view.mode;\r\n      const _viewDate = isDateValid(newState.value) && newState.value\r\n        || isArray(newState.value) && isDateValid(newState.value[0]) && newState.value[0]\r\n        || state.view.date;\r\n      const date = getViewDate(_viewDate, newState.minDate, newState.maxDate);\r\n      newState.view = { mode, date };\r\n      // update selected value\r\n      if (newState.value) {\r\n        // if new value is array we work with date range\r\n        if (isArray(newState.value)) {\r\n          newState.selectedRange = newState.value;\r\n        }\r\n\r\n        // if new value is a date -> datepicker\r\n        if (newState.value instanceof Date) {\r\n          newState.selectedDate = newState.value;\r\n        }\r\n\r\n        // provided value is not supported :)\r\n        // need to report it somehow\r\n      }\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    // date range picker\r\n    case BsDatepickerActions.SELECT_RANGE: {\r\n      const newState = {\r\n        selectedRange: action.payload,\r\n        view: state.view\r\n      };\r\n\r\n      const mode = state.view.mode;\r\n      const _date = action.payload && action.payload[0] || state.view.date;\r\n      const date = getViewDate(_date, state.minDate, state.maxDate);\r\n      newState.view = { mode, date };\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    case BsDatepickerActions.SET_MIN_DATE: {\r\n      return Object.assign({}, state, {\r\n        minDate: action.payload\r\n      });\r\n    }\r\n    case BsDatepickerActions.SET_MAX_DATE: {\r\n      return Object.assign({}, state, {\r\n        maxDate: action.payload\r\n      });\r\n    }\r\n    case BsDatepickerActions.SET_IS_DISABLED: {\r\n      return Object.assign({}, state, {\r\n        isDisabled: action.payload\r\n      });\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction calculateReducer(state: BsDatepickerState): BsDatepickerState {\r\n  // how many calendars\r\n  const displayMonths = state.displayMonths;\r\n  // use selected date on initial rendering if set\r\n  let viewDate = state.view.date;\r\n\r\n  if (state.view.mode === 'day') {\r\n    state.monthViewOptions.firstDayOfWeek = getLocale(state.locale).firstDayOfWeek();\r\n    const monthsModel = new Array(displayMonths);\r\n    for (let monthIndex = 0; monthIndex < displayMonths; monthIndex++) {\r\n      // todo: for unlinked calendars it will be harder\r\n      monthsModel[monthIndex] = calcDaysCalendar(\r\n        viewDate,\r\n        state.monthViewOptions\r\n      );\r\n      viewDate = shiftDate(viewDate, { month: 1 });\r\n    }\r\n\r\n    return Object.assign({}, state, { monthsModel });\r\n  }\r\n\r\n  if (state.view.mode === 'month') {\r\n    const monthsCalendar = new Array(displayMonths);\r\n    for (\r\n      let calendarIndex = 0;\r\n      calendarIndex < displayMonths;\r\n      calendarIndex++\r\n    ) {\r\n      // todo: for unlinked calendars it will be harder\r\n      monthsCalendar[calendarIndex] = formatMonthsCalendar(\r\n        viewDate,\r\n        getFormatOptions(state)\r\n      );\r\n      viewDate = shiftDate(viewDate, { year: 1 });\r\n    }\r\n\r\n    return Object.assign({}, state, { monthsCalendar });\r\n  }\r\n\r\n  if (state.view.mode === 'year') {\r\n    const yearsCalendarModel = new Array(displayMonths);\r\n\r\n    for (\r\n      let calendarIndex = 0;\r\n      calendarIndex < displayMonths;\r\n      calendarIndex++\r\n    ) {\r\n      // todo: for unlinked calendars it will be harder\r\n      yearsCalendarModel[calendarIndex] = formatYearsCalendar(\r\n        viewDate,\r\n        getFormatOptions(state)\r\n      );\r\n      viewDate = shiftDate(viewDate, { year: yearsPerCalendar });\r\n    }\r\n\r\n    return Object.assign({}, state, { yearsCalendarModel });\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction formatReducer(state: BsDatepickerState,\r\n                       action: Action): BsDatepickerState {\r\n  if (state.view.mode === 'day') {\r\n    const formattedMonths = state.monthsModel.map((month, monthIndex) =>\r\n      formatDaysCalendar(month, getFormatOptions(state), monthIndex)\r\n    );\r\n\r\n    return Object.assign({}, state, { formattedMonths });\r\n  }\r\n\r\n  // how many calendars\r\n  const displayMonths = state.displayMonths;\r\n  // check initial rendering\r\n  // use selected date on initial rendering if set\r\n  let viewDate = state.view.date;\r\n\r\n  if (state.view.mode === 'month') {\r\n    const monthsCalendar = new Array(displayMonths);\r\n    for (\r\n      let calendarIndex = 0;\r\n      calendarIndex < displayMonths;\r\n      calendarIndex++\r\n    ) {\r\n      // todo: for unlinked calendars it will be harder\r\n      monthsCalendar[calendarIndex] = formatMonthsCalendar(\r\n        viewDate,\r\n        getFormatOptions(state)\r\n      );\r\n      viewDate = shiftDate(viewDate, { year: 1 });\r\n    }\r\n\r\n    return Object.assign({}, state, { monthsCalendar });\r\n  }\r\n\r\n  if (state.view.mode === 'year') {\r\n    const yearsCalendarModel = new Array(displayMonths);\r\n    for (\r\n      let calendarIndex = 0;\r\n      calendarIndex < displayMonths;\r\n      calendarIndex++\r\n    ) {\r\n      // todo: for unlinked calendars it will be harder\r\n      yearsCalendarModel[calendarIndex] = formatYearsCalendar(\r\n        viewDate,\r\n        getFormatOptions(state)\r\n      );\r\n      viewDate = shiftDate(viewDate, { year: 16 });\r\n    }\r\n\r\n    return Object.assign({}, state, { yearsCalendarModel });\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction flagReducer(state: BsDatepickerState,\r\n                     action: Action): BsDatepickerState {\r\n  if (state.view.mode === 'day') {\r\n    const flaggedMonths = state.formattedMonths.map(\r\n      (formattedMonth, monthIndex) =>\r\n        flagDaysCalendar(formattedMonth, {\r\n          isDisabled: state.isDisabled,\r\n          minDate: state.minDate,\r\n          maxDate: state.maxDate,\r\n          daysDisabled: state.daysDisabled,\r\n          datesDisabled: state.datesDisabled,\r\n          hoveredDate: state.hoveredDate,\r\n          selectedDate: state.selectedDate,\r\n          selectedRange: state.selectedRange,\r\n          displayMonths: state.displayMonths,\r\n          monthIndex\r\n        })\r\n    );\r\n\r\n    return Object.assign({}, state, { flaggedMonths });\r\n  }\r\n\r\n  if (state.view.mode === 'month') {\r\n    const flaggedMonthsCalendar = state.monthsCalendar.map(\r\n      (formattedMonth, monthIndex) =>\r\n        flagMonthsCalendar(formattedMonth, {\r\n          isDisabled: state.isDisabled,\r\n          minDate: state.minDate,\r\n          maxDate: state.maxDate,\r\n          hoveredMonth: state.hoveredMonth,\r\n          displayMonths: state.displayMonths,\r\n          monthIndex\r\n        })\r\n    );\r\n\r\n    return Object.assign({}, state, { flaggedMonthsCalendar });\r\n  }\r\n\r\n  if (state.view.mode === 'year') {\r\n    const yearsCalendarFlagged = state.yearsCalendarModel.map(\r\n      (formattedMonth, yearIndex) =>\r\n        flagYearsCalendar(formattedMonth, {\r\n          isDisabled: state.isDisabled,\r\n          minDate: state.minDate,\r\n          maxDate: state.maxDate,\r\n          hoveredYear: state.hoveredYear,\r\n          displayMonths: state.displayMonths,\r\n          yearIndex\r\n        })\r\n    );\r\n\r\n    return Object.assign({}, state, { yearsCalendarFlagged });\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction getFormatOptions(state: BsDatepickerState): DatepickerFormatOptions {\r\n  return {\r\n    locale: state.locale,\r\n\r\n    monthTitle: state.monthTitle,\r\n    yearTitle: state.yearTitle,\r\n\r\n    dayLabel: state.dayLabel,\r\n    monthLabel: state.monthLabel,\r\n    yearLabel: state.yearLabel,\r\n\r\n    weekNumbers: state.weekNumbers\r\n  };\r\n}\r\n\r\n/**\r\n * if view date is provided (bsValue|ngModel) it should be shown\r\n * if view date is not provider:\r\n * if minDate>currentDate (default view value), show minDate\r\n * if maxDate<currentDate(default view value) show maxDate\r\n */\r\nfunction getViewDate(viewDate: Date | Date[], minDate: Date, maxDate: Date) {\r\n  const _date = Array.isArray(viewDate) ? viewDate[0] : viewDate;\r\n\r\n  if (minDate && isAfter(minDate, _date, 'day')) {\r\n    return minDate;\r\n  }\r\n\r\n  if (maxDate && isBefore(maxDate, _date, 'day')) {\r\n    return maxDate;\r\n  }\r\n\r\n  return _date;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MiniStore, Action, MiniState } from 'ngx-bootstrap/mini-ngrx';\r\nimport { BsDatepickerState, initialDatepickerState } from './bs-datepicker.state';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { bsDatepickerReducer } from './bs-datepicker.reducer';\r\n\r\n@Injectable()\r\nexport class BsDatepickerStore extends MiniStore<BsDatepickerState> {\r\n  constructor() {\r\n    const _dispatcher = new BehaviorSubject<Action>({\r\n      type: '[datepicker] dispatcher init'\r\n    });\r\n    const state = new MiniState<BsDatepickerState>(\r\n      initialDatepickerState,\r\n      _dispatcher,\r\n      bsDatepickerReducer\r\n    );\r\n    super(_dispatcher, bsDatepickerReducer, state);\r\n  }\r\n}\r\n","import { Component, EventEmitter, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { BsDatepickerAbstractComponent } from '../../base/bs-datepicker-container';\r\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\r\nimport { DayViewModel } from '../../models';\r\nimport { BsDatepickerActions } from '../../reducer/bs-datepicker.actions';\r\nimport { BsDatepickerEffects } from '../../reducer/bs-datepicker.effects';\r\nimport { BsDatepickerStore } from '../../reducer/bs-datepicker.store';\r\nimport { PositioningService } from 'ngx-bootstrap/positioning';\r\n\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'bs-datepicker-container',\r\n  providers: [BsDatepickerStore, BsDatepickerEffects],\r\n  templateUrl: './bs-datepicker-view.html',\r\n  host: {\r\n    '(click)': '_stopPropagation($event)',\r\n    style: 'position: absolute; display: block;',\r\n    role: 'dialog',\r\n    'aria-label': 'calendar'\r\n  }\r\n})\r\nexport class BsDatepickerContainerComponent extends BsDatepickerAbstractComponent\r\n  implements OnInit, OnDestroy {\r\n  set value(value: Date) {\r\n    this._effects.setValue(value);\r\n  }\r\n  valueChange: EventEmitter<Date> = new EventEmitter<Date>();\r\n\r\n  _subs: Subscription[] = [];\r\n  constructor(\r\n    private _config: BsDatepickerConfig,\r\n    private _store: BsDatepickerStore,\r\n    private _actions: BsDatepickerActions,\r\n    _effects: BsDatepickerEffects,\r\n    private _positionService: PositioningService\r\n  ) {\r\n    super();\r\n    this._effects = _effects;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this._positionService.setOptions({\r\n      modifiers: {\r\n        flip: {\r\n          enabled: this._config.adaptivePosition\r\n        }\r\n      }\r\n    });\r\n\r\n    this.isOtherMonthsActive = this._config.selectFromOtherMonth;\r\n    this.containerClass = this._config.containerClass;\r\n    this._effects\r\n      .init(this._store)\r\n      // intial state options\r\n      .setOptions(this._config)\r\n      // data binding view --> model\r\n      .setBindings(this)\r\n      // set event handlers\r\n      .setEventHandlers(this)\r\n      .registerDatepickerSideEffects();\r\n\r\n    // todo: move it somewhere else\r\n    // on selected date change\r\n    this._subs.push(\r\n      this._store\r\n        /* tslint:disable-next-line: no-any */\r\n        .select((state: any) => state.selectedDate)\r\n        /* tslint:disable-next-line: no-any */\r\n        .subscribe((date: any) => this.valueChange.emit(date))\r\n    );\r\n  }\r\n\r\n  daySelectHandler(day: DayViewModel): void {\r\n    const isDisabled = this.isOtherMonthsActive ? day.isDisabled : (day.isOtherMonth || day.isDisabled);\r\n\r\n    if (isDisabled) {\r\n      return;\r\n    }\r\n\r\n    this._store.dispatch(this._actions.select(day.date));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n    this._effects.destroy();\r\n  }\r\n}\r\n","import {\r\n  ComponentRef, Directive, ElementRef, EventEmitter, Input, OnChanges,\r\n  OnDestroy, OnInit, Output, Renderer2, SimpleChanges, ViewContainerRef\r\n} from '@angular/core';\r\nimport { ComponentLoader, ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\r\nimport { BsDatepickerContainerComponent } from './themes/bs/bs-datepicker-container.component';\r\nimport { Subscription } from 'rxjs';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\nimport { BsDatepickerViewMode } from './models';\r\n\r\n@Directive({\r\n  selector: '[bsDatepicker]',\r\n  exportAs: 'bsDatepicker'\r\n})\r\nexport class BsDatepickerDirective implements OnInit, OnDestroy, OnChanges {\r\n  /**\r\n   * Placement of a datepicker. Accepts: \"top\", \"bottom\", \"left\", \"right\"\r\n   */\r\n  @Input() placement: 'top' | 'bottom' | 'left' | 'right' = 'bottom';\r\n  /**\r\n   * Specifies events that should trigger. Supports a space separated list of\r\n   * event names.\r\n   */\r\n  @Input() triggers = 'click';\r\n  /**\r\n   * Close datepicker on outside click\r\n   */\r\n  @Input() outsideClick = true;\r\n  /**\r\n   * A selector specifying the element the datepicker should be appended to.\r\n   * Currently only supports \"body\".\r\n   */\r\n  @Input() container = 'body';\r\n\r\n  @Input() outsideEsc = true;\r\n\r\n  /**\r\n   * Returns whether or not the datepicker is currently being shown\r\n   */\r\n  @Input()\r\n  get isOpen(): boolean {\r\n    return this._datepicker.isShown;\r\n  }\r\n\r\n  set isOpen(value: boolean) {\r\n    if (value) {\r\n      this.show();\r\n    } else {\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Emits an event when the datepicker is shown\r\n   */\r\n  /* tslint:disable-next-line: no-any*/\r\n  @Output() onShown: EventEmitter<any>;\r\n  /**\r\n   * Emits an event when the datepicker is hidden\r\n   */\r\n  /* tslint:disable-next-line: no-any*/\r\n  @Output() onHidden: EventEmitter<any>;\r\n\r\n  _bsValue: Date;\r\n  /**\r\n   * Initial value of datepicker\r\n   */\r\n  @Input()\r\n  set bsValue(value: Date) {\r\n    if (this._bsValue === value) {\r\n      return;\r\n    }\r\n    this._bsValue = value;\r\n    this.bsValueChange.emit(value);\r\n  }\r\n\r\n  /**\r\n   * Config object for datepicker\r\n   */\r\n  @Input() bsConfig: Partial<BsDatepickerConfig>;\r\n  /**\r\n   * Indicates whether datepicker's content is enabled or not\r\n   */\r\n  @Input() isDisabled: boolean;\r\n  /**\r\n   * Minimum date which is available for selection\r\n   */\r\n  @Input() minDate: Date;\r\n  /**\r\n   * Maximum date which is available for selection\r\n   */\r\n  @Input() maxDate: Date;\r\n\r\n  /**\r\n   * Minimum view mode : day, month, or year\r\n   */\r\n  @Input() minMode: BsDatepickerViewMode;\r\n\r\n  /**\r\n   * Disable Certain days in the week\r\n   */\r\n  @Input() daysDisabled: number[];\r\n\r\n  /**\r\n   * Disable specific dates\r\n   */\r\n  @Input() datesDisabled: Date[];\r\n  /**\r\n   * Emits when datepicker value has been changed\r\n   */\r\n  @Output() bsValueChange: EventEmitter<Date> = new EventEmitter();\r\n\r\n  protected _subs: Subscription[] = [];\r\n\r\n  private _datepicker: ComponentLoader<BsDatepickerContainerComponent>;\r\n  private _datepickerRef: ComponentRef<BsDatepickerContainerComponent>;\r\n\r\n  constructor(public _config: BsDatepickerConfig,\r\n              _elementRef: ElementRef,\r\n              _renderer: Renderer2,\r\n              _viewContainerRef: ViewContainerRef,\r\n              cis: ComponentLoaderFactory) {\r\n    // todo: assign only subset of fields\r\n    Object.assign(this, this._config);\r\n    this._datepicker = cis.createLoader<BsDatepickerContainerComponent>(\r\n      _elementRef,\r\n      _viewContainerRef,\r\n      _renderer\r\n    );\r\n    this.onShown = this._datepicker.onShown;\r\n    this.onHidden = this._datepicker.onHidden;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this._datepicker.listen({\r\n      outsideClick: this.outsideClick,\r\n      outsideEsc: this.outsideEsc,\r\n      triggers: this.triggers,\r\n      show: () => this.show()\r\n    });\r\n    this.setConfig();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (!this._datepickerRef || !this._datepickerRef.instance) {\r\n      return;\r\n    }\r\n\r\n    if (changes.minDate) {\r\n      this._datepickerRef.instance.minDate = this.minDate;\r\n    }\r\n\r\n    if (changes.maxDate) {\r\n      this._datepickerRef.instance.maxDate = this.maxDate;\r\n    }\r\n\r\n    if (changes.daysDisabled) {\r\n      this._datepickerRef.instance.daysDisabled = this.daysDisabled;\r\n    }\r\n\r\n    if (changes.datesDisabled) {\r\n      this._datepickerRef.instance.datesDisabled = this.datesDisabled;\r\n    }\r\n\r\n    if (changes.isDisabled) {\r\n      this._datepickerRef.instance.isDisabled = this.isDisabled;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens an elements datepicker. This is considered a manual triggering of\r\n   * the datepicker.\r\n   */\r\n  show(): void {\r\n    if (this._datepicker.isShown) {\r\n      return;\r\n    }\r\n\r\n    this.setConfig();\r\n\r\n    this._datepickerRef = this._datepicker\r\n      .provide({provide: BsDatepickerConfig, useValue: this._config})\r\n      .attach(BsDatepickerContainerComponent)\r\n      .to(this.container)\r\n      .position({attachment: this.placement})\r\n      .show({placement: this.placement});\r\n\r\n    // if date changes from external source (model -> view)\r\n    this._subs.push(\r\n      this.bsValueChange.subscribe((value: Date) => {\r\n        this._datepickerRef.instance.value = value;\r\n      })\r\n    );\r\n\r\n    // if date changes from picker (view -> model)\r\n    this._subs.push(\r\n      this._datepickerRef.instance.valueChange.subscribe((value: Date) => {\r\n        this.bsValue = value;\r\n        this.hide();\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Closes an elements datepicker. This is considered a manual triggering of\r\n   * the datepicker.\r\n   */\r\n  hide(): void {\r\n    if (this.isOpen) {\r\n      this._datepicker.hide();\r\n    }\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles an elements datepicker. This is considered a manual triggering\r\n   * of the datepicker.\r\n   */\r\n  toggle(): void {\r\n    if (this.isOpen) {\r\n      return this.hide();\r\n    }\r\n\r\n    this.show();\r\n  }\r\n\r\n  /**\r\n   * Set config for datepicker\r\n   */\r\n  setConfig(): void {\r\n    this._config = Object.assign({}, this._config, this.bsConfig, {\r\n      value: this._bsValue,\r\n      isDisabled: this.isDisabled,\r\n      minDate: this.minDate || this.bsConfig && this.bsConfig.minDate,\r\n      maxDate: this.maxDate || this.bsConfig && this.bsConfig.maxDate,\r\n      daysDisabled: this.daysDisabled || this.bsConfig && this.bsConfig.daysDisabled,\r\n      datesDisabled: this.datesDisabled || this.bsConfig && this.bsConfig.datesDisabled,\r\n      minMode: this.minMode || this.bsConfig && this.bsConfig.minMode\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._datepicker.dispose();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\n\r\n@Injectable()\r\nexport class BsDatepickerInlineConfig extends BsDatepickerConfig { }\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { BsDatepickerContainerComponent } from './bs-datepicker-container.component';\r\n\r\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\r\nimport { BsDatepickerActions } from '../../reducer/bs-datepicker.actions';\r\nimport { BsDatepickerEffects } from '../../reducer/bs-datepicker.effects';\r\nimport { BsDatepickerStore } from '../../reducer/bs-datepicker.store';\r\n\r\nimport { PositioningService } from 'ngx-bootstrap/positioning';\r\n\r\n@Component({\r\n  selector: 'bs-datepicker-inline-container',\r\n  providers: [BsDatepickerStore, BsDatepickerEffects],\r\n  templateUrl: './bs-datepicker-view.html',\r\n  host: {\r\n    '(click)': '_stopPropagation($event)',\r\n    style: 'display: inline-block;'\r\n  }\r\n})\r\nexport class BsDatepickerInlineContainerComponent extends BsDatepickerContainerComponent\r\n  implements OnInit, OnDestroy {\r\n  constructor(\r\n    _config: BsDatepickerConfig,\r\n    _store: BsDatepickerStore,\r\n    _actions: BsDatepickerActions,\r\n    _effects: BsDatepickerEffects,\r\n    _positioningService: PositioningService\r\n  ) {\r\n    super(_config, _store, _actions, _effects, _positioningService);\r\n  }\r\n}\r\n","import {\r\n  ComponentRef, Directive, ElementRef, EventEmitter, Input, OnChanges,\r\n  OnDestroy, OnInit, Output, Renderer2, SimpleChanges, ViewContainerRef\r\n} from '@angular/core';\r\nimport { ComponentLoader, ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\r\nimport { BsDatepickerInlineContainerComponent } from './themes/bs/bs-datepicker-inline-container.component';\r\nimport { Subscription } from 'rxjs';\r\nimport { BsDatepickerInlineConfig } from './bs-datepicker-inline.config';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\n\r\n@Directive({\r\n  selector: 'bs-datepicker-inline',\r\n  exportAs: 'bsDatepickerInline'\r\n})\r\nexport class BsDatepickerInlineDirective implements OnInit, OnDestroy, OnChanges {\r\n  _bsValue: Date;\r\n  /**\r\n   * Initial value of datepicker\r\n   */\r\n  @Input()\r\n  set bsValue(value: Date) {\r\n    if (this._bsValue === value) {\r\n      return;\r\n    }\r\n    this._bsValue = value;\r\n    this.bsValueChange.emit(value);\r\n  }\r\n\r\n  /**\r\n   * Config object for datepicker\r\n   */\r\n  @Input() bsConfig: Partial<BsDatepickerInlineConfig>;\r\n  /**\r\n   * Indicates whether datepicker is enabled or not\r\n   */\r\n  @Input() isDisabled: boolean;\r\n  /**\r\n   * Minimum date which is available for selection\r\n   */\r\n  @Input() minDate: Date;\r\n  /**\r\n   * Maximum date which is available for selection\r\n   */\r\n  @Input() maxDate: Date;\r\n  /**\r\n   * Disable specific dates\r\n   */\r\n  @Input() datesDisabled: Date[];\r\n  /**\r\n   * Emits when datepicker value has been changed\r\n   */\r\n  @Output() bsValueChange: EventEmitter<Date> = new EventEmitter();\r\n\r\n  protected _subs: Subscription[] = [];\r\n\r\n  private _datepicker: ComponentLoader<BsDatepickerInlineContainerComponent>;\r\n  private _datepickerRef: ComponentRef<BsDatepickerInlineContainerComponent>;\r\n\r\n  constructor(public _config: BsDatepickerInlineConfig,\r\n              private _elementRef: ElementRef,\r\n              _renderer: Renderer2,\r\n              _viewContainerRef: ViewContainerRef,\r\n              cis: ComponentLoaderFactory) {\r\n    // todo: assign only subset of fields\r\n    Object.assign(this, this._config);\r\n    this._datepicker = cis.createLoader<BsDatepickerInlineContainerComponent>(\r\n      _elementRef,\r\n      _viewContainerRef,\r\n      _renderer\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.setConfig();\r\n\r\n    this._datepickerRef = this._datepicker\r\n      .provide({provide: BsDatepickerConfig, useValue: this._config})\r\n      .attach(BsDatepickerInlineContainerComponent)\r\n      .to(this._elementRef)\r\n      .show();\r\n\r\n    // if date changes from external source (model -> view)\r\n    this._subs.push(\r\n      this.bsValueChange.subscribe((value: Date) => {\r\n        this._datepickerRef.instance.value = value;\r\n      })\r\n    );\r\n\r\n    // if date changes from picker (view -> model)\r\n    this._subs.push(\r\n      this._datepickerRef.instance.valueChange.subscribe((value: Date) => {\r\n        this.bsValue = value;\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (!this._datepickerRef || !this._datepickerRef.instance) {\r\n      return;\r\n    }\r\n\r\n    if (changes.minDate) {\r\n      this._datepickerRef.instance.minDate = this.minDate;\r\n    }\r\n\r\n    if (changes.maxDate) {\r\n      this._datepickerRef.instance.maxDate = this.maxDate;\r\n    }\r\n\r\n    if (changes.datesDisabled) {\r\n      this._datepickerRef.instance.datesDisabled = this.datesDisabled;\r\n    }\r\n\r\n    if (changes.isDisabled) {\r\n      this._datepickerRef.instance.isDisabled = this.isDisabled;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set config for datepicker\r\n   */\r\n  setConfig(): void {\r\n    this._config = Object.assign({}, this._config, this.bsConfig, {\r\n      value: this._bsValue,\r\n      isDisabled: this.isDisabled,\r\n      minDate: this.minDate || this.bsConfig && this.bsConfig.minDate,\r\n      maxDate: this.maxDate || this.bsConfig && this.bsConfig.maxDate,\r\n      datesDisabled: this.datesDisabled || this.bsConfig && this.bsConfig.datesDisabled\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): any {\r\n    this._datepicker.dispose();\r\n  }\r\n}\r\n","import {\r\n  ChangeDetectorRef,\r\n  Directive,\r\n  ElementRef,\r\n  forwardRef,\r\n  Host,\r\n  Provider,\r\n  Renderer2\r\n} from '@angular/core';\r\n\r\nimport {\r\n  AbstractControl,\r\n  ControlValueAccessor,\r\n  NG_VALIDATORS,\r\n  NG_VALUE_ACCESSOR,\r\n  ValidationErrors,\r\n  Validator\r\n} from '@angular/forms';\r\n\r\nimport {\r\n  parseDate,\r\n  formatDate,\r\n  getLocale,\r\n  isAfter,\r\n  isBefore,\r\n  isDate,\r\n  isDateValid\r\n} from 'ngx-bootstrap/chronos';\r\n\r\nimport { BsDatepickerDirective } from './bs-datepicker.component';\r\nimport { BsLocaleService } from './bs-locale.service';\r\n\r\nconst BS_DATEPICKER_VALUE_ACCESSOR: Provider = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => BsDatepickerInputDirective),\r\n  multi: true\r\n};\r\n\r\nconst BS_DATEPICKER_VALIDATOR: Provider = {\r\n  provide: NG_VALIDATORS,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => BsDatepickerInputDirective),\r\n  multi: true\r\n};\r\n\r\n@Directive({\r\n  selector: `input[bsDatepicker]`,\r\n  host: {\r\n    '(change)': 'onChange($event)',\r\n    '(keyup.esc)': 'hide()',\r\n    '(blur)': 'onBlur()'\r\n  },\r\n  providers: [BS_DATEPICKER_VALUE_ACCESSOR, BS_DATEPICKER_VALIDATOR]\r\n})\r\nexport class BsDatepickerInputDirective\r\n  implements ControlValueAccessor, Validator {\r\n  private _onChange = Function.prototype;\r\n  private _onTouched = Function.prototype;\r\n  /* tslint:disable-next-line: no-unused-variable */\r\n  private _validatorChange = Function.prototype;\r\n  private _value: Date;\r\n\r\n  constructor(@Host() private _picker: BsDatepickerDirective,\r\n              private _localeService: BsLocaleService,\r\n              private _renderer: Renderer2,\r\n              private _elRef: ElementRef,\r\n              private changeDetection: ChangeDetectorRef) {\r\n    // update input value on datepicker value update\r\n    this._picker.bsValueChange.subscribe((value: Date) => {\r\n      this._setInputValue(value);\r\n      if (this._value !== value) {\r\n        this._value = value;\r\n        this._onChange(value);\r\n        this._onTouched();\r\n      }\r\n      this.changeDetection.markForCheck();\r\n    });\r\n\r\n    // update input value on locale change\r\n    this._localeService.localeChange.subscribe(() => {\r\n      this._setInputValue(this._value);\r\n    });\r\n  }\r\n\r\n  _setInputValue(value: Date): void {\r\n    const initialDate = !value ? ''\r\n      : formatDate(value, this._picker._config.dateInputFormat, this._localeService.currentLocale);\r\n\r\n    this._renderer.setProperty(this._elRef.nativeElement, 'value', initialDate);\r\n  }\r\n\r\n  onChange(event: Event) {\r\n    /* tslint:disable-next-line: no-any*/\r\n    this.writeValue((event.target as any).value);\r\n    this._onChange(this._value);\r\n    this._onTouched();\r\n  }\r\n\r\n  validate(c: AbstractControl): ValidationErrors | null {\r\n    const _value: Date | string = c.value;\r\n\r\n    /* tslint:disable-next-line: prefer-switch */\r\n    if (_value === null || _value === undefined || _value === '') {\r\n      return null;\r\n    }\r\n\r\n    if (isDate(_value)) {\r\n      const _isDateValid = isDateValid(_value);\r\n      if (!_isDateValid) {\r\n        return { bsDate: { invalid: _value } };\r\n      }\r\n\r\n      if (this._picker && this._picker.minDate && isBefore(_value, this._picker.minDate, 'date')) {\r\n        return { bsDate: { minDate: this._picker.minDate } };\r\n      }\r\n\r\n      if (this._picker && this._picker.maxDate && isAfter(_value, this._picker.maxDate, 'date')) {\r\n        return { bsDate: { maxDate: this._picker.maxDate } };\r\n      }\r\n    }\r\n  }\r\n\r\n  registerOnValidatorChange(fn: () => void): void {\r\n    this._validatorChange = fn;\r\n  }\r\n\r\n  writeValue(value: Date | string) {\r\n    if (!value) {\r\n      this._value = null;\r\n    } else {\r\n      const _localeKey = this._localeService.currentLocale;\r\n      const _locale = getLocale(_localeKey);\r\n      if (!_locale) {\r\n        throw new Error(\r\n          `Locale \"${_localeKey}\" is not defined, please add it with \"defineLocale(...)\"`\r\n        );\r\n      }\r\n      this._value = parseDate(value, this._picker._config.dateInputFormat, this._localeService.currentLocale);\r\n    }\r\n\r\n    this._picker.bsValue = this._value;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this._picker.isDisabled = isDisabled;\r\n    if (isDisabled) {\r\n      this._renderer.setAttribute(this._elRef.nativeElement, 'disabled', 'disabled');\r\n\r\n      return;\r\n    }\r\n    this._renderer.removeAttribute(this._elRef.nativeElement, 'disabled');\r\n  }\r\n\r\n  registerOnChange(fn: () => void): void {\r\n    this._onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: () => void): void {\r\n    this._onTouched = fn;\r\n  }\r\n\r\n  onBlur() {\r\n    this._onTouched();\r\n  }\r\n\r\n  hide() {\r\n    this._picker.hide();\r\n    this._renderer.selectRootElement(this._elRef.nativeElement).blur();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\n\r\n@Injectable()\r\nexport class BsDaterangepickerConfig extends BsDatepickerConfig {\r\n  // DatepickerRenderOptions\r\n  displayMonths = 2;\r\n}\r\n","import { Component, EventEmitter, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { BsDatepickerAbstractComponent } from '../../base/bs-datepicker-container';\r\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\r\nimport { DayViewModel } from '../../models';\r\nimport { BsDatepickerActions } from '../../reducer/bs-datepicker.actions';\r\nimport { BsDatepickerEffects } from '../../reducer/bs-datepicker.effects';\r\nimport { BsDatepickerStore } from '../../reducer/bs-datepicker.store';\r\nimport { PositioningService } from 'ngx-bootstrap/positioning';\r\n\r\nimport { Subscription } from 'rxjs';\r\n\r\n\r\n@Component({\r\n  selector: 'bs-daterangepicker-container',\r\n  providers: [BsDatepickerStore, BsDatepickerEffects],\r\n  templateUrl: './bs-datepicker-view.html',\r\n  host: {\r\n    '(click)': '_stopPropagation($event)',\r\n    style: 'position: absolute; display: block;',\r\n    role: 'dialog',\r\n    'aria-label': 'calendar'\r\n  }\r\n})\r\nexport class BsDaterangepickerContainerComponent extends BsDatepickerAbstractComponent\r\n  implements OnInit, OnDestroy {\r\n  set value(value: Date[]) {\r\n    this._effects.setRangeValue(value);\r\n  }\r\n\r\n  valueChange = new EventEmitter<Date[]>();\r\n\r\n  _rangeStack: Date[] = [];\r\n  _subs: Subscription[] = [];\r\n  constructor(\r\n    _effects: BsDatepickerEffects,\r\n    private _actions: BsDatepickerActions,\r\n    private _config: BsDatepickerConfig,\r\n    private _store: BsDatepickerStore,\r\n    private _positionService: PositioningService\r\n  ) {\r\n    super();\r\n    this._effects = _effects;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this._positionService.setOptions({\r\n      modifiers: {\r\n        flip: {\r\n          enabled: this._config.adaptivePosition\r\n        }\r\n      }\r\n    });\r\n\r\n    this.containerClass = this._config.containerClass;\r\n    this.isOtherMonthsActive = this._config.selectFromOtherMonth;\r\n    this._effects\r\n      .init(this._store)\r\n      // intial state options\r\n      // todo: fix this, split configs\r\n      .setOptions(this._config)\r\n      // data binding view --> model\r\n      .setBindings(this)\r\n      // set event handlers\r\n      .setEventHandlers(this)\r\n      .registerDatepickerSideEffects();\r\n\r\n    // todo: move it somewhere else\r\n    // on selected date change\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.selectedRange)\r\n        .subscribe(date => this.valueChange.emit(date))\r\n    );\r\n  }\r\n\r\n  daySelectHandler(day: DayViewModel): void {\r\n    const isDisabled = this.isOtherMonthsActive ? day.isDisabled : (day.isOtherMonth || day.isDisabled);\r\n\r\n    if (isDisabled) {\r\n      return;\r\n    }\r\n\r\n    // if only one date is already selected\r\n    // and user clicks on previous date\r\n    // start selection from new date\r\n    // but if new date is after initial one\r\n    // than finish selection\r\n    if (this._rangeStack.length === 1) {\r\n      this._rangeStack =\r\n        day.date >= this._rangeStack[0]\r\n          ? [this._rangeStack[0], day.date]\r\n          : [day.date];\r\n    }\r\n\r\n    if (this._rangeStack.length === 0) {\r\n      this._rangeStack = [day.date];\r\n    }\r\n\r\n    this._store.dispatch(this._actions.selectRange(this._rangeStack));\r\n\r\n    if (this._rangeStack.length === 2) {\r\n      this._rangeStack = [];\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n    this._effects.destroy();\r\n  }\r\n}\r\n","import {\r\n  ComponentRef,\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  ViewContainerRef\r\n} from '@angular/core';\r\nimport { BsDaterangepickerConfig } from './bs-daterangepicker.config';\r\nimport { BsDaterangepickerContainerComponent } from './themes/bs/bs-daterangepicker-container.component';\r\nimport { Subscription } from 'rxjs';\r\nimport { ComponentLoaderFactory, ComponentLoader } from 'ngx-bootstrap/component-loader';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\nimport { filter } from 'rxjs/operators';\r\n\r\n@Directive({\r\n  selector: '[bsDaterangepicker]',\r\n  exportAs: 'bsDaterangepicker'\r\n})\r\nexport class BsDaterangepickerDirective\r\n  implements OnInit, OnDestroy, OnChanges {\r\n  /**\r\n   * Placement of a daterangepicker. Accepts: \"top\", \"bottom\", \"left\", \"right\"\r\n   */\r\n  @Input() placement: 'top' | 'bottom' | 'left' | 'right' = 'bottom';\r\n  /**\r\n   * Specifies events that should trigger. Supports a space separated list of\r\n   * event names.\r\n   */\r\n  @Input() triggers = 'click';\r\n  /**\r\n   * Close daterangepicker on outside click\r\n   */\r\n  @Input() outsideClick = true;\r\n  /**\r\n   * A selector specifying the element the daterangepicker should be appended\r\n   * to. Currently only supports \"body\".\r\n   */\r\n  @Input() container = 'body';\r\n\r\n  @Input() outsideEsc = true;\r\n\r\n  /**\r\n   * Returns whether or not the daterangepicker is currently being shown\r\n   */\r\n  @Input()\r\n  get isOpen(): boolean {\r\n    return this._datepicker.isShown;\r\n  }\r\n\r\n  set isOpen(value: boolean) {\r\n    if (value) {\r\n      this.show();\r\n    } else {\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Emits an event when the daterangepicker is shown\r\n   */\r\n  /* tslint:disable-next-line: no-any*/\r\n  @Output() onShown: EventEmitter<any>;\r\n  /**\r\n   * Emits an event when the daterangepicker is hidden\r\n   */\r\n  /* tslint:disable-next-line: no-any*/\r\n  @Output() onHidden: EventEmitter<any>;\r\n\r\n  _bsValue: Date[];\r\n  /**\r\n   * Initial value of daterangepicker\r\n   */\r\n  @Input()\r\n  set bsValue(value: Date[]) {\r\n    if (this._bsValue === value) {\r\n      return;\r\n    }\r\n    this._bsValue = value;\r\n    this.bsValueChange.emit(value);\r\n  }\r\n\r\n  /**\r\n   * Config object for daterangepicker\r\n   */\r\n  @Input() bsConfig: Partial<BsDaterangepickerConfig>;\r\n  /**\r\n   * Indicates whether daterangepicker's content is enabled or not\r\n   */\r\n  @Input() isDisabled: boolean;\r\n  /**\r\n   * Minimum date which is available for selection\r\n   */\r\n  @Input() minDate: Date;\r\n  /**\r\n   * Maximum date which is available for selection\r\n   */\r\n  @Input() maxDate: Date;\r\n  /**\r\n   * Disable specific dates\r\n   */\r\n  @Input() datesDisabled: Date[];\r\n  /**\r\n   * Emits when daterangepicker value has been changed\r\n   */\r\n  @Output() bsValueChange: EventEmitter<Date[]> = new EventEmitter();\r\n\r\n  protected _subs: Subscription[] = [];\r\n\r\n  private _datepicker: ComponentLoader<BsDaterangepickerContainerComponent>;\r\n  private _datepickerRef: ComponentRef<BsDaterangepickerContainerComponent>;\r\n\r\n  constructor(public _config: BsDaterangepickerConfig,\r\n              _elementRef: ElementRef,\r\n              _renderer: Renderer2,\r\n              _viewContainerRef: ViewContainerRef,\r\n              cis: ComponentLoaderFactory) {\r\n    this._datepicker = cis.createLoader<BsDaterangepickerContainerComponent>(\r\n      _elementRef,\r\n      _viewContainerRef,\r\n      _renderer\r\n    );\r\n    Object.assign(this, _config);\r\n    this.onShown = this._datepicker.onShown;\r\n    this.onHidden = this._datepicker.onHidden;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this._datepicker.listen({\r\n      outsideClick: this.outsideClick,\r\n      outsideEsc: this.outsideEsc,\r\n      triggers: this.triggers,\r\n      show: () => this.show()\r\n    });\r\n    this.setConfig();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (!this._datepickerRef || !this._datepickerRef.instance) {\r\n      return;\r\n    }\r\n\r\n    if (changes.minDate) {\r\n      this._datepickerRef.instance.minDate = this.minDate;\r\n    }\r\n\r\n    if (changes.maxDate) {\r\n      this._datepickerRef.instance.maxDate = this.maxDate;\r\n    }\r\n\r\n    if (changes.datesDisabled) {\r\n      this._datepickerRef.instance.datesDisabled = this.datesDisabled;\r\n    }\r\n\r\n    if (changes.isDisabled) {\r\n      this._datepickerRef.instance.isDisabled = this.isDisabled;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens an elements datepicker. This is considered a manual triggering of\r\n   * the datepicker.\r\n   */\r\n  show(): void {\r\n    if (this._datepicker.isShown) {\r\n      return;\r\n    }\r\n\r\n    this.setConfig();\r\n\r\n    this._datepickerRef = this._datepicker\r\n      .provide({provide: BsDatepickerConfig, useValue: this._config})\r\n      .attach(BsDaterangepickerContainerComponent)\r\n      .to(this.container)\r\n      .position({attachment: this.placement})\r\n      .show({placement: this.placement});\r\n\r\n    // if date changes from external source (model -> view)\r\n    this._subs.push(\r\n      this.bsValueChange.subscribe((value: Date[]) => {\r\n        this._datepickerRef.instance.value = value;\r\n      })\r\n    );\r\n\r\n    // if date changes from picker (view -> model)\r\n    this._subs.push(\r\n      this._datepickerRef.instance.valueChange\r\n        .pipe(\r\n          filter((range: Date[]) => range && range[0] && !!range[1])\r\n        )\r\n        .subscribe((value: Date[]) => {\r\n          this.bsValue = value;\r\n          this.hide();\r\n        })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Set config for daterangepicker\r\n   */\r\n  setConfig() {\r\n    this._config = Object.assign(\r\n      {},\r\n      this._config,\r\n      this.bsConfig,\r\n      {\r\n        value: this._bsValue,\r\n        isDisabled: this.isDisabled,\r\n        minDate: this.minDate || this.bsConfig && this.bsConfig.minDate,\r\n        maxDate: this.maxDate || this.bsConfig && this.bsConfig.maxDate,\r\n        datesDisabled: this.datesDisabled || this.bsConfig && this.bsConfig.datesDisabled\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Closes an elements datepicker. This is considered a manual triggering of\r\n   * the datepicker.\r\n   */\r\n  hide(): void {\r\n    if (this.isOpen) {\r\n      this._datepicker.hide();\r\n    }\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles an elements datepicker. This is considered a manual triggering\r\n   * of the datepicker.\r\n   */\r\n  toggle(): void {\r\n    if (this.isOpen) {\r\n      return this.hide();\r\n    }\r\n\r\n    this.show();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._datepicker.dispose();\r\n  }\r\n}\r\n","import {\r\n  ChangeDetectorRef,\r\n  Directive,\r\n  ElementRef,\r\n  forwardRef,\r\n  Host,\r\n  Provider,\r\n  Renderer2\r\n} from '@angular/core';\r\nimport {\r\n  AbstractControl,\r\n  ControlValueAccessor,\r\n  NG_VALIDATORS,\r\n  NG_VALUE_ACCESSOR,\r\n  ValidationErrors,\r\n  Validator\r\n} from '@angular/forms';\r\nimport { parseDate, formatDate, getLocale, isAfter, isBefore, isArray, isDateValid } from 'ngx-bootstrap/chronos';\r\nimport { BsDaterangepickerDirective } from './bs-daterangepicker.component';\r\nimport { BsLocaleService } from './bs-locale.service';\r\n\r\nconst BS_DATERANGEPICKER_VALUE_ACCESSOR: Provider = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => BsDaterangepickerInputDirective),\r\n  multi: true\r\n};\r\n\r\nconst BS_DATERANGEPICKER_VALIDATOR: Provider = {\r\n  provide: NG_VALIDATORS,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => BsDaterangepickerInputDirective),\r\n  multi: true\r\n};\r\n\r\n\r\n@Directive({\r\n  selector: `input[bsDaterangepicker]`,\r\n  host: {\r\n    '(change)': 'onChange($event)',\r\n    '(keyup.esc)': 'hide()',\r\n    '(blur)': 'onBlur()'\r\n  },\r\n  providers: [BS_DATERANGEPICKER_VALUE_ACCESSOR, BS_DATERANGEPICKER_VALIDATOR]\r\n})\r\nexport class BsDaterangepickerInputDirective\r\n  implements ControlValueAccessor, Validator {\r\n  private _onChange = Function.prototype;\r\n  private _onTouched = Function.prototype;\r\n  /* tslint:disable-next-line: no-unused-variable */\r\n  private _validatorChange = Function.prototype;\r\n  private _value: Date[];\r\n\r\n  constructor(@Host() private _picker: BsDaterangepickerDirective,\r\n              private _localeService: BsLocaleService,\r\n              private _renderer: Renderer2,\r\n              private _elRef: ElementRef,\r\n              private changeDetection: ChangeDetectorRef) {\r\n    // update input value on datepicker value update\r\n    this._picker.bsValueChange.subscribe((value: Date[]) => {\r\n      this._setInputValue(value);\r\n      if (this._value !== value) {\r\n        this._value = value;\r\n        this._onChange(value);\r\n        this._onTouched();\r\n      }\r\n      this.changeDetection.markForCheck();\r\n    });\r\n\r\n    // update input value on locale change\r\n    this._localeService.localeChange.subscribe(() => {\r\n      this._setInputValue(this._value);\r\n    });\r\n  }\r\n\r\n  _setInputValue(date: Date[]): void {\r\n    let range = '';\r\n    if (date) {\r\n      const start: string = !date[0] ? ''\r\n        : formatDate(date[0],\r\n          this._picker._config.rangeInputFormat,\r\n          this._localeService.currentLocale\r\n        );\r\n      const end: string = !date[1] ? ''\r\n        : formatDate(\r\n          date[1],\r\n          this._picker._config.rangeInputFormat,\r\n          this._localeService.currentLocale\r\n        );\r\n      range = (start && end) ? start + this._picker._config.rangeSeparator + end : '';\r\n    }\r\n    this._renderer.setProperty(this._elRef.nativeElement, 'value', range);\r\n  }\r\n\r\n  onChange(event: Event) {\r\n    /* tslint:disable-next-line: no-any*/\r\n    this.writeValue((event.target as any).value);\r\n    this._onChange(this._value);\r\n    this._onTouched();\r\n  }\r\n\r\n  validate(c: AbstractControl): ValidationErrors | null {\r\n    const _value: [Date, Date] = c.value;\r\n\r\n    if (_value === null || _value === undefined || !isArray(_value)) {\r\n      return null;\r\n    }\r\n\r\n    const _isFirstDateValid = isDateValid(_value[0]);\r\n    const _isSecondDateValid = isDateValid(_value[1]);\r\n\r\n    if (!_isFirstDateValid) {\r\n      return { bsDate: { invalid: _value[0] } };\r\n    }\r\n\r\n    if (!_isSecondDateValid) {\r\n      return { bsDate: { invalid: _value[1] } };\r\n    }\r\n\r\n    if (this._picker && this._picker.minDate && isBefore(_value[0], this._picker.minDate, 'date')) {\r\n      return { bsDate: { minDate: this._picker.minDate } };\r\n    }\r\n\r\n    if (this._picker && this._picker.maxDate && isAfter(_value[1], this._picker.maxDate, 'date')) {\r\n      return { bsDate: { maxDate: this._picker.maxDate } };\r\n    }\r\n  }\r\n\r\n  registerOnValidatorChange(fn: () => void): void {\r\n    this._validatorChange = fn;\r\n  }\r\n\r\n  writeValue(value: Date[] | string) {\r\n    if (!value) {\r\n      this._value = null;\r\n    } else {\r\n      const _localeKey = this._localeService.currentLocale;\r\n      const _locale = getLocale(_localeKey);\r\n      if (!_locale) {\r\n        throw new Error(\r\n          `Locale \"${_localeKey}\" is not defined, please add it with \"defineLocale(...)\"`\r\n        );\r\n      }\r\n\r\n      let _input: (string[] | Date[]) = [];\r\n      if (typeof value === 'string') {\r\n        _input = value.split(this._picker._config.rangeSeparator);\r\n      }\r\n\r\n      if (Array.isArray(value)) {\r\n        _input = value;\r\n      }\r\n\r\n\r\n      this._value = (_input as string[])\r\n        .map((_val: string): Date =>\r\n          parseDate(_val, this._picker._config.dateInputFormat, this._localeService.currentLocale))\r\n        .map((date: Date) => (isNaN(date.valueOf()) ? null : date));\r\n    }\r\n\r\n    this._picker.bsValue = this._value;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this._picker.isDisabled = isDisabled;\r\n    if (isDisabled) {\r\n      this._renderer.setAttribute(this._elRef.nativeElement, 'disabled', 'disabled');\r\n\r\n      return;\r\n    }\r\n    this._renderer.removeAttribute(this._elRef.nativeElement, 'disabled');\r\n  }\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  registerOnChange(fn: () => void): void {\r\n    this._onChange = fn;\r\n  }\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  registerOnTouched(fn: () => void): void {\r\n    this._onTouched = fn;\r\n  }\r\n\r\n  onBlur() {\r\n    this._onTouched();\r\n  }\r\n\r\n  hide() {\r\n    this._picker.hide();\r\n    this._renderer.selectRootElement(this._elRef.nativeElement).blur();\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bs-calendar-layout',\r\n  template: `\r\n    <!-- current date, will be added in nearest releases -->\r\n    <bs-current-date title=\"hey there\" *ngIf=\"false\"></bs-current-date>\r\n\r\n    <!--navigation-->\r\n    <div class=\"bs-datepicker-head\">\r\n      <ng-content select=\"bs-datepicker-navigation-view\"></ng-content>\r\n    </div>\r\n\r\n    <div class=\"bs-datepicker-body\">\r\n      <ng-content></ng-content>\r\n    </div>\r\n\r\n    <!--timepicker-->\r\n    <bs-timepicker *ngIf=\"false\"></bs-timepicker>\r\n  `\r\n})\r\nexport class BsCalendarLayoutComponent {}\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bs-current-date',\r\n  template: `<div class=\"current-timedate\"><span>{{ title }}</span></div>`\r\n})\r\nexport class BsCurrentDateViewComponent {\r\n  @Input() title: string;\r\n}\r\n","import { Component, ChangeDetectionStrategy, Input } from '@angular/core';\r\n\r\nexport interface BsCustomDates {\r\n  label: string;\r\n  value: Date | Date[];\r\n}\r\n\r\n@Component({\r\n  selector: 'bs-custom-date-view',\r\n  template: `\r\n    <div class=\"bs-datepicker-predefined-btns\">\r\n      <button *ngFor=\"let range of ranges\">{{ range.label }}</button>\r\n      <button *ngIf=\"isCustomRangeShown\">Custom Range</button>\r\n    </div>\r\n  `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class BsCustomDatesViewComponent {\r\n  @Input() isCustomRangeShown: true;\r\n  @Input() ranges: BsCustomDates[];\r\n}\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  ElementRef,\r\n  Input,\r\n  OnInit,\r\n  Renderer2\r\n} from '@angular/core';\r\n\r\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\r\nimport { DayViewModel } from '../../models';\r\n\r\n@Component({\r\n  selector: '[bsDatepickerDayDecorator]',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  host: {\r\n    '[class.disabled]': 'day.isDisabled',\r\n    '[class.is-highlighted]': 'day.isHovered',\r\n    '[class.is-other-month]': 'day.isOtherMonth',\r\n    '[class.is-active-other-month]': 'day.isOtherMonthHovered',\r\n    '[class.in-range]': 'day.isInRange',\r\n    '[class.select-start]': 'day.isSelectionStart',\r\n    '[class.select-end]': 'day.isSelectionEnd',\r\n    '[class.selected]': 'day.isSelected'\r\n  },\r\n  template: `{{ day.label }}`\r\n})\r\nexport class BsDatepickerDayDecoratorComponent implements OnInit {\r\n  @Input() day: DayViewModel;\r\n\r\n  constructor(\r\n    private _config: BsDatepickerConfig,\r\n    private _elRef: ElementRef,\r\n    private _renderer: Renderer2\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.day.isToday && this._config && this._config.customTodayClass) {\r\n      this._renderer.addClass(this._elRef.nativeElement, this._config.customTodayClass);\r\n    }\r\n  }\r\n}\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  Output\r\n} from '@angular/core';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationDirection,\r\n  DaysCalendarViewModel\r\n} from '../../models';\r\n\r\n@Component({\r\n  selector: 'bs-datepicker-navigation-view',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <button class=\"previous\"\r\n            [disabled]=\"calendar.disableLeftArrow\"\r\n            [style.visibility]=\"calendar.hideLeftArrow ? 'hidden' : 'visible'\"\r\n            (click)=\"navTo(true)\"><span>&lsaquo;</span>\r\n    </button>\r\n\r\n    &#8203;  <!-- zero-width space needed for correct alignement\r\n                  with preserveWhitespaces: false in Angular -->\r\n\r\n    <button class=\"current\"\r\n            *ngIf=\"calendar.monthTitle\"\r\n            (click)=\"view('month')\"\r\n    ><span>{{ calendar.monthTitle }}</span>\r\n    </button>\r\n\r\n    &#8203;  <!-- zero-width space needed for correct alignement\r\n                  with preserveWhitespaces: false in Angular -->\r\n\r\n    <button class=\"current\" (click)=\"view('year')\"\r\n    ><span>{{ calendar.yearTitle }}</span></button>\r\n\r\n    &#8203;  <!-- zero-width space needed for correct alignement\r\n                  with preserveWhitespaces: false in Angular -->\r\n\r\n    <button class=\"next\"\r\n            [disabled]=\"calendar.disableRightArrow\"\r\n            [style.visibility]=\"calendar.hideRightArrow ? 'hidden' : 'visible'\"\r\n            (click)=\"navTo(false)\"><span>&rsaquo;</span>\r\n    </button>\r\n  `\r\n})\r\nexport class BsDatepickerNavigationViewComponent {\r\n  @Input() calendar: DaysCalendarViewModel;\r\n\r\n  @Output() onNavigate = new EventEmitter<BsNavigationDirection>();\r\n  @Output() onViewMode = new EventEmitter<BsDatepickerViewMode>();\r\n\r\n  navTo(down: boolean): void {\r\n    this.onNavigate.emit(\r\n      down ? BsNavigationDirection.DOWN : BsNavigationDirection.UP\r\n    );\r\n  }\r\n\r\n  view(viewMode: BsDatepickerViewMode): void {\r\n    this.onViewMode.emit(viewMode);\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  Output\r\n} from '@angular/core';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationDirection,\r\n  BsNavigationEvent,\r\n  CellHoverEvent,\r\n  DatepickerRenderOptions,\r\n  DaysCalendarViewModel,\r\n  DayViewModel, WeekViewModel\r\n} from '../../models';\r\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\r\n\r\n@Component({\r\n  selector: 'bs-days-calendar-view',\r\n  // changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <bs-calendar-layout>\r\n      <bs-datepicker-navigation-view\r\n        [calendar]=\"calendar\"\r\n        (onNavigate)=\"navigateTo($event)\"\r\n        (onViewMode)=\"changeViewMode($event)\"\r\n      ></bs-datepicker-navigation-view>\r\n\r\n      <!--days matrix-->\r\n      <table role=\"grid\" class=\"days weeks\">\r\n        <thead>\r\n        <tr>\r\n          <!--if show weeks-->\r\n          <th *ngIf=\"options.showWeekNumbers\"></th>\r\n          <th *ngFor=\"let weekday of calendar.weekdays; let i = index\"\r\n              aria-label=\"weekday\">{{ calendar.weekdays[i] }}\r\n          </th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr *ngFor=\"let week of calendar.weeks; let i = index\">\r\n          <td class=\"week\" [class.active-week]=\"isWeekHovered\"  *ngIf=\"options.showWeekNumbers\">\r\n            <span\r\n                (click)=\"selectWeek(week)\"\r\n                (mouseenter)=\"weekHoverHandler(week, true)\"\r\n                (mouseleave)=\"weekHoverHandler(week, false)\">{{ calendar.weekNumbers[i] }}</span>\r\n          </td>\r\n          <td *ngFor=\"let day of week.days\" role=\"gridcell\">\r\n          <span bsDatepickerDayDecorator\r\n                [day]=\"day\"\r\n                (click)=\"selectDay(day)\"\r\n                (mouseenter)=\"hoverDay(day, true)\"\r\n                (mouseleave)=\"hoverDay(day, false)\">{{ day.label }}</span>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n    </bs-calendar-layout>\r\n  `\r\n})\r\nexport class BsDaysCalendarViewComponent  {\r\n  @Input() calendar: DaysCalendarViewModel;\r\n  @Input() options: DatepickerRenderOptions;\r\n\r\n  @Output() onNavigate = new EventEmitter<BsNavigationEvent>();\r\n  @Output() onViewMode = new EventEmitter<BsDatepickerViewMode>();\r\n\r\n  @Output() onSelect = new EventEmitter<DayViewModel>();\r\n  @Output() onHover = new EventEmitter<CellHoverEvent>();\r\n  @Output() onHoverWeek = new EventEmitter<WeekViewModel>();\r\n\r\n  isWeekHovered: boolean;\r\n\r\n  constructor(private _config: BsDatepickerConfig) { }\r\n\r\n  navigateTo(event: BsNavigationDirection): void {\r\n    const step = BsNavigationDirection.DOWN === event ? -1 : 1;\r\n    this.onNavigate.emit({ step: { month: step } });\r\n  }\r\n\r\n  changeViewMode(event: BsDatepickerViewMode): void {\r\n    this.onViewMode.emit(event);\r\n  }\r\n\r\n  selectDay(event: DayViewModel): void {\r\n    this.onSelect.emit(event);\r\n  }\r\n\r\n  selectWeek(week: WeekViewModel): void {\r\n    if (!this._config.selectWeek) {\r\n      return;\r\n    }\r\n\r\n    if (week.days\r\n      && week.days[0]\r\n      && !week.days[0].isDisabled\r\n      && this._config.selectFromOtherMonth) {\r\n\r\n      this.onSelect.emit(week.days[0]);\r\n\r\n      return;\r\n    }\r\n\r\n    if (week.days.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const selectedDay = week.days.find((day: DayViewModel) => {\r\n      return this._config.selectFromOtherMonth\r\n        ? !day.isDisabled\r\n        : !day.isOtherMonth && !day.isDisabled;\r\n    });\r\n\r\n    this.onSelect.emit(selectedDay);\r\n  }\r\n\r\n  weekHoverHandler(cell: WeekViewModel, isHovered: boolean): void {\r\n    if (!this._config.selectWeek) {\r\n      return;\r\n    }\r\n\r\n    const hasActiveDays = cell.days.find((day: DayViewModel) => {\r\n      return this._config.selectFromOtherMonth\r\n        ? !day.isDisabled\r\n        : !day.isOtherMonth && !day.isDisabled;\r\n    });\r\n\r\n    if (hasActiveDays) {\r\n      cell.isHovered = isHovered;\r\n      this.isWeekHovered = isHovered;\r\n      this.onHoverWeek.emit(cell);\r\n    }\r\n  }\r\n\r\n  hoverDay(cell: DayViewModel, isHovered: boolean): void {\r\n    if (this._config.selectFromOtherMonth && cell.isOtherMonth) {\r\n      cell.isOtherMonthHovered = isHovered;\r\n    }\r\n\r\n    this.onHover.emit({ cell, isHovered });\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationDirection,\r\n  BsNavigationEvent,\r\n  CellHoverEvent,\r\n  MonthsCalendarViewModel,\r\n  CalendarCellViewModel\r\n} from '../../models';\r\n\r\n@Component({\r\n  selector: 'bs-month-calendar-view',\r\n  template: `\r\n    <bs-calendar-layout>\r\n      <bs-datepicker-navigation-view\r\n        [calendar]=\"calendar\"\r\n        (onNavigate)=\"navigateTo($event)\"\r\n        (onViewMode)=\"changeViewMode($event)\"\r\n      ></bs-datepicker-navigation-view>\r\n\r\n      <table role=\"grid\" class=\"months\">\r\n        <tbody>\r\n        <tr *ngFor=\"let row of calendar.months\">\r\n          <td *ngFor=\"let month of row\" role=\"gridcell\"\r\n              (click)=\"viewMonth(month)\"\r\n              (mouseenter)=\"hoverMonth(month, true)\"\r\n              (mouseleave)=\"hoverMonth(month, false)\"\r\n              [class.disabled]=\"month.isDisabled\"\r\n              [class.is-highlighted]=\"month.isHovered\">\r\n            <span>{{ month.label }}</span>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </bs-calendar-layout>\r\n  `\r\n})\r\nexport class BsMonthCalendarViewComponent {\r\n  @Input() calendar: MonthsCalendarViewModel;\r\n\r\n  @Output() onNavigate = new EventEmitter<BsNavigationEvent>();\r\n  @Output() onViewMode = new EventEmitter<BsDatepickerViewMode>();\r\n\r\n  @Output() onSelect = new EventEmitter<CalendarCellViewModel>();\r\n  @Output() onHover = new EventEmitter<CellHoverEvent>();\r\n\r\n  navigateTo(event: BsNavigationDirection): void {\r\n    const step = BsNavigationDirection.DOWN === event ? -1 : 1;\r\n    this.onNavigate.emit({ step: { year: step } });\r\n  }\r\n\r\n  viewMonth(month: CalendarCellViewModel) {\r\n    this.onSelect.emit(month);\r\n  }\r\n\r\n  hoverMonth(cell: CalendarCellViewModel, isHovered: boolean) {\r\n    this.onHover.emit({ cell, isHovered });\r\n  }\r\n\r\n  changeViewMode(event: BsDatepickerViewMode): void {\r\n    this.onViewMode.emit(event);\r\n  }\r\n}\r\n","// tslint:disable:max-line-length\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bs-timepicker',\r\n  template: `\r\n    <div class=\"bs-timepicker-container\">\r\n      <div class=\"bs-timepicker-controls\">\r\n        <button class=\"bs-decrease\">-</button>\r\n        <input type=\"text\" [value]=\"hours\" placeholder=\"00\">\r\n        <button class=\"bs-increase\">+</button>\r\n      </div>\r\n      <div class=\"bs-timepicker-controls\">\r\n        <button class=\"bs-decrease\">-</button>\r\n        <input type=\"text\" [value]=\"minutes\" placeholder=\"00\">\r\n        <button class=\"bs-increase\">+</button>\r\n      </div>\r\n      <button class=\"switch-time-format\">{{ ampm }}\r\n        <img\r\n          src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAABSElEQVQYV3XQPUvDUBQG4HNuagtVqc6KgouCv6GIuIntYBLB9hcIQpLStCAIV7DYmpTcRWcXqZio3Vwc/UCc/QEqfgyKGbr0I7nS1EiHeqYzPO/h5SD0jaxUZjmSLCB+OFb+UFINFwASAEAdpu9gaGXVyAHHFQBkHpKHc6a9dzECvADyY9sqlAMsK9W0jzxDXqeytr3mhQckxSji27TJJ5/rPmIpwJJq3HrtduriYOurv1a4i1p5HnhkG9OFymi0ReoO05cGwb+ayv4dysVygjeFmsP05f8wpZQ8fsdvfmuY9zjWSNqUtgYFVnOVReILYoBFzdQI5/GGFzNHhGbeZnopDGU29sZbscgldmC99w35VOATTycIMMcBXIfpSVGzZhA6C8hh00conln6VQ9TGgV32OEAKQC4DrBq7CJwd0ggR7Vq/rPrfgB+C3sGypY5DAAAAABJRU5ErkJggg==\"\r\n          alt=\"\">\r\n      </button>\r\n    </div>\r\n  `\r\n})\r\nexport class BsTimepickerViewComponent {\r\n  ampm = 'ok';\r\n  hours = 0;\r\n  minutes = 0;\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { yearsPerCalendar } from '../../engine/format-years-calendar';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationDirection,\r\n  BsNavigationEvent,\r\n  CalendarCellViewModel,\r\n  CellHoverEvent,\r\n  YearsCalendarViewModel\r\n} from '../../models';\r\n\r\n@Component({\r\n  selector: 'bs-years-calendar-view',\r\n  template: `\r\n    <bs-calendar-layout>\r\n      <bs-datepicker-navigation-view\r\n        [calendar]=\"calendar\"\r\n        (onNavigate)=\"navigateTo($event)\"\r\n        (onViewMode)=\"changeViewMode($event)\"\r\n      ></bs-datepicker-navigation-view>\r\n\r\n      <table role=\"grid\" class=\"years\">\r\n        <tbody>\r\n        <tr *ngFor=\"let row of calendar.years\">\r\n          <td *ngFor=\"let year of row\" role=\"gridcell\"\r\n              (click)=\"viewYear(year)\"\r\n              (mouseenter)=\"hoverYear(year, true)\"\r\n              (mouseleave)=\"hoverYear(year, false)\"\r\n              [class.disabled]=\"year.isDisabled\"\r\n              [class.is-highlighted]=\"year.isHovered\">\r\n            <span>{{ year.label }}</span>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </bs-calendar-layout>\r\n  `\r\n})\r\nexport class BsYearsCalendarViewComponent {\r\n  @Input() calendar: YearsCalendarViewModel;\r\n\r\n  @Output() onNavigate = new EventEmitter<BsNavigationEvent>();\r\n  @Output() onViewMode = new EventEmitter<BsDatepickerViewMode>();\r\n\r\n  @Output() onSelect = new EventEmitter<CalendarCellViewModel>();\r\n  @Output() onHover = new EventEmitter<CellHoverEvent>();\r\n\r\n  navigateTo(event: BsNavigationDirection): void {\r\n    const step = BsNavigationDirection.DOWN === event ? -1 : 1;\r\n    this.onNavigate.emit({ step: { year: step * yearsPerCalendar } });\r\n  }\r\n\r\n  viewYear(year: CalendarCellViewModel) {\r\n    this.onSelect.emit(year);\r\n  }\r\n\r\n  hoverYear(cell: CalendarCellViewModel, isHovered: boolean) {\r\n    this.onHover.emit({ cell, isHovered });\r\n  }\r\n\r\n  changeViewMode(event: BsDatepickerViewMode): void {\r\n    this.onViewMode.emit(event);\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\r\nimport { PositioningService } from 'ngx-bootstrap/positioning';\r\n\r\nimport { BsDatepickerInputDirective } from './bs-datepicker-input.directive';\r\nimport { BsDatepickerDirective } from './bs-datepicker.component';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\nimport { BsDaterangepickerInputDirective } from './bs-daterangepicker-input.directive';\r\nimport { BsDaterangepickerDirective } from './bs-daterangepicker.component';\r\nimport { BsDaterangepickerConfig } from './bs-daterangepicker.config';\r\nimport { BsDatepickerInlineDirective } from './bs-datepicker-inline.component';\r\nimport { BsDatepickerInlineConfig } from './bs-datepicker-inline.config';\r\n\r\nimport { BsLocaleService } from './bs-locale.service';\r\nimport { BsDatepickerActions } from './reducer/bs-datepicker.actions';\r\nimport { BsDatepickerEffects } from './reducer/bs-datepicker.effects';\r\nimport { BsDatepickerStore } from './reducer/bs-datepicker.store';\r\nimport { BsCalendarLayoutComponent } from './themes/bs/bs-calendar-layout.component';\r\nimport { BsCurrentDateViewComponent } from './themes/bs/bs-current-date-view.component';\r\nimport { BsCustomDatesViewComponent } from './themes/bs/bs-custom-dates-view.component';\r\nimport { BsDatepickerContainerComponent } from './themes/bs/bs-datepicker-container.component';\r\nimport { BsDatepickerDayDecoratorComponent } from './themes/bs/bs-datepicker-day-decorator.directive';\r\nimport { BsDatepickerNavigationViewComponent } from './themes/bs/bs-datepicker-navigation-view.component';\r\nimport { BsDaterangepickerContainerComponent } from './themes/bs/bs-daterangepicker-container.component';\r\nimport { BsDaysCalendarViewComponent } from './themes/bs/bs-days-calendar-view.component';\r\nimport { BsMonthCalendarViewComponent } from './themes/bs/bs-months-calendar-view.component';\r\nimport { BsTimepickerViewComponent } from './themes/bs/bs-timepicker-view.component';\r\nimport { BsYearsCalendarViewComponent } from './themes/bs/bs-years-calendar-view.component';\r\nimport { BsDatepickerInlineContainerComponent } from './themes/bs/bs-datepicker-inline-container.component';\r\n\r\nconst _exports = [\r\n  BsDatepickerContainerComponent,\r\n  BsDaterangepickerContainerComponent,\r\n  BsDatepickerInlineContainerComponent,\r\n\r\n  BsDatepickerDirective,\r\n  BsDatepickerInputDirective,\r\n\r\n  BsDaterangepickerInputDirective,\r\n  BsDaterangepickerDirective,\r\n\r\n  BsDatepickerInlineDirective\r\n];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [\r\n    BsDatepickerDayDecoratorComponent,\r\n    BsCurrentDateViewComponent,\r\n    BsDatepickerNavigationViewComponent,\r\n    BsTimepickerViewComponent,\r\n\r\n    BsCalendarLayoutComponent,\r\n    BsDaysCalendarViewComponent,\r\n    BsMonthCalendarViewComponent,\r\n    BsYearsCalendarViewComponent,\r\n\r\n    BsCustomDatesViewComponent,\r\n\r\n    ..._exports\r\n  ],\r\n  entryComponents: [\r\n    BsDatepickerContainerComponent,\r\n    BsDaterangepickerContainerComponent,\r\n    BsDatepickerInlineContainerComponent\r\n  ],\r\n  exports: _exports\r\n})\r\nexport class BsDatepickerModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: BsDatepickerModule,\r\n      providers: [\r\n        ComponentLoaderFactory,\r\n        PositioningService,\r\n        BsDatepickerStore,\r\n        BsDatepickerActions,\r\n        BsDatepickerConfig,\r\n        BsDaterangepickerConfig,\r\n        BsDatepickerInlineConfig,\r\n        BsDatepickerEffects,\r\n        BsLocaleService\r\n      ]\r\n    };\r\n  }\r\n}\r\n","import { formatDate } from 'ngx-bootstrap/chronos';\r\n\r\nexport class DateFormatter {\r\n  format(date: Date, format: string, locale: string): string {\r\n    return formatDate(date, format, locale);\r\n  }\r\n}\r\n","/* tslint:disable: max-file-line-count */\r\nimport {\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges\r\n} from '@angular/core';\r\n\r\nimport { DateFormatter } from './date-formatter';\r\n\r\n\r\n@Component({\r\n  selector: 'datepicker-inner',\r\n  template: `\r\n    <!--&lt;!&ndash;ng-keydown=\"keydown($event)\"&ndash;&gt;-->\r\n    <div *ngIf=\"datepickerMode\" class=\"well well-sm bg-faded p-a card\" role=\"application\" >\r\n      <ng-content></ng-content>\r\n    </div>\r\n  `\r\n})\r\nexport class DatePickerInnerComponent implements OnInit, OnChanges {\r\n  @Input() locale: string;\r\n  @Input() datepickerMode: string;\r\n  @Input() startingDay: number;\r\n  @Input() yearRange: number;\r\n\r\n  @Input() minDate: Date;\r\n  @Input() maxDate: Date;\r\n  @Input() minMode: string;\r\n  @Input() maxMode: string;\r\n  @Input() showWeeks: boolean;\r\n  @Input() formatDay: string;\r\n  @Input() formatMonth: string;\r\n  @Input() formatYear: string;\r\n  @Input() formatDayHeader: string;\r\n  @Input() formatDayTitle: string;\r\n  @Input() formatMonthTitle: string;\r\n  @Input() onlyCurrentMonth: boolean;\r\n  @Input() shortcutPropagation: boolean;\r\n  @Input() customClass: { date: Date; mode: string; clazz: string }[];\r\n  @Input() monthColLimit: number;\r\n  @Input() yearColLimit: number;\r\n  @Input() dateDisabled: { date: Date; mode: string }[];\r\n  @Input() dayDisabled: number[];\r\n  @Input() initDate: Date;\r\n\r\n  @Output() selectionDone: EventEmitter<Date> = new EventEmitter<Date>(undefined);\r\n  @Output() update: EventEmitter<Date> = new EventEmitter<Date>(false);\r\n  @Output() activeDateChange: EventEmitter<Date> = new EventEmitter<Date>(undefined);\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  stepDay: any = {};\r\n  /* tslint:disable-next-line: no-any*/\r\n  stepMonth: any = {};\r\n  /* tslint:disable-next-line: no-any*/\r\n  stepYear: any = {};\r\n\r\n  uniqueId: string;\r\n\r\n  protected modes: string[] = ['day', 'month', 'year'];\r\n  protected dateFormatter: DateFormatter = new DateFormatter();\r\n  protected _activeDate: Date;\r\n  protected selectedDate: Date;\r\n  protected activeDateId: string;\r\n\r\n  protected refreshViewHandlerDay: Function;\r\n  protected compareHandlerDay: Function;\r\n  protected refreshViewHandlerMonth: Function;\r\n  protected compareHandlerMonth: Function;\r\n  protected refreshViewHandlerYear: Function;\r\n  protected compareHandlerYear: Function;\r\n\r\n  @Input()\r\n  get activeDate(): Date {\r\n    return this._activeDate;\r\n  }\r\n\r\n  set activeDate(value: Date) {\r\n    this._activeDate = value;\r\n  }\r\n\r\n  // todo: add formatter value to Date object\r\n  ngOnInit(): void {\r\n    // todo: use date for unique value\r\n    this.uniqueId =  `datepicker--${Math.floor(Math.random() * 10000)}`;\r\n\r\n    if (this.initDate) {\r\n      this.activeDate = this.initDate;\r\n      this.selectedDate = new Date(this.activeDate.valueOf());\r\n      this.update.emit(this.activeDate);\r\n    } else if (this.activeDate === undefined) {\r\n      this.activeDate = new Date();\r\n    }\r\n  }\r\n\r\n  // this.refreshView should be called here to reflect the changes on the fly\r\n  // tslint:disable-next-line:no-unused-variable\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.refreshView();\r\n    this.checkIfActiveDateGotUpdated(changes.activeDate);\r\n  }\r\n\r\n  // Check if activeDate has been update and then emit the activeDateChange with the new date\r\n  /* tslint:disable-next-line: no-any */\r\n  checkIfActiveDateGotUpdated(activeDate: any): void {\r\n    if (activeDate && !activeDate.firstChange) {\r\n      const previousValue = activeDate.previousValue;\r\n      if (\r\n        previousValue &&\r\n        previousValue instanceof Date &&\r\n        previousValue.getTime() !== activeDate.currentValue.getTime()\r\n      ) {\r\n        this.activeDateChange.emit(this.activeDate);\r\n      }\r\n    }\r\n  }\r\n\r\n  setCompareHandler(handler: Function, type: string): void {\r\n    if (type === 'day') {\r\n      this.compareHandlerDay = handler;\r\n    }\r\n\r\n    if (type === 'month') {\r\n      this.compareHandlerMonth = handler;\r\n    }\r\n\r\n    if (type === 'year') {\r\n      this.compareHandlerYear = handler;\r\n    }\r\n  }\r\n\r\n  compare(date1: Date, date2: Date): number | undefined {\r\n    if (date1 === undefined || date2 === undefined) {\r\n      return undefined;\r\n    }\r\n\r\n    if (this.datepickerMode === 'day' && this.compareHandlerDay) {\r\n      return this.compareHandlerDay(date1, date2);\r\n    }\r\n\r\n    if (this.datepickerMode === 'month' && this.compareHandlerMonth) {\r\n      return this.compareHandlerMonth(date1, date2);\r\n    }\r\n\r\n    if (this.datepickerMode === 'year' && this.compareHandlerYear) {\r\n      return this.compareHandlerYear(date1, date2);\r\n    }\r\n\r\n    return void 0;\r\n  }\r\n\r\n  setRefreshViewHandler(handler: Function, type: string): void {\r\n    if (type === 'day') {\r\n      this.refreshViewHandlerDay = handler;\r\n    }\r\n\r\n    if (type === 'month') {\r\n      this.refreshViewHandlerMonth = handler;\r\n    }\r\n\r\n    if (type === 'year') {\r\n      this.refreshViewHandlerYear = handler;\r\n    }\r\n  }\r\n\r\n  refreshView(): void {\r\n    if (this.datepickerMode === 'day' && this.refreshViewHandlerDay) {\r\n      this.refreshViewHandlerDay();\r\n    }\r\n\r\n    if (this.datepickerMode === 'month' && this.refreshViewHandlerMonth) {\r\n      this.refreshViewHandlerMonth();\r\n    }\r\n\r\n    if (this.datepickerMode === 'year' && this.refreshViewHandlerYear) {\r\n      this.refreshViewHandlerYear();\r\n    }\r\n  }\r\n\r\n  dateFilter(date: Date, format: string): string {\r\n    return this.dateFormatter.format(date, format, this.locale);\r\n  }\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  isActive(dateObject: any): boolean {\r\n    if (this.compare(dateObject.date, this.activeDate) === 0) {\r\n      this.activeDateId = dateObject.uid;\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  createDateObject(date: Date, format: string): any {\r\n    /* tslint:disable-next-line: no-any*/\r\n    const dateObject: any = {};\r\n    dateObject.date = new Date(\r\n      date.getFullYear(),\r\n      date.getMonth(),\r\n      date.getDate()\r\n    );\r\n    dateObject.date = this.fixTimeZone(dateObject.date);\r\n    dateObject.label = this.dateFilter(date, format);\r\n    dateObject.selected = this.compare(date, this.selectedDate) === 0;\r\n    dateObject.disabled = this.isDisabled(date);\r\n    dateObject.current = this.compare(date, new Date()) === 0;\r\n    dateObject.customClass = this.getCustomClassForDate(dateObject.date);\r\n\r\n    return dateObject;\r\n  }\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  split(arr: any[], size: number): any[] {\r\n    /* tslint:disable-next-line: no-any*/\r\n    const arrays: any[] = [];\r\n    while (arr.length > 0) {\r\n      arrays.push(arr.splice(0, size));\r\n    }\r\n\r\n    return arrays;\r\n  }\r\n\r\n  // Fix a hard-reproducible bug with timezones\r\n  // The bug depends on OS, browser, current timezone and current date\r\n  // i.e.\r\n  // var date = new Date(2014, 0, 1);\r\n  // console.log(date.getFullYear(), date.getMonth(), date.getDate(),\r\n  // date.getHours()); can result in \"2013 11 31 23\" because of the bug.\r\n  fixTimeZone(date: Date): Date {\r\n    const hours = date.getHours();\r\n\r\n    return new Date(\r\n      date.getFullYear(),\r\n      date.getMonth(),\r\n      date.getDate(),\r\n      hours === 23 ? hours + 2 : 0\r\n    );\r\n  }\r\n\r\n  select(date: Date, isManual = true): void {\r\n    if (this.datepickerMode === this.minMode) {\r\n      if (!this.activeDate) {\r\n        this.activeDate = new Date(0, 0, 0, 0, 0, 0, 0);\r\n      }\r\n\r\n      this.activeDate = new Date(\r\n        date.getFullYear(),\r\n        date.getMonth(),\r\n        date.getDate()\r\n      );\r\n      this.activeDate = this.fixTimeZone(this.activeDate);\r\n      if (isManual) {\r\n        this.selectionDone.emit(this.activeDate);\r\n      }\r\n    } else {\r\n      this.activeDate = new Date(\r\n        date.getFullYear(),\r\n        date.getMonth(),\r\n        date.getDate()\r\n      );\r\n      this.activeDate = this.fixTimeZone(this.activeDate);\r\n      if (isManual) {\r\n        this.datepickerMode = this.modes[\r\n          this.modes.indexOf(this.datepickerMode) - 1\r\n        ];\r\n      }\r\n    }\r\n\r\n    this.selectedDate = new Date(this.activeDate.valueOf());\r\n    this.update.emit(this.activeDate);\r\n    this.refreshView();\r\n  }\r\n\r\n  move(direction: number): void {\r\n    /* tslint:disable-next-line: no-any*/\r\n    let expectedStep: any;\r\n    if (this.datepickerMode === 'day') {\r\n      expectedStep = this.stepDay;\r\n    }\r\n\r\n    if (this.datepickerMode === 'month') {\r\n      expectedStep = this.stepMonth;\r\n    }\r\n\r\n    if (this.datepickerMode === 'year') {\r\n      expectedStep = this.stepYear;\r\n    }\r\n\r\n    if (expectedStep) {\r\n      const year =\r\n        this.activeDate.getFullYear() + direction * (expectedStep.years || 0);\r\n      const month =\r\n        this.activeDate.getMonth() + direction * (expectedStep.months || 0);\r\n      this.activeDate = new Date(year, month, 1);\r\n\r\n      this.refreshView();\r\n      this.activeDateChange.emit(this.activeDate);\r\n    }\r\n  }\r\n\r\n  toggleMode(_direction: number): void {\r\n    const direction = _direction || 1;\r\n\r\n    if (\r\n      (this.datepickerMode === this.maxMode && direction === 1) ||\r\n      (this.datepickerMode === this.minMode && direction === -1)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.datepickerMode = this.modes[\r\n      this.modes.indexOf(this.datepickerMode) + direction\r\n    ];\r\n    this.refreshView();\r\n  }\r\n\r\n  protected getCustomClassForDate(date: Date): string {\r\n    if (!this.customClass) {\r\n      return '';\r\n    }\r\n    // todo: build a hash of custom classes, it will work faster\r\n    const customClassObject: {\r\n      date: Date;\r\n      mode: string;\r\n      clazz: string;\r\n    /* tslint:disable-next-line: no-any */\r\n    } = this.customClass.find((customClass: any) => {\r\n      return (\r\n        customClass.date.valueOf() === date.valueOf() &&\r\n        customClass.mode === this.datepickerMode\r\n      );\r\n    }, this);\r\n\r\n    return customClassObject === undefined ? '' : customClassObject.clazz;\r\n  }\r\n\r\n  protected compareDateDisabled(\r\n    date1Disabled: { date: Date; mode: string },\r\n    date2: Date\r\n  ): number {\r\n    if (date1Disabled === undefined || date2 === undefined) {\r\n      return undefined;\r\n    }\r\n\r\n    if (date1Disabled.mode === 'day' && this.compareHandlerDay) {\r\n      return this.compareHandlerDay(date1Disabled.date, date2);\r\n    }\r\n\r\n    if (date1Disabled.mode === 'month' && this.compareHandlerMonth) {\r\n      return this.compareHandlerMonth(date1Disabled.date, date2);\r\n    }\r\n\r\n    if (date1Disabled.mode === 'year' && this.compareHandlerYear) {\r\n      return this.compareHandlerYear(date1Disabled.date, date2);\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  protected isDisabled(date: Date): boolean {\r\n    let isDateDisabled = false;\r\n    if (this.dateDisabled) {\r\n      this.dateDisabled.forEach(\r\n        (disabledDate: { date: Date; mode: string }) => {\r\n          if (this.compareDateDisabled(disabledDate, date) === 0) {\r\n            isDateDisabled = true;\r\n          }\r\n        }\r\n      );\r\n    }\r\n\r\n    if (this.dayDisabled) {\r\n      isDateDisabled =\r\n        isDateDisabled ||\r\n        this.dayDisabled.indexOf(date.getDay()) > -1;\r\n    }\r\n\r\n    return (\r\n      isDateDisabled ||\r\n      (this.minDate && this.compare(date, this.minDate) < 0) ||\r\n      (this.maxDate && this.compare(date, this.maxDate) > 0)\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class DatepickerConfig {\r\n  locale = 'en';\r\n  datepickerMode = 'day';\r\n  startingDay = 0;\r\n  yearRange = 20;\r\n  minMode = 'day';\r\n  maxMode = 'year';\r\n  showWeeks = true;\r\n  formatDay = 'DD';\r\n  formatMonth = 'MMMM';\r\n  formatYear = 'YYYY';\r\n  formatDayHeader = 'dd';\r\n  formatDayTitle = 'MMMM YYYY';\r\n  formatMonthTitle = 'YYYY';\r\n  onlyCurrentMonth = false;\r\n  monthColLimit = 3;\r\n  yearColLimit = 5;\r\n  shortcutPropagation = false;\r\n}\r\n","import {\r\n  Component,\r\n  EventEmitter,\r\n  forwardRef,\r\n  Input,\r\n  Output,\r\n  Provider,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\nimport { DatepickerConfig } from './datepicker.config';\r\n\r\nexport const DATEPICKER_CONTROL_VALUE_ACCESSOR: Provider = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => DatePickerComponent),\r\n  multi: true\r\n};\r\n\r\n/* tslint:disable:component-selector-name component-selector-type */\r\n@Component({\r\n  selector: 'datepicker',\r\n  template: `\r\n    <datepicker-inner [activeDate]=\"activeDate\"\r\n                      (update)=\"onUpdate($event)\"\r\n                      [locale]=\"config.locale\"\r\n                      [datepickerMode]=\"datepickerMode\"\r\n                      [initDate]=\"initDate\"\r\n                      [minDate]=\"minDate\"\r\n                      [maxDate]=\"maxDate\"\r\n                      [minMode]=\"minMode\"\r\n                      [maxMode]=\"maxMode\"\r\n                      [showWeeks]=\"showWeeks\"\r\n                      [formatDay]=\"formatDay\"\r\n                      [formatMonth]=\"formatMonth\"\r\n                      [formatYear]=\"formatYear\"\r\n                      [formatDayHeader]=\"formatDayHeader\"\r\n                      [formatDayTitle]=\"formatDayTitle\"\r\n                      [formatMonthTitle]=\"formatMonthTitle\"\r\n                      [startingDay]=\"startingDay\"\r\n                      [yearRange]=\"yearRange\"\r\n                      [customClass]=\"customClass\"\r\n                      [dateDisabled]=\"dateDisabled\"\r\n                      [dayDisabled]=\"dayDisabled\"\r\n                      [onlyCurrentMonth]=\"onlyCurrentMonth\"\r\n                      [shortcutPropagation]=\"shortcutPropagation\"\r\n                      [monthColLimit]=\"monthColLimit\"\r\n                      [yearColLimit]=\"yearColLimit\"\r\n                      (selectionDone)=\"onSelectionDone($event)\"\r\n                      (activeDateChange)=\"onActiveDateChange($event)\">\r\n      <daypicker tabindex=\"0\"></daypicker>\r\n      <monthpicker tabindex=\"0\"></monthpicker>\r\n      <yearpicker tabindex=\"0\"></yearpicker>\r\n    </datepicker-inner>\r\n    `,\r\n  providers: [DATEPICKER_CONTROL_VALUE_ACCESSOR]\r\n})\r\n/* tslint:enable:component-selector-name component-selector-type */\r\nexport class DatePickerComponent implements ControlValueAccessor {\r\n  /** sets datepicker mode, supports: `day`, `month`, `year` */\r\n  @Input() datepickerMode = 'day';\r\n  /** default date to show if `ng-model` value is not specified */\r\n  @Input() initDate: Date;\r\n  /**  oldest selectable date */\r\n  @Input() minDate: Date;\r\n  /** latest selectable date */\r\n  @Input() maxDate: Date;\r\n  /** set lower datepicker mode, supports: `day`, `month`, `year` */\r\n  @Input() minMode: string;\r\n  /** sets upper datepicker mode, supports: `day`, `month`, `year` */\r\n  @Input() maxMode: string;\r\n  /** if false week numbers will be hidden */\r\n  @Input() showWeeks = true;\r\n  /** format of day in month */\r\n  @Input() formatDay: string;\r\n  /** format of month in year */\r\n  @Input() formatMonth: string;\r\n  /** format of year in year range */\r\n  @Input() formatYear: string;\r\n  /** format of day in week header */\r\n  @Input() formatDayHeader: string;\r\n  /** format of title when selecting day */\r\n  @Input() formatDayTitle: string;\r\n  /** format of title when selecting month */\r\n  @Input() formatMonthTitle: string;\r\n  /** starting day of the week from 0-6 (0=Sunday, ..., 6=Saturday) */\r\n  @Input() startingDay: number;\r\n  /** number of years displayed in year selection */\r\n  @Input() yearRange: number;\r\n  /** if true only dates from the currently displayed month will be shown */\r\n  @Input() onlyCurrentMonth: boolean;\r\n  /** if true shortcut`s event propagation will be disabled */\r\n  @Input() shortcutPropagation: boolean;\r\n  /** number of months displayed in a single row of month picker */\r\n  @Input() monthColLimit: number;\r\n  /** number of years displayed in a single row of year picker */\r\n  @Input() yearColLimit: number;\r\n  /** array of custom css classes to be applied to targeted dates */\r\n  @Input() customClass: { date: Date; mode: string; clazz: string }[];\r\n  /** array of disabled dates */\r\n  @Input() dateDisabled: { date: Date; mode: string }[];\r\n  /** disabled days of the week from 0-6 (0=Sunday, ..., 6=Saturday) */\r\n  @Input() dayDisabled: number[];\r\n\r\n  /** currently active date */\r\n  @Input()\r\n  get activeDate(): Date {\r\n    return this._activeDate || this._now;\r\n  }\r\n\r\n  set activeDate(value: Date) {\r\n    this._activeDate = value;\r\n  }\r\n\r\n  @Output()\r\n  selectionDone: EventEmitter<Date> = new EventEmitter<Date>(undefined);\r\n\r\n  /** callback to invoke when the activeDate is changed. */\r\n  @Output()\r\n  activeDateChange: EventEmitter<Date> = new EventEmitter<Date>(\r\n    undefined\r\n  );\r\n\r\n  @ViewChild(DatePickerInnerComponent)\r\n  _datePicker: DatePickerInnerComponent;\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  onChange: any = Function.prototype;\r\n  /* tslint:disable-next-line: no-any*/\r\n  onTouched: any = Function.prototype;\r\n\r\n  config: DatepickerConfig;\r\n\r\n  protected _now: Date = new Date();\r\n  protected _activeDate: Date;\r\n\r\n  constructor(config: DatepickerConfig) {\r\n    this.config = config;\r\n    this.configureOptions();\r\n  }\r\n\r\n  configureOptions(): void {\r\n    Object.assign(this, this.config);\r\n  }\r\n\r\n  onUpdate(event: Date): void {\r\n    this.activeDate = event;\r\n    this.onChange(event);\r\n  }\r\n\r\n  onSelectionDone(event: Date): void {\r\n    this.selectionDone.emit(event);\r\n  }\r\n\r\n  onActiveDateChange(event: Date): void {\r\n    this.activeDateChange.emit(event);\r\n  }\r\n  // todo: support null value\r\n  /* tslint:disable-next-line: no-any*/\r\n  writeValue(value: any): void {\r\n    if (this._datePicker.compare(value, this._activeDate) === 0) {\r\n      return;\r\n    }\r\n    if (value && value instanceof Date) {\r\n      this.activeDate = value;\r\n      this._datePicker.select(value, false);\r\n\r\n      return;\r\n    }\r\n\r\n    this.activeDate = value ? new Date(value) : void 0;\r\n  }\r\n\r\n  registerOnChange(fn: () => void): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: () => void): void {\r\n    this.onTouched = fn;\r\n  }\r\n}\r\n","// @deprecated\r\n// tslint:disable\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { isBs3 } from 'ngx-bootstrap/utils';\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\n\r\n@Component({\r\n  selector: 'daypicker',\r\n  template: `\r\n<table *ngIf=\"datePicker.datepickerMode === 'day'\" role=\"grid\" [attr.aria-labelledby]=\"datePicker.uniqueId + '-title'\" aria-activedescendant=\"activeDateId\">\r\n  <thead>\r\n    <tr>\r\n      <th>\r\n        <button *ngIf=\"!isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\"\r\n                tabindex=\"-1\"></button>\r\n        <button *ngIf=\"isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\"\r\n                tabindex=\"-1\">&lt;</button>\r\n      </th>\r\n      <th [attr.colspan]=\"5 + (datePicker.showWeeks ? 1 : 0)\">\r\n        <button [id]=\"datePicker.uniqueId + '-title'\"\r\n                type=\"button\" class=\"btn btn-default btn-secondary btn-sm\"\r\n                (click)=\"datePicker.toggleMode(0)\"\r\n                [disabled]=\"datePicker.datepickerMode === datePicker.maxMode\"\r\n                [ngClass]=\"{disabled: datePicker.datepickerMode === datePicker.maxMode}\" tabindex=\"-1\" style=\"width:100%;\">\r\n          <strong>{{ title }}</strong>\r\n        </button>\r\n      </th>\r\n      <th>\r\n        <button *ngIf=\"!isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\"\r\n                tabindex=\"-1\"></button>\r\n        <button *ngIf=\"isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\"\r\n                tabindex=\"-1\">&gt;\r\n        </button>\r\n      </th>\r\n    </tr>\r\n    <tr>\r\n      <th *ngIf=\"datePicker.showWeeks\"></th>\r\n      <th *ngFor=\"let labelz of labels\" class=\"text-center\">\r\n        <small aria-label=\"labelz.full\"><b>{{ labelz.abbr }}</b></small>\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <ng-template ngFor [ngForOf]=\"rows\" let-rowz=\"$implicit\" let-index=\"index\">\r\n      <tr *ngIf=\"!(datePicker.onlyCurrentMonth && rowz[0].secondary && rowz[6].secondary)\">\r\n        <td *ngIf=\"datePicker.showWeeks\" class=\"h6\" class=\"text-center\">\r\n          <em>{{ weekNumbers[index] }}</em>\r\n        </td>\r\n        <td *ngFor=\"let dtz of rowz\" class=\"text-center\" role=\"gridcell\" [id]=\"dtz.uid\">\r\n          <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-sm {{dtz.customClass}}\"\r\n                  *ngIf=\"!(datePicker.onlyCurrentMonth && dtz.secondary)\"\r\n                  [ngClass]=\"{'btn-secondary': isBs4 && !dtz.selected && !datePicker.isActive(dtz), 'btn-info': dtz.selected, disabled: dtz.disabled, active: !isBs4 && datePicker.isActive(dtz), 'btn-default': !isBs4}\"\r\n                  [disabled]=\"dtz.disabled\"\r\n                  (click)=\"datePicker.select(dtz.date)\" tabindex=\"-1\">\r\n            <span [ngClass]=\"{'text-muted': dtz.secondary || dtz.current, 'text-info': !isBs4 && dtz.current}\">{{ dtz.label }}</span>\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n  </tbody>\r\n</table>\r\n  `,\r\n  styles: [\r\n    `\r\n    :host .btn-secondary {\r\n      color: #292b2c;\r\n      background-color: #fff;\r\n      border-color: #ccc;\r\n    }\r\n    :host .btn-info .text-muted {\r\n      color: #292b2c !important;\r\n    }\r\n  `\r\n  ]\r\n})\r\nexport class DayPickerComponent implements OnInit {\r\n  labels: any[] = [];\r\n  title: string;\r\n  rows: any[] = [];\r\n  weekNumbers: number[] = [];\r\n  datePicker: DatePickerInnerComponent;\r\n\r\n  constructor(datePicker: DatePickerInnerComponent) {\r\n    this.datePicker = datePicker;\r\n  }\r\n\r\n  get isBs4(): boolean {\r\n    return !isBs3();\r\n  }\r\n\r\n  /*protected getDaysInMonth(year:number, month:number) {\r\n   return ((month === 1) && (year % 4 === 0) &&\r\n   ((year % 100 !== 0) || (year % 400 === 0))) ? 29 : DAYS_IN_MONTH[month];\r\n   }*/\r\n  ngOnInit(): void {\r\n    const self = this;\r\n\r\n    this.datePicker.stepDay = { months: 1 };\r\n\r\n    this.datePicker.setRefreshViewHandler(function(): void {\r\n      const year = this.activeDate.getFullYear();\r\n      const month = this.activeDate.getMonth();\r\n      const firstDayOfMonth = new Date(year, month, 1);\r\n      const difference = this.startingDay - firstDayOfMonth.getDay();\r\n      const numDisplayedFromPreviousMonth =\r\n        difference > 0 ? 7 - difference : -difference;\r\n      const firstDate = new Date(firstDayOfMonth.getTime());\r\n\r\n      if (numDisplayedFromPreviousMonth > 0) {\r\n        firstDate.setDate(-numDisplayedFromPreviousMonth + 1);\r\n      }\r\n\r\n      // 42 is the number of days on a six-week calendar\r\n      const _days: Date[] = self.getDates(firstDate, 42);\r\n      const days: any[] = [];\r\n      for (let i = 0; i < 42; i++) {\r\n        const _dateObject = this.createDateObject(_days[i], this.formatDay);\r\n        _dateObject.secondary = _days[i].getMonth() !== month;\r\n        _dateObject.uid = this.uniqueId + '-' + i;\r\n        days[i] = _dateObject;\r\n      }\r\n\r\n      self.labels = [];\r\n      for (let j = 0; j < 7; j++) {\r\n        self.labels[j] = {};\r\n        self.labels[j].abbr = this.dateFilter(\r\n          days[j].date,\r\n          this.formatDayHeader\r\n        );\r\n        self.labels[j].full = this.dateFilter(days[j].date, 'EEEE');\r\n      }\r\n\r\n      self.title = this.dateFilter(this.activeDate, this.formatDayTitle);\r\n      self.rows = this.split(days, 7);\r\n\r\n      if (this.showWeeks) {\r\n        self.weekNumbers = [];\r\n        const thursdayIndex = (4 + 7 - this.startingDay) % 7;\r\n        const numWeeks = self.rows.length;\r\n        for (let curWeek = 0; curWeek < numWeeks; curWeek++) {\r\n          self.weekNumbers.push(\r\n            self.getISO8601WeekNumber(self.rows[curWeek][thursdayIndex].date)\r\n          );\r\n        }\r\n      }\r\n    }, 'day');\r\n\r\n    this.datePicker.setCompareHandler(function(\r\n      date1: Date,\r\n      date2: Date\r\n    ): number {\r\n      const d1 = new Date(date1.getFullYear(), date1.getMonth(), date1.getDate());\r\n      const d2 = new Date(date2.getFullYear(), date2.getMonth(), date2.getDate());\r\n      return d1.getTime() - d2.getTime();\r\n    }, 'day');\r\n\r\n    this.datePicker.refreshView();\r\n  }\r\n\r\n  protected getDates(startDate: Date, n: number): Date[] {\r\n    const dates: Date[] = new Array(n);\r\n    let current = new Date(startDate.getTime());\r\n    let i = 0;\r\n    let date: Date;\r\n    while (i < n) {\r\n      date = new Date(current.getTime());\r\n      date = this.datePicker.fixTimeZone(date);\r\n      dates[i++] = date;\r\n      current = new Date(\r\n        date.getFullYear(),\r\n        date.getMonth(),\r\n        date.getDate() + 1\r\n      );\r\n    }\r\n    return dates;\r\n  }\r\n\r\n  protected getISO8601WeekNumber(date: Date): number {\r\n    const checkDate = new Date(date.getTime());\r\n    // Thursday\r\n    checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));\r\n    const time = checkDate.getTime();\r\n    // Compare with Jan 1\r\n    checkDate.setMonth(0);\r\n    checkDate.setDate(1);\r\n    return (\r\n      Math.floor(Math.round((time - checkDate.getTime()) / 86400000) / 7) + 1\r\n    );\r\n  }\r\n\r\n  // todo: key events implementation\r\n}\r\n","// @deprecated\r\n// tslint:disable\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\nimport { isBs3 } from 'ngx-bootstrap/utils';\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\n\r\n@Component({\r\n  selector: 'monthpicker',\r\n  template: `\r\n<table *ngIf=\"datePicker.datepickerMode==='month'\" role=\"grid\">\r\n  <thead>\r\n    <tr>\r\n      <th>\r\n        <button type=\"button\" class=\"btn btn-default btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\" tabindex=\"-1\"></button></th>\r\n      <th [attr.colspan]=\"((datePicker.monthColLimit - 2) <= 0) ? 1 : datePicker.monthColLimit - 2\">\r\n        <button [id]=\"datePicker.uniqueId + '-title'\"\r\n                type=\"button\" class=\"btn btn-default btn-sm\"\r\n                (click)=\"datePicker.toggleMode(0)\"\r\n                [disabled]=\"datePicker.datepickerMode === maxMode\"\r\n                [ngClass]=\"{disabled: datePicker.datepickerMode === maxMode}\" tabindex=\"-1\" style=\"width:100%;\">\r\n          <strong>{{ title }}</strong> \r\n        </button>\r\n      </th>\r\n      <th>\r\n        <button type=\"button\" class=\"btn btn-default btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\" tabindex=\"-1\"></button>\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let rowz of rows\">\r\n      <td *ngFor=\"let dtz of rowz\" class=\"text-center\" role=\"gridcell\" [attr.id]=\"dtz.uid\" [ngClass]=\"dtz.customClass\">\r\n        <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-default\"\r\n                [ngClass]=\"{'btn-link': isBs4 && !dtz.selected && !datePicker.isActive(dtz), 'btn-info': dtz.selected || (isBs4 && !dtz.selected && datePicker.isActive(dtz)), disabled: dtz.disabled, active: !isBs4 && datePicker.isActive(dtz)}\"\r\n                [disabled]=\"dtz.disabled\"\r\n                (click)=\"datePicker.select(dtz.date)\" tabindex=\"-1\">\r\n          <span [ngClass]=\"{'text-success': isBs4 && dtz.current, 'text-info': !isBs4 && dtz.current}\">{{ dtz.label }}</span>\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n  `,\r\n  styles: [\r\n    `\r\n    :host .btn-info .text-success {\r\n      color: #fff !important;\r\n    }\r\n  `\r\n  ]\r\n})\r\nexport class MonthPickerComponent implements OnInit {\r\n  title: string;\r\n  rows: any[] = [];\r\n  datePicker: DatePickerInnerComponent;\r\n  maxMode: string;\r\n\r\n  constructor(datePicker: DatePickerInnerComponent) {\r\n    this.datePicker = datePicker;\r\n  }\r\n\r\n  get isBs4(): boolean {\r\n    return !isBs3();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const self = this;\r\n\r\n    this.datePicker.stepMonth = { years: 1 };\r\n\r\n    this.datePicker.setRefreshViewHandler(function(): void {\r\n      const months: any[] = new Array(12);\r\n      const year: number = this.activeDate.getFullYear();\r\n      let date: Date;\r\n\r\n      for (let i = 0; i < 12; i++) {\r\n        date = new Date(year, i, 1);\r\n        date = this.fixTimeZone(date);\r\n        months[i] = this.createDateObject(date, this.formatMonth);\r\n        months[i].uid = this.uniqueId + '-' + i;\r\n      }\r\n\r\n      self.title = this.dateFilter(this.activeDate, this.formatMonthTitle);\r\n      self.rows = this.split(months, self.datePicker.monthColLimit);\r\n    }, 'month');\r\n\r\n    this.datePicker.setCompareHandler(function(\r\n      date1: Date,\r\n      date2: Date\r\n    ): number {\r\n      const d1 = new Date(date1.getFullYear(), date1.getMonth());\r\n      const d2 = new Date(date2.getFullYear(), date2.getMonth());\r\n      return d1.getTime() - d2.getTime();\r\n    }, 'month');\r\n\r\n    this.datePicker.refreshView();\r\n  }\r\n\r\n  // todo: key events implementation\r\n}\r\n","// @deprecated\r\n// tslint:disable\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\nimport { isBs3 } from 'ngx-bootstrap/utils';\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\n\r\n@Component({\r\n  selector: 'yearpicker',\r\n  template: `\r\n<table *ngIf=\"datePicker.datepickerMode==='year'\" role=\"grid\">\r\n  <thead>\r\n    <tr>\r\n      <th>\r\n        <button type=\"button\" class=\"btn btn-default btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\" tabindex=\"-1\"></button>\r\n      </th>\r\n      <th [attr.colspan]=\"((datePicker.yearColLimit - 2) <= 0) ? 1 : datePicker.yearColLimit - 2\">\r\n        <button [id]=\"datePicker.uniqueId + '-title'\" role=\"heading\"\r\n                type=\"button\" class=\"btn btn-default btn-sm\"\r\n                (click)=\"datePicker.toggleMode(0)\"\r\n                [disabled]=\"datePicker.datepickerMode === datePicker.maxMode\"\r\n                [ngClass]=\"{disabled: datePicker.datepickerMode === datePicker.maxMode}\" tabindex=\"-1\" style=\"width:100%;\">\r\n          <strong>{{ title }}</strong>\r\n        </button>\r\n      </th>\r\n      <th>\r\n        <button type=\"button\" class=\"btn btn-default btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\" tabindex=\"-1\"></button>\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let rowz of rows\">\r\n      <td *ngFor=\"let dtz of rowz\" class=\"text-center\" role=\"gridcell\" [attr.id]=\"dtz.uid\">\r\n        <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-default\"\r\n                [ngClass]=\"{'btn-link': isBs4 && !dtz.selected && !datePicker.isActive(dtz), 'btn-info': dtz.selected || (isBs4 && !dtz.selected && datePicker.isActive(dtz)), disabled: dtz.disabled, active: !isBs4 && datePicker.isActive(dtz)}\"\r\n                [disabled]=\"dtz.disabled\"\r\n                (click)=\"datePicker.select(dtz.date)\" tabindex=\"-1\">\r\n          <span [ngClass]=\"{'text-success': isBs4 && dtz.current, 'text-info': !isBs4 && dtz.current}\">{{ dtz.label }}</span>\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n  `,\r\n  styles: [\r\n    `\r\n    :host .btn-info .text-success {\r\n      color: #fff !important;\r\n    }\r\n  `\r\n  ]\r\n})\r\nexport class YearPickerComponent implements OnInit {\r\n  datePicker: DatePickerInnerComponent;\r\n  title: string;\r\n  rows: any[] = [];\r\n\r\n  constructor(datePicker: DatePickerInnerComponent) {\r\n    this.datePicker = datePicker;\r\n  }\r\n\r\n  get isBs4(): boolean {\r\n    return !isBs3();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const self = this;\r\n\r\n    this.datePicker.stepYear = { years: this.datePicker.yearRange };\r\n\r\n    this.datePicker.setRefreshViewHandler(function(): void {\r\n      const years: any[] = new Array(this.yearRange);\r\n      let date: Date;\r\n      const start = self.getStartingYear(this.activeDate.getFullYear());\r\n\r\n      for (let i = 0; i < this.yearRange; i++) {\r\n        date = new Date(start + i, 0, 1);\r\n        date = this.fixTimeZone(date);\r\n        years[i] = this.createDateObject(date, this.formatYear);\r\n        years[i].uid = this.uniqueId + '-' + i;\r\n      }\r\n\r\n      self.title = [years[0].label, years[this.yearRange - 1].label].join(\r\n        ' - '\r\n      );\r\n      self.rows = this.split(years, self.datePicker.yearColLimit);\r\n    }, 'year');\r\n\r\n    this.datePicker.setCompareHandler(function(\r\n      date1: Date,\r\n      date2: Date\r\n    ): number {\r\n      return date1.getFullYear() - date2.getFullYear();\r\n    }, 'year');\r\n\r\n    this.datePicker.refreshView();\r\n  }\r\n\r\n  protected getStartingYear(year: number): number {\r\n    // todo: parseInt\r\n    return (\r\n      (year - 1) / this.datePicker.yearRange * this.datePicker.yearRange + 1\r\n    );\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\nimport { DatePickerComponent } from './datepicker.component';\r\nimport { DatepickerConfig } from './datepicker.config';\r\nimport { DayPickerComponent } from './daypicker.component';\r\nimport { MonthPickerComponent } from './monthpicker.component';\r\nimport { YearPickerComponent } from './yearpicker.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule],\r\n  declarations: [\r\n    DatePickerComponent,\r\n    DatePickerInnerComponent,\r\n    DayPickerComponent,\r\n    MonthPickerComponent,\r\n    YearPickerComponent\r\n  ],\r\n  exports: [\r\n    DatePickerComponent,\r\n    DatePickerInnerComponent,\r\n    DayPickerComponent,\r\n    MonthPickerComponent,\r\n    YearPickerComponent\r\n  ],\r\n  entryComponents: [DatePickerComponent]\r\n})\r\nexport class DatepickerModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: DatepickerModule, providers: [DatepickerConfig] };\r\n  }\r\n}\r\n"],"names":["Injectable","BehaviorSubject","filter","map","getMonth","getFullYear","tslib_1.__values","isFirstDayOfWeek","getDay","shiftDate","isBefore","endOf","isAfter","startOf","isSame","getFirstDayOfMonth","formatDate","getLocale","isSameMonth","isSameDay","isDisabledDay","height","width","shift","isSameYear","setFullDate","isDateValid","isArray","tslib_1.__extends","MiniState","MiniStore","EventEmitter","Component","PositioningService","Directive","ElementRef","Renderer2","ViewContainerRef","ComponentLoaderFactory","Input","Output","NG_VALUE_ACCESSOR","forwardRef","NG_VALIDATORS","isDate","parseDate","Host","ChangeDetectorRef","ChangeDetectionStrategy","NgModule","CommonModule","ViewChild","isBs3","FormsModule"],"mappings":"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"}
