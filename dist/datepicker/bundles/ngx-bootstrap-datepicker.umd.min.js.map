{"version":3,"sources":["ng://ngx-bootstrap/datepicker/bs-datepicker.config.ts","node_modules/tslib/tslib.es6.js","ng://ngx-bootstrap/datepicker/base/bs-datepicker-container.ts","ng://ngx-bootstrap/datepicker/reducer/bs-datepicker.actions.ts","ng://ngx-bootstrap/datepicker/bs-locale.service.ts","ng://ngx-bootstrap/datepicker/reducer/bs-datepicker.effects.ts","ng://ngx-bootstrap/datepicker/reducer/bs-datepicker.state.ts","ng://ngx-bootstrap/datepicker/reducer/_defaults.ts","ng://ngx-bootstrap/datepicker/utils/bs-calendar-utils.ts","ng://ngx-bootstrap/datepicker/utils/matrix-utils.ts","ng://ngx-bootstrap/datepicker/engine/calc-days-calendar.ts","ng://ngx-bootstrap/datepicker/engine/format-days-calendar.ts","ng://ngx-bootstrap/datepicker/engine/flag-days-calendar.ts","ng://ngx-bootstrap/datepicker/engine/view-mode.ts","ng://ngx-bootstrap/datepicker/engine/format-months-calendar.ts","ng://ngx-bootstrap/datepicker/engine/format-years-calendar.ts","ng://ngx-bootstrap/datepicker/reducer/bs-datepicker.reducer.ts","ng://ngx-bootstrap/datepicker/engine/flag-months-calendar.ts","ng://ngx-bootstrap/datepicker/engine/flag-years-calendar.ts","ng://ngx-bootstrap/datepicker/reducer/bs-datepicker.store.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-datepicker-container.component.ts","ng://ngx-bootstrap/datepicker/bs-datepicker.component.ts","ng://ngx-bootstrap/datepicker/bs-datepicker-inline.config.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-datepicker-inline-container.component.ts","ng://ngx-bootstrap/datepicker/bs-datepicker-inline.component.ts","ng://ngx-bootstrap/datepicker/bs-datepicker-input.directive.ts","ng://ngx-bootstrap/datepicker/bs-daterangepicker.config.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-daterangepicker-container.component.ts","ng://ngx-bootstrap/datepicker/bs-daterangepicker.component.ts","ng://ngx-bootstrap/datepicker/bs-daterangepicker-input.directive.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-calendar-layout.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-current-date-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-custom-dates-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-datepicker-day-decorator.directive.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-datepicker-navigation-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-days-calendar-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-months-calendar-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-timepicker-view.component.ts","ng://ngx-bootstrap/datepicker/themes/bs/bs-years-calendar-view.component.ts","ng://ngx-bootstrap/datepicker/bs-datepicker.module.ts","ng://ngx-bootstrap/datepicker/date-formatter.ts","ng://ngx-bootstrap/datepicker/datepicker-inner.component.ts","ng://ngx-bootstrap/datepicker/datepicker.config.ts","ng://ngx-bootstrap/datepicker/datepicker.component.ts","ng://ngx-bootstrap/datepicker/daypicker.component.ts","ng://ngx-bootstrap/datepicker/monthpicker.component.ts","ng://ngx-bootstrap/datepicker/yearpicker.component.ts","ng://ngx-bootstrap/datepicker/datepicker.module.ts"],"names":["Injectable","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__values","o","m","Symbol","iterator","i","call","next","length","value","done","__read","n","r","e","ar","push","error","__spread","arguments","concat","BsDatepickerAbstractComponent","defineProperty","_effects","setMinDate","setMaxDate","setDaysDisabled","setDatesDisabled","setDisabled","setViewMode","event","navigateTo","dayHoverHandler","weekHoverHandler","monthHoverHandler","yearHoverHandler","daySelectHandler","day","monthSelectHandler","yearSelectHandler","_stopPropagation","stopPropagation","BsDatepickerActions","calculate","type","CALCULATE","format","FORMAT","flag","FLAG","select","date","SELECT","payload","changeViewMode","CHANGE_VIEWMODE","NAVIGATE_TO","navigateStep","step","NAVIGATE_OFFSET","setOptions","options","SET_OPTIONS","selectRange","SELECT_RANGE","hoverDay","HOVER","isHovered","cell","minDate","SET_MIN_DATE","maxDate","SET_MAX_DATE","daysDisabled","days","SET_DAYSDISABLED","datesDisabled","dates","SET_DATESDISABLED","isDisabled","SET_IS_DISABLED","setLocale","locale","SET_LOCALE","BsLocaleService","BehaviorSubject","_defaultLocale","_locale","asObservable","_localeChange","getValue","use","currentLocale","BsDatepickerEffects","_actions","_localeService","init","_bsDatepickerStore","_store","setValue","dispatch","setRangeValue","_config","_options","assign","setBindings","container","daysCalendar","state","flaggedMonths","pipe","filter","months","monthsCalendar","flaggedMonthsCalendar","yearsCalendar","yearsCalendarFlagged","years","viewMode","view","mode","showWeekNumbers","map","setEventHandlers","_this","_cell","isOtherMonth","unit","month","getMonth","year","getFullYear","registerDatepickerSideEffects","_subs","subscribe","monthsModel","monthModel","formattedMonths","selectedDate","selectedRange","yearsCalendarModel","hoveredDate","localeChange","destroy","_a","tslib_1.__values","_b","unsubscribe","_initialView","Date","initialDatepickerState","BsDatepickerConfig","monthViewOptions","width","height","isMonthDisabled","min","max","minBound","isBefore","endOf","maxBound","isAfter","startOf","isYearDisabled","createMatrix","fn","prevValue","initialDate","matrix","j","shiftDate","shift","calcDaysCalendar","startingDate","firstDay","getFirstDayOfMonth","getStartingDayOfCalendar","isFirstDayOfWeek","firstDayOfWeek","offset","calculateDateOffset","weekday","startingDayOffset","getDay","daysMatrix","formatDaysCalendar","formatOptions","monthIndex","monthTitle","formatDate","yearTitle","weekNumbers","getWeekNumbers","weekdays","getShiftedWeekdays","getLocale","weekdaysShort","slice","weeks","week","weekIndex","dayIndex","label","dayLabel","flagDaysCalendar","formattedMonth","forEach","isSameMonth","isSameDay","isSelectionStart","isSelectionEnd","isSelected","isInRange","isDateInRange","isDisabledDay","isDisabledDate","undefined","some","dateDisabled","isSame","currentDate","isToday","newDay","hideLeftArrow","displayMonths","hideRightArrow","disableLeftArrow","disableRightArrow","canSwitchMode","minMode","formatMonthsCalendar","viewDate","monthLabel","yearsPerCalendar","initialShift","Math","floor","formatYearsCalendar","yearsMatrix","width$1","height$1","shift$1","yearLabel","formatYearRangeTitle","from","to","bsDatepickerReducer","action","calculateReducer","calendarIndex","getFormatOptions","formatReducer","flagReducer","flagMonthsCalendar","monthCalendar","rowIndex","hoveredMonth","newMonth","yearIndex","flagYearsCalendar","isSameYear","hoveredYear","newState","setFullDate","getViewDate","isDateValid","isArray","_date","BsDatepickerStore","_dispatcher","MiniState","_super","tslib_1.__extends","MiniStore","BsDatepickerContainerComponent","_positionService","EventEmitter","ngOnInit","modifiers","flip","enabled","adaptivePosition","isOtherMonthsActive","selectFromOtherMonth","containerClass","valueChange","emit","ngOnDestroy","Component","args","selector","providers","template","host","(click)","style","role","aria-label","PositioningService","BsDatepickerDirective","_elementRef","_renderer","_viewContainerRef","cis","_datepicker","createLoader","onShown","onHidden","isShown","show","hide","_bsValue","bsValueChange","listen","outsideClick","outsideEsc","triggers","setConfig","ngOnChanges","changes","_datepickerRef","instance","provide","useValue","attach","position","attachment","placement","bsValue","isOpen","toggle","bsConfig","dispose","Directive","exportAs","ElementRef","Renderer2","ViewContainerRef","ComponentLoaderFactory","Input","Output","BsDatepickerInlineContainerComponent","_positioningService","BsDatepickerInlineDirective","BsDatepickerInlineConfig","BS_DATEPICKER_VALUE_ACCESSOR","NG_VALUE_ACCESSOR","useExisting","forwardRef","BsDatepickerInputDirective","multi","BS_DATEPICKER_VALIDATOR","NG_VALIDATORS","_picker","_elRef","changeDetection","Function","_setInputValue","_value","_onChange","_onTouched","markForCheck","dateInputFormat","setProperty","nativeElement","onChange","writeValue","validate","c","isDate","bsDate","invalid","registerOnValidatorChange","_validatorChange","_localeKey","Error","parseDate","setDisabledState","setAttribute","removeAttribute","registerOnChange","registerOnTouched","onBlur","selectRootElement","blur","(change)","(keyup.esc)","(blur)","decorators","Host","ChangeDetectorRef","BsDaterangepickerContainerComponent","_rangeStack","BsDaterangepickerDirective","range","BsDaterangepickerConfig","BS_DATERANGEPICKER_VALUE_ACCESSOR","BsDaterangepickerInputDirective","BS_DATERANGEPICKER_VALIDATOR","start","rangeInputFormat","end","rangeSeparator","_isFirstDateValid","_isSecondDateValid","_input","split","_val","isNaN","valueOf","BsCalendarLayoutComponent","BsCurrentDateViewComponent","BsCustomDatesViewComponent","ChangeDetectionStrategy","OnPush","BsDatepickerDayDecoratorComponent","customTodayClass","addClass","[class.disabled]","[class.is-highlighted]","[class.is-other-month]","[class.is-active-other-month]","[class.in-range]","[class.select-start]","[class.select-end]","[class.selected]","BsDatepickerNavigationViewComponent","navTo","down","onNavigate","BsNavigationDirection","DOWN","UP","onViewMode","BsDaysCalendarViewComponent","selectDay","onSelect","selectWeek","selectedDay","find","isWeekHovered","onHoverWeek","isOtherMonthHovered","onHover","BsMonthCalendarViewComponent","viewMonth","hoverMonth","BsTimepickerViewComponent","BsYearsCalendarViewComponent","viewYear","hoverYear","_exports","BsDatepickerModule","forRoot","ngModule","NgModule","imports","CommonModule","declarations","entryComponents","exports","DateFormatter","DatePickerInnerComponent","_activeDate","uniqueId","random","initDate","activeDate","update","refreshView","checkIfActiveDateGotUpdated","firstChange","previousValue","getTime","currentValue","activeDateChange","setCompareHandler","handler","compareHandlerDay","compareHandlerMonth","compareHandlerYear","compare","date1","date2","datepickerMode","setRefreshViewHandler","refreshViewHandlerDay","refreshViewHandlerMonth","refreshViewHandlerYear","dateFilter","dateFormatter","isActive","dateObject","activeDateId","uid","createDateObject","getDate","fixTimeZone","selected","disabled","current","customClass","getCustomClassForDate","arr","size","arrays","splice","hours","getHours","isManual","selectionDone","modes","indexOf","move","direction","expectedStep","stepDay","stepMonth","stepYear","toggleMode","_direction","maxMode","customClassObject","clazz","compareDateDisabled","date1Disabled","isDateDisabled","disabledDate","dayDisabled","DatepickerConfig","DATEPICKER_CONTROL_VALUE_ACCESSOR","DatePickerComponent","config","configureOptions","_now","onUpdate","onSelectionDone","onActiveDateChange","_datePicker","onTouched","ViewChild","DayPickerComponent","datePicker","isBs3","self","firstDayOfMonth","difference","startingDay","numDisplayedFromPreviousMonth","firstDate","setDate","_days","getDates","_dateObject","formatDay","secondary","labels","abbr","formatDayHeader","full","title","formatDayTitle","rows","showWeeks","thursdayIndex","numWeeks","curWeek","getISO8601WeekNumber","d1","d2","startDate","checkDate","time","setMonth","round","MonthPickerComponent","formatMonth","formatMonthTitle","monthColLimit","YearPickerComponent","yearRange","getStartingYear","formatYear","join","yearColLimit","DatepickerModule","FormsModule"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport {\r\n  DatepickerRenderOptions,\r\n  BsDatepickerViewMode\r\n} from './models';\r\n\r\n\r\n/**\r\n * For date range picker there are `BsDaterangepickerConfig` which inherits all properties,\r\n * except `displayMonths`, for range picker it default to `2`\r\n */\r\n@Injectable()\r\nexport class BsDatepickerConfig implements DatepickerRenderOptions {\r\n  /** sets use adaptive position */\r\n  adaptivePosition = false;\r\n  value?: Date | Date[];\r\n  isDisabled?: boolean;\r\n  /**\r\n   * Default min date for all date/range pickers\r\n   */\r\n  minDate?: Date;\r\n  /**\r\n   * Default max date for all date/range pickers\r\n   */\r\n  maxDate?: Date;\r\n\r\n  daysDisabled?: number[];\r\n\r\n  /**\r\n   * Disable specific dates\r\n   */\r\n  datesDisabled?: Date[];\r\n  /**\r\n   * Makes dates from other months active\r\n   */\r\n  selectFromOtherMonth?: boolean;\r\n\r\n  /**\r\n   * Makes dates from other months active\r\n   */\r\n  selectWeek?: boolean;\r\n\r\n  /**\r\n   * Add class to current day\r\n   */\r\n  customTodayClass?: string;\r\n\r\n  /**\r\n   * Default mode for all date pickers\r\n   */\r\n  minMode?: BsDatepickerViewMode;\r\n\r\n  /** CSS class which will be applied to datepicker container,\r\n   * usually used to set color theme\r\n   */\r\n  containerClass = 'theme-green';\r\n\r\n  // DatepickerRenderOptions\r\n  displayMonths = 1;\r\n  /**\r\n   * Allows to hide week numbers in datepicker\r\n   */\r\n  showWeekNumbers = true;\r\n\r\n  dateInputFormat = 'L';\r\n  // range picker\r\n  rangeSeparator = ' - ';\r\n  /**\r\n   * Date format for date range input field\r\n   */\r\n  rangeInputFormat = 'L';\r\n\r\n  // DatepickerFormatOptions\r\n  monthTitle = 'MMMM';\r\n  yearTitle = 'YYYY';\r\n  dayLabel = 'D';\r\n  monthLabel = 'MMMM';\r\n  yearLabel = 'YYYY';\r\n  weekNumbers = 'w';\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","// datepicker container component\r\n/* tslint:disable:no-empty */\r\nimport { BsCustomDates } from '../themes/bs/bs-custom-dates-view.component';\r\nimport { BsDatepickerEffects } from '../reducer/bs-datepicker.effects';\r\nimport { Observable } from 'rxjs';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationEvent,\r\n  CalendarCellViewModel,\r\n  CellHoverEvent,\r\n  DatepickerRenderOptions,\r\n  DaysCalendarViewModel,\r\n  DayViewModel,\r\n  MonthsCalendarViewModel,\r\n  WeekViewModel,\r\n  YearsCalendarViewModel\r\n} from '../models';\r\n\r\nexport abstract class BsDatepickerAbstractComponent {\r\n  containerClass: string;\r\n  isOtherMonthsActive: boolean;\r\n\r\n  _effects: BsDatepickerEffects;\r\n  _customRangesFish: BsCustomDates[] = [];\r\n\r\n  set minDate(value: Date) {\r\n    this._effects.setMinDate(value);\r\n  }\r\n\r\n  set maxDate(value: Date) {\r\n    this._effects.setMaxDate(value);\r\n  }\r\n  set daysDisabled(value: number[]) {\r\n    this._effects.setDaysDisabled(value);\r\n  }\r\n  set datesDisabled(value: Date[]) {\r\n    this._effects.setDatesDisabled(value);\r\n  }\r\n\r\n  set isDisabled(value: boolean) {\r\n    this._effects.setDisabled(value);\r\n  }\r\n\r\n  viewMode: Observable<BsDatepickerViewMode>;\r\n  daysCalendar: Observable<DaysCalendarViewModel[]>;\r\n  monthsCalendar: Observable<MonthsCalendarViewModel[]>;\r\n  yearsCalendar: Observable<YearsCalendarViewModel[]>;\r\n  options: Observable<DatepickerRenderOptions>;\r\n\r\n  setViewMode(event: BsDatepickerViewMode): void {}\r\n\r\n  navigateTo(event: BsNavigationEvent): void {}\r\n\r\n  dayHoverHandler(event: CellHoverEvent): void {}\r\n\r\n  weekHoverHandler(event: WeekViewModel): void {}\r\n\r\n  monthHoverHandler(event: CellHoverEvent): void {}\r\n\r\n  yearHoverHandler(event: CellHoverEvent): void {}\r\n\r\n  daySelectHandler(day: DayViewModel): void {}\r\n\r\n  monthSelectHandler(event: CalendarCellViewModel): void {}\r\n\r\n  yearSelectHandler(event: CalendarCellViewModel): void {}\r\n\r\n  /* tslint:disable-next-line: no-any */\r\n  _stopPropagation(event: any): void {\r\n    event.stopPropagation();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TimeUnit } from 'ngx-bootstrap/chronos';\r\nimport { Action } from 'ngx-bootstrap/mini-ngrx';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsViewNavigationEvent,\r\n  CellHoverEvent,\r\n  DatepickerRenderOptions\r\n} from '../models';\r\n\r\n@Injectable()\r\nexport class BsDatepickerActions {\r\n  static readonly CALCULATE = '[datepicker] calculate dates matrix';\r\n  static readonly FORMAT = '[datepicker] format datepicker values';\r\n  static readonly FLAG = '[datepicker] set flags';\r\n  static readonly SELECT = '[datepicker] select date';\r\n  static readonly NAVIGATE_OFFSET = '[datepicker] shift view date';\r\n  static readonly NAVIGATE_TO = '[datepicker] change view date';\r\n  static readonly SET_OPTIONS = '[datepicker] update render options';\r\n  static readonly HOVER = '[datepicker] hover date';\r\n  static readonly CHANGE_VIEWMODE = '[datepicker] switch view mode';\r\n\r\n  static readonly SET_MIN_DATE = '[datepicker] set min date';\r\n  static readonly SET_MAX_DATE = '[datepicker] set max date';\r\n  static readonly SET_DAYSDISABLED = '[datepicker] set days disabled';\r\n  static readonly SET_DATESDISABLED = '[datepicker] set dates disabled';\r\n  static readonly SET_IS_DISABLED = '[datepicker] set is disabled';\r\n\r\n  static readonly SET_LOCALE = '[datepicker] set datepicker locale';\r\n\r\n  static readonly SELECT_RANGE = '[daterangepicker] select dates range';\r\n\r\n  calculate(): Action {\r\n    return { type: BsDatepickerActions.CALCULATE };\r\n  }\r\n\r\n  format(): Action {\r\n    return { type: BsDatepickerActions.FORMAT };\r\n  }\r\n\r\n  flag(): Action {\r\n    return { type: BsDatepickerActions.FLAG };\r\n  }\r\n\r\n  select(date: Date): Action {\r\n    return {\r\n      type: BsDatepickerActions.SELECT,\r\n      payload: date\r\n    };\r\n  }\r\n\r\n  changeViewMode(event: BsDatepickerViewMode): Action {\r\n    return {\r\n      type: BsDatepickerActions.CHANGE_VIEWMODE,\r\n      payload: event\r\n    };\r\n  }\r\n\r\n  navigateTo(event: BsViewNavigationEvent): Action {\r\n    return {\r\n      type: BsDatepickerActions.NAVIGATE_TO,\r\n      payload: event\r\n    };\r\n  }\r\n\r\n  navigateStep(step: TimeUnit): Action {\r\n    return {\r\n      type: BsDatepickerActions.NAVIGATE_OFFSET,\r\n      payload: step\r\n    };\r\n  }\r\n\r\n  setOptions(options: DatepickerRenderOptions): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_OPTIONS,\r\n      payload: options\r\n    };\r\n  }\r\n\r\n  // date range picker\r\n  selectRange(value: Date[]): Action {\r\n    return {\r\n      type: BsDatepickerActions.SELECT_RANGE,\r\n      payload: value\r\n    };\r\n  }\r\n\r\n  hoverDay(event: CellHoverEvent): Action {\r\n    return {\r\n      type: BsDatepickerActions.HOVER,\r\n      payload: event.isHovered ? event.cell.date : null\r\n    };\r\n  }\r\n\r\n  minDate(date: Date): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_MIN_DATE,\r\n      payload: date\r\n    };\r\n  }\r\n\r\n  maxDate(date: Date): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_MAX_DATE,\r\n      payload: date\r\n    };\r\n  }\r\n\r\n  daysDisabled(days: number[]): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_DAYSDISABLED,\r\n      payload: days\r\n    };\r\n  }\r\n\r\n  datesDisabled(dates: Date[]): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_DATESDISABLED,\r\n      payload: dates\r\n    };\r\n  }\r\n\r\n  isDisabled(value: boolean): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_IS_DISABLED,\r\n      payload: value\r\n    };\r\n  }\r\n\r\n  setLocale(locale: string): Action {\r\n    return {\r\n      type: BsDatepickerActions.SET_LOCALE,\r\n      payload: locale\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class BsLocaleService {\r\n  private _defaultLocale = 'en';\r\n  private _locale = new BehaviorSubject<string>(this._defaultLocale);\r\n  private _localeChange: Observable<string> = this._locale.asObservable();\r\n\r\n  get locale(): BehaviorSubject<string> {\r\n    return this._locale;\r\n  }\r\n\r\n  get localeChange(): Observable<string> {\r\n    return this._localeChange;\r\n  }\r\n\r\n  get currentLocale(): string {\r\n    return this._locale.getValue();\r\n  }\r\n\r\n  use(locale: string): void {\r\n    if (locale === this.currentLocale) {\r\n      return;\r\n    }\r\n\r\n    this._locale.next(locale);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { filter, map } from 'rxjs/operators';\r\n\r\nimport { getFullYear, getMonth } from 'ngx-bootstrap/chronos';\r\n\r\nimport { BsDatepickerAbstractComponent } from '../base/bs-datepicker-container';\r\nimport { BsDatepickerActions } from './bs-datepicker.actions';\r\nimport { BsDatepickerConfig } from '../bs-datepicker.config';\r\nimport { BsDatepickerStore } from './bs-datepicker.store';\r\nimport { BsLocaleService } from '../bs-locale.service';\r\n\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationEvent,\r\n  CalendarCellViewModel,\r\n  CellHoverEvent,\r\n  DatepickerRenderOptions,\r\n  DaysCalendarViewModel,\r\n  DayViewModel,\r\n  MonthsCalendarViewModel,\r\n  YearsCalendarViewModel\r\n} from '../models';\r\n\r\n\r\n@Injectable()\r\nexport class BsDatepickerEffects {\r\n  viewMode: Observable<BsDatepickerViewMode>;\r\n  daysCalendar: Observable<DaysCalendarViewModel[]>;\r\n  monthsCalendar: Observable<MonthsCalendarViewModel[]>;\r\n  yearsCalendar: Observable<YearsCalendarViewModel[]>;\r\n  options: Observable<DatepickerRenderOptions>;\r\n\r\n  private _store: BsDatepickerStore;\r\n  private _subs: Subscription[] = [];\r\n\r\n  constructor(private _actions: BsDatepickerActions,\r\n              private _localeService: BsLocaleService) {}\r\n\r\n  init(_bsDatepickerStore: BsDatepickerStore): BsDatepickerEffects {\r\n    this._store = _bsDatepickerStore;\r\n\r\n    return this;\r\n  }\r\n\r\n  /** setters */\r\n\r\n  setValue(value: Date): void {\r\n    this._store.dispatch(this._actions.select(value));\r\n  }\r\n\r\n  setRangeValue(value: Date[]): void {\r\n    this._store.dispatch(this._actions.selectRange(value));\r\n  }\r\n\r\n  setMinDate(value: Date): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.minDate(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setMaxDate(value: Date): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.maxDate(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDaysDisabled(value: number[]) {\r\n    this._store.dispatch(this._actions.daysDisabled(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDatesDisabled(value: Date[]) {\r\n    this._store.dispatch(this._actions.datesDisabled(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  setDisabled(value: boolean): BsDatepickerEffects {\r\n    this._store.dispatch(this._actions.isDisabled(value));\r\n\r\n    return this;\r\n  }\r\n\r\n  /* Set rendering options */\r\n  setOptions(_config: BsDatepickerConfig): BsDatepickerEffects {\r\n    const _options = Object.assign({locale: this._localeService.currentLocale}, _config);\r\n    this._store.dispatch(this._actions.setOptions(_options));\r\n\r\n    return this;\r\n  }\r\n\r\n  /** view to mode bindings */\r\n  setBindings(container: BsDatepickerAbstractComponent): BsDatepickerEffects {\r\n    container.daysCalendar = this._store\r\n      .select(state => state.flaggedMonths)\r\n      .pipe(\r\n        filter(months => !!months)\r\n      );\r\n\r\n    // month calendar\r\n    container.monthsCalendar = this._store\r\n      .select(state => state.flaggedMonthsCalendar)\r\n      .pipe(\r\n        filter(months => !!months)\r\n      );\r\n\r\n    // year calendar\r\n    container.yearsCalendar = this._store\r\n      .select(state => state.yearsCalendarFlagged)\r\n      .pipe(\r\n        filter(years => !!years)\r\n      );\r\n\r\n    container.viewMode = this._store.select(state => state.view.mode);\r\n\r\n    container.options = this._store\r\n      .select(state => state.showWeekNumbers)\r\n      .pipe(\r\n        map(showWeekNumbers => ({showWeekNumbers}))\r\n      );\r\n\r\n    return this;\r\n  }\r\n\r\n  /** event handlers */\r\n  setEventHandlers(container: BsDatepickerAbstractComponent): BsDatepickerEffects {\r\n    container.setViewMode = (event: BsDatepickerViewMode): void => {\r\n      this._store.dispatch(this._actions.changeViewMode(event));\r\n    };\r\n\r\n    container.navigateTo = (event: BsNavigationEvent): void => {\r\n      this._store.dispatch(this._actions.navigateStep(event.step));\r\n    };\r\n\r\n    container.dayHoverHandler = (event: CellHoverEvent): void => {\r\n      const _cell = event.cell as DayViewModel;\r\n      if (_cell.isOtherMonth || _cell.isDisabled) {\r\n        return;\r\n      }\r\n\r\n      this._store.dispatch(this._actions.hoverDay(event));\r\n      _cell.isHovered = event.isHovered;\r\n    };\r\n\r\n    container.monthHoverHandler = (event: CellHoverEvent): void => {\r\n      event.cell.isHovered = event.isHovered;\r\n    };\r\n\r\n    container.yearHoverHandler = (event: CellHoverEvent): void => {\r\n      event.cell.isHovered = event.isHovered;\r\n    };\r\n\r\n    container.monthSelectHandler = (event: CalendarCellViewModel): void => {\r\n      if (event.isDisabled) {\r\n        return;\r\n      }\r\n      this._store.dispatch(\r\n        this._actions.navigateTo({\r\n          unit: {\r\n            month: getMonth(event.date),\r\n            year: getFullYear(event.date)\r\n          },\r\n          viewMode: 'day'\r\n        })\r\n      );\r\n    };\r\n\r\n    container.yearSelectHandler = (event: CalendarCellViewModel): void => {\r\n      if (event.isDisabled) {\r\n        return;\r\n      }\r\n      this._store.dispatch(\r\n        this._actions.navigateTo({\r\n          unit: {\r\n            year: getFullYear(event.date)\r\n          },\r\n          viewMode: 'month'\r\n        })\r\n      );\r\n    };\r\n\r\n    return this;\r\n  }\r\n\r\n  registerDatepickerSideEffects(): BsDatepickerEffects {\r\n    this._subs.push(\r\n      this._store.select(state => state.view).subscribe(view => {\r\n        this._store.dispatch(this._actions.calculate());\r\n      })\r\n    );\r\n\r\n    // format calendar values on month model change\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.monthsModel)\r\n        .pipe(\r\n          filter(monthModel => !!monthModel)\r\n        )\r\n        .subscribe(month => this._store.dispatch(this._actions.format()))\r\n    );\r\n\r\n    // flag day values\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.formattedMonths)\r\n        .pipe(\r\n          filter(month => !!month)\r\n        )\r\n        .subscribe(month => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // flag day values\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.selectedDate)\r\n        .pipe(\r\n          filter(selectedDate => !!selectedDate)\r\n        )\r\n        .subscribe(selectedDate => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // flag for date range picker\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.selectedRange)\r\n        .pipe(\r\n          filter(selectedRange => !!selectedRange)\r\n        )\r\n        .subscribe(selectedRange => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // monthsCalendar\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.monthsCalendar)\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // years calendar\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.yearsCalendarModel)\r\n        .pipe(\r\n          filter(state => !!state)\r\n        )\r\n        .subscribe(() => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // on hover\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.hoveredDate)\r\n        .pipe(\r\n          filter(hoveredDate => !!hoveredDate)\r\n        )\r\n        .subscribe(hoveredDate => this._store.dispatch(this._actions.flag()))\r\n    );\r\n\r\n    // on locale change\r\n    this._subs.push(\r\n      this._localeService.localeChange\r\n        .subscribe(locale => this._store.dispatch(this._actions.setLocale(locale)))\r\n    );\r\n\r\n    return this;\r\n  }\r\n\r\n  destroy(): void {\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","import {\r\n  BsDatepickerViewMode,\r\n  DatepickerFormatOptions,\r\n  DatepickerRenderOptions,\r\n  DaysCalendarModel,\r\n  DaysCalendarViewModel,\r\n  MonthsCalendarViewModel,\r\n  MonthViewOptions,\r\n  YearsCalendarViewModel\r\n} from '../models';\r\nimport { defaultMonthOptions } from './_defaults';\r\nimport { BsDatepickerConfig } from '../bs-datepicker.config';\r\n\r\nexport interface BsDatepickerViewState {\r\n  date: Date;\r\n  mode: BsDatepickerViewMode;\r\n}\r\n\r\nexport class BsDatepickerState\r\n  implements DatepickerRenderOptions, DatepickerFormatOptions {\r\n  // date picker\r\n  selectedDate?: Date;\r\n  // daterange picker\r\n  selectedRange?: Date[];\r\n\r\n  // initial date of calendar, today by default\r\n  view: BsDatepickerViewState;\r\n\r\n  isDisabled?: boolean;\r\n  // bounds\r\n  minDate?: Date;\r\n  maxDate?: Date;\r\n  daysDisabled?: number[];\r\n  datesDisabled?: Date[];\r\n  minMode?: BsDatepickerViewMode;\r\n\r\n  hoveredDate?: Date;\r\n  hoveredMonth?: Date;\r\n  hoveredYear?: Date;\r\n\r\n  // days calendar\r\n  monthsModel?: DaysCalendarModel[];\r\n  formattedMonths?: DaysCalendarViewModel[];\r\n  flaggedMonths?: DaysCalendarViewModel[];\r\n  selectFromOtherMonth?: boolean;\r\n\r\n  // months calendar\r\n  monthsCalendar?: MonthsCalendarViewModel[];\r\n  flaggedMonthsCalendar?: MonthsCalendarViewModel[];\r\n\r\n  // years calendar\r\n  yearsCalendarModel?: YearsCalendarViewModel[];\r\n  yearsCalendarFlagged?: YearsCalendarViewModel[];\r\n\r\n  // options\r\n  monthViewOptions: MonthViewOptions;\r\n\r\n  // DatepickerRenderOptions\r\n  showWeekNumbers?: boolean;\r\n  displayMonths?: number;\r\n\r\n  // DatepickerFormatOptions\r\n  locale: string;\r\n\r\n  monthTitle: string;\r\n  yearTitle: string;\r\n\r\n  dayLabel: string;\r\n  monthLabel: string;\r\n  yearLabel: string;\r\n\r\n  weekNumbers: string;\r\n}\r\n\r\nconst _initialView: BsDatepickerViewState = { date: new Date(), mode: 'day' };\r\n\r\nexport const initialDatepickerState: BsDatepickerState = Object.assign(\r\n  new BsDatepickerConfig(),\r\n  {\r\n    locale: 'en',\r\n    view: _initialView,\r\n    selectedRange: [],\r\n    monthViewOptions: defaultMonthOptions\r\n  }\r\n);\r\n","import {\r\n  MonthViewOptions\r\n} from '../models';\r\n\r\nexport const defaultMonthOptions: MonthViewOptions = {\r\n  width: 7,\r\n  height: 6\r\n};\r\n","import {\r\n  getDay,\r\n  isFirstDayOfWeek,\r\n  isAfter,\r\n  isBefore,\r\n  shiftDate,\r\n  endOf,\r\n  startOf,\r\n  isSame\r\n} from 'ngx-bootstrap/chronos';\r\n\r\nexport function getStartingDayOfCalendar(date: Date,\r\n                                         options: { firstDayOfWeek?: number }): Date {\r\n  if (isFirstDayOfWeek(date, options.firstDayOfWeek)) {\r\n    return date;\r\n  }\r\n\r\n  const weekDay = getDay(date);\r\n  const offset = calculateDateOffset(weekDay, options.firstDayOfWeek);\r\n\r\n  return shiftDate(date, {day: -offset});\r\n}\r\n\r\nexport function calculateDateOffset(weekday: number, startingDayOffset: number): number {\r\n  if (startingDayOffset === 0) {\r\n    return weekday;\r\n  }\r\n\r\n  const offset = weekday - startingDayOffset % 7;\r\n\r\n  return offset < 0 ? offset + 7 : offset;\r\n}\r\n\r\nexport function isMonthDisabled(date: Date, min: Date, max: Date): boolean {\r\n  const minBound = min && isBefore(endOf(date, 'month'), min, 'day');\r\n  const maxBound = max && isAfter(startOf(date, 'month'), max, 'day');\r\n\r\n  return minBound || maxBound;\r\n}\r\n\r\nexport function isYearDisabled(date: Date, min: Date, max: Date): boolean {\r\n  const minBound = min && isBefore(endOf(date, 'year'), min, 'day');\r\n  const maxBound = max && isAfter(startOf(date, 'year'), max, 'day');\r\n\r\n  return minBound || maxBound;\r\n}\r\n\r\nexport function isDisabledDate(date: Date, datesDisabled: Date[]): boolean {\r\n  if (datesDisabled === undefined || !datesDisabled || !datesDisabled.length) {\r\n    return false;\r\n  }\r\n\r\n  return datesDisabled.some((dateDisabled: Date) => isSame(date, dateDisabled, 'date'));\r\n}\r\n","import { TimeUnit, shiftDate } from 'ngx-bootstrap/chronos';\r\n\r\nexport type CreateMatrixCb<T> = (date: Date) => T;\r\n\r\nexport interface MatrixOptions {\r\n  height: number;\r\n  width: number;\r\n  initialDate: Date;\r\n  shift: TimeUnit;\r\n}\r\n\r\nexport function createMatrix<T>(\r\n  options: MatrixOptions,\r\n  fn: CreateMatrixCb<T>\r\n): T[][] {\r\n  let prevValue = options.initialDate;\r\n  const matrix: T[][] = new Array(options.height);\r\n  for (let i = 0; i < options.height; i++) {\r\n    matrix[i] = new Array(options.width);\r\n    for (let j = 0; j < options.width; j++) {\r\n      matrix[i][j] = fn(prevValue);\r\n      prevValue = shiftDate(prevValue, options.shift);\r\n    }\r\n  }\r\n\r\n  return matrix;\r\n}\r\n","// user and model input should handle parsing and validating input values\r\n// should accept some options\r\n// todo: split out formatting\r\nimport { DaysCalendarModel, MonthViewOptions } from '../models';\r\nimport { getFirstDayOfMonth } from 'ngx-bootstrap/chronos';\r\nimport { getStartingDayOfCalendar } from '../utils/bs-calendar-utils';\r\nimport { createMatrix } from '../utils/matrix-utils';\r\n\r\nexport function calcDaysCalendar(\r\n  startingDate: Date,\r\n  options: MonthViewOptions\r\n): DaysCalendarModel {\r\n  const firstDay = getFirstDayOfMonth(startingDate);\r\n  const initialDate = getStartingDayOfCalendar(firstDay, options);\r\n\r\n  const matrixOptions = {\r\n    width: options.width,\r\n    height: options.height,\r\n    initialDate,\r\n    shift: { day: 1 }\r\n  };\r\n  const daysMatrix = createMatrix<Date>(matrixOptions, date => date);\r\n\r\n  return {\r\n    daysMatrix,\r\n    month: firstDay\r\n  };\r\n}\r\n","import {\r\n  DatepickerFormatOptions,\r\n  DaysCalendarModel,\r\n  DaysCalendarViewModel\r\n} from '../models';\r\nimport { formatDate, getLocale } from 'ngx-bootstrap/chronos';\r\n\r\nexport function formatDaysCalendar(daysCalendar: DaysCalendarModel,\r\n                                   formatOptions: DatepickerFormatOptions,\r\n                                   monthIndex: number): DaysCalendarViewModel {\r\n  return {\r\n    month: daysCalendar.month,\r\n    monthTitle: formatDate(\r\n      daysCalendar.month,\r\n      formatOptions.monthTitle,\r\n      formatOptions.locale\r\n    ),\r\n    yearTitle: formatDate(\r\n      daysCalendar.month,\r\n      formatOptions.yearTitle,\r\n      formatOptions.locale\r\n    ),\r\n    weekNumbers: getWeekNumbers(\r\n      daysCalendar.daysMatrix,\r\n      formatOptions.weekNumbers,\r\n      formatOptions.locale\r\n    ),\r\n    weekdays: getShiftedWeekdays(formatOptions.locale),\r\n    weeks: daysCalendar.daysMatrix.map((week: Date[], weekIndex: number) => ({\r\n      days: week.map((date: Date, dayIndex: number) => ({\r\n        date,\r\n        label: formatDate(date, formatOptions.dayLabel, formatOptions.locale),\r\n        monthIndex,\r\n        weekIndex,\r\n        dayIndex\r\n      }))\r\n    }))\r\n  };\r\n}\r\n\r\nexport function getWeekNumbers(daysMatrix: Date[][],\r\n                               format: string,\r\n                               locale: string): string[] {\r\n  return daysMatrix.map(\r\n    (days: Date[]) => (days[0] ? formatDate(days[0], format, locale) : '')\r\n  );\r\n}\r\n\r\nexport function getShiftedWeekdays(locale: string): string[] {\r\n  const _locale = getLocale(locale);\r\n  const weekdays = _locale.weekdaysShort() as string[];\r\n  const firstDayOfWeek = _locale.firstDayOfWeek();\r\n\r\n  return [...weekdays.slice(firstDayOfWeek), ...weekdays.slice(0, firstDayOfWeek)];\r\n}\r\n","import {\r\n  DaysCalendarViewModel,\r\n  DayViewModel,\r\n  WeekViewModel\r\n} from '../models';\r\n\r\nimport {\r\n  isAfter,\r\n  isBefore,\r\n  isDisabledDay,\r\n  isSameDay,\r\n  isSameMonth,\r\n  shiftDate\r\n} from 'ngx-bootstrap/chronos';\r\n\r\nimport { isMonthDisabled, isDisabledDate } from '../utils/bs-calendar-utils';\r\n\r\nexport interface FlagDaysCalendarOptions {\r\n  isDisabled: boolean;\r\n  minDate: Date;\r\n  maxDate: Date;\r\n  daysDisabled: number[];\r\n  datesDisabled: Date[];\r\n  hoveredDate: Date;\r\n  selectedDate: Date;\r\n  selectedRange: Date[];\r\n  displayMonths: number;\r\n  monthIndex: number;\r\n}\r\n\r\nexport function flagDaysCalendar(\r\n  formattedMonth: DaysCalendarViewModel,\r\n  options: FlagDaysCalendarOptions\r\n): DaysCalendarViewModel {\r\n  formattedMonth.weeks.forEach((week: WeekViewModel) => {\r\n    /* tslint:disable-next-line: cyclomatic-complexity */\r\n    week.days.forEach((day: DayViewModel, dayIndex: number) => {\r\n      // datepicker\r\n      const isOtherMonth = !isSameMonth(day.date, formattedMonth.month);\r\n\r\n      const isHovered =\r\n        !isOtherMonth && isSameDay(day.date, options.hoveredDate);\r\n      // date range picker\r\n      const isSelectionStart =\r\n        !isOtherMonth &&\r\n        options.selectedRange &&\r\n        isSameDay(day.date, options.selectedRange[0]);\r\n      const isSelectionEnd =\r\n        !isOtherMonth &&\r\n        options.selectedRange &&\r\n        isSameDay(day.date, options.selectedRange[1]);\r\n\r\n      const isSelected =\r\n        (!isOtherMonth && isSameDay(day.date, options.selectedDate)) ||\r\n        isSelectionStart ||\r\n        isSelectionEnd;\r\n\r\n      const isInRange =\r\n        !isOtherMonth &&\r\n        options.selectedRange &&\r\n        isDateInRange(day.date, options.selectedRange, options.hoveredDate);\r\n\r\n      const isDisabled =\r\n        options.isDisabled ||\r\n        isBefore(day.date, options.minDate, 'day') ||\r\n        isAfter(day.date, options.maxDate, 'day') ||\r\n        isDisabledDay(day.date, options.daysDisabled) ||\r\n        isDisabledDate(day.date, options.datesDisabled);\r\n\r\n      const currentDate = new Date();\r\n      const isToday = !isOtherMonth && isSameDay(day.date, currentDate);\r\n\r\n      // decide update or not\r\n      const newDay = Object.assign({}, day, {\r\n        isOtherMonth,\r\n        isHovered,\r\n        isSelected,\r\n        isSelectionStart,\r\n        isSelectionEnd,\r\n        isInRange,\r\n        isDisabled,\r\n        isToday\r\n      });\r\n\r\n      if (\r\n        day.isOtherMonth !== newDay.isOtherMonth ||\r\n        day.isHovered !== newDay.isHovered ||\r\n        day.isSelected !== newDay.isSelected ||\r\n        day.isSelectionStart !== newDay.isSelectionStart ||\r\n        day.isSelectionEnd !== newDay.isSelectionEnd ||\r\n        day.isDisabled !== newDay.isDisabled ||\r\n        day.isInRange !== newDay.isInRange\r\n      ) {\r\n        week.days[dayIndex] = newDay;\r\n      }\r\n    });\r\n  });\r\n\r\n  // todo: add check for linked calendars\r\n  formattedMonth.hideLeftArrow =\r\n    options.isDisabled ||\r\n    (options.monthIndex > 0 && options.monthIndex !== options.displayMonths);\r\n  formattedMonth.hideRightArrow =\r\n    options.isDisabled ||\r\n    (options.monthIndex < options.displayMonths &&\r\n      options.monthIndex + 1 !== options.displayMonths);\r\n\r\n  formattedMonth.disableLeftArrow = isMonthDisabled(\r\n    shiftDate(formattedMonth.month, { month: -1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n  formattedMonth.disableRightArrow = isMonthDisabled(\r\n    shiftDate(formattedMonth.month, { month: 1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n\r\n  return formattedMonth;\r\n}\r\n\r\nfunction isDateInRange(\r\n  date: Date,\r\n  selectedRange: Date[],\r\n  hoveredDate: Date\r\n): boolean {\r\n  if (!date || !selectedRange[0]) {\r\n    return false;\r\n  }\r\n\r\n  if (selectedRange[1]) {\r\n    return date > selectedRange[0] && date <= selectedRange[1];\r\n  }\r\n\r\n  if (hoveredDate) {\r\n    return date > selectedRange[0] && date <= hoveredDate;\r\n  }\r\n\r\n  return false;\r\n}\r\n","import { BsDatepickerViewMode } from '../models';\r\n\r\nexport function canSwitchMode(mode: BsDatepickerViewMode, minMode?: BsDatepickerViewMode): boolean {\r\n  return minMode ? mode >= minMode : true;\r\n}\r\n","import {\r\n  DatepickerFormatOptions,\r\n  MonthsCalendarViewModel,\r\n  CalendarCellViewModel\r\n} from '../models';\r\nimport { startOf, formatDate } from 'ngx-bootstrap/chronos';\r\nimport { createMatrix } from '../utils/matrix-utils';\r\n\r\nconst height = 4;\r\nconst width = 3;\r\nconst shift = { month: 1 };\r\n\r\nexport function formatMonthsCalendar(\r\n  viewDate: Date,\r\n  formatOptions: DatepickerFormatOptions\r\n): MonthsCalendarViewModel {\r\n  const initialDate = startOf(viewDate, 'year');\r\n  const matrixOptions = { width, height, initialDate, shift };\r\n  const monthMatrix = createMatrix<\r\n    CalendarCellViewModel\r\n  >(matrixOptions, date => ({\r\n    date,\r\n    label: formatDate(date, formatOptions.monthLabel, formatOptions.locale)\r\n  }));\r\n\r\n  return {\r\n    months: monthMatrix,\r\n    monthTitle: '',\r\n    yearTitle: formatDate(\r\n      viewDate,\r\n      formatOptions.yearTitle,\r\n      formatOptions.locale\r\n    )\r\n  };\r\n}\r\n","import {\r\n  DatepickerFormatOptions,\r\n  YearsCalendarViewModel,\r\n  CalendarCellViewModel\r\n} from '../models';\r\nimport { shiftDate, formatDate } from 'ngx-bootstrap/chronos';\r\nimport { createMatrix } from '../utils/matrix-utils';\r\n\r\nconst height = 4;\r\nconst width = 4;\r\nexport const yearsPerCalendar = height * width;\r\nconst initialShift = (Math.floor(yearsPerCalendar / 2) - 1) * -1;\r\nconst shift = { year: 1 };\r\n\r\nexport function formatYearsCalendar(\r\n  viewDate: Date,\r\n  formatOptions: DatepickerFormatOptions\r\n): YearsCalendarViewModel {\r\n  const initialDate = shiftDate(viewDate, { year: initialShift });\r\n  const matrixOptions = { width, height, initialDate, shift };\r\n  const yearsMatrix = createMatrix<\r\n    CalendarCellViewModel\r\n  >(matrixOptions, date => ({\r\n    date,\r\n    label: formatDate(date, formatOptions.yearLabel, formatOptions.locale)\r\n  }));\r\n  const yearTitle = formatYearRangeTitle(yearsMatrix, formatOptions);\r\n\r\n  return {\r\n    years: yearsMatrix,\r\n    monthTitle: '',\r\n    yearTitle\r\n  };\r\n}\r\n\r\nfunction formatYearRangeTitle(\r\n  yearsMatrix: CalendarCellViewModel[][],\r\n  formatOptions: DatepickerFormatOptions\r\n): string {\r\n  const from = formatDate(\r\n    yearsMatrix[0][0].date,\r\n    formatOptions.yearTitle,\r\n    formatOptions.locale\r\n  );\r\n  const to = formatDate(\r\n    yearsMatrix[height - 1][width - 1].date,\r\n    formatOptions.yearTitle,\r\n    formatOptions.locale\r\n  );\r\n\r\n  return `${from} - ${to}`;\r\n}\r\n","// tslint:disable:max-file-line-count\r\nimport { BsDatepickerState, initialDatepickerState } from './bs-datepicker.state';\r\nimport { Action } from 'ngx-bootstrap/mini-ngrx';\r\nimport { BsDatepickerActions } from './bs-datepicker.actions';\r\nimport { calcDaysCalendar } from '../engine/calc-days-calendar';\r\nimport { formatDaysCalendar } from '../engine/format-days-calendar';\r\nimport { flagDaysCalendar } from '../engine/flag-days-calendar';\r\nimport {\r\n  setFullDate,\r\n  shiftDate,\r\n  isArray,\r\n  isDateValid,\r\n  startOf,\r\n  getLocale,\r\n  isAfter,\r\n  isBefore\r\n} from 'ngx-bootstrap/chronos';\r\nimport { canSwitchMode } from '../engine/view-mode';\r\nimport { formatMonthsCalendar } from '../engine/format-months-calendar';\r\nimport { flagMonthsCalendar } from '../engine/flag-months-calendar';\r\nimport { formatYearsCalendar, yearsPerCalendar } from '../engine/format-years-calendar';\r\nimport { flagYearsCalendar } from '../engine/flag-years-calendar';\r\nimport { BsViewNavigationEvent, DatepickerFormatOptions, BsDatepickerViewMode } from '../models';\r\n\r\n\r\n/* tslint:disable-next-line: cyclomatic-complexity */\r\nexport function bsDatepickerReducer(state = initialDatepickerState,\r\n                                    action: Action): BsDatepickerState {\r\n  switch (action.type) {\r\n    case BsDatepickerActions.CALCULATE: {\r\n      return calculateReducer(state);\r\n    }\r\n\r\n    case BsDatepickerActions.FORMAT: {\r\n      return formatReducer(state, action);\r\n    }\r\n\r\n    case BsDatepickerActions.FLAG: {\r\n      return flagReducer(state, action);\r\n    }\r\n\r\n    case BsDatepickerActions.NAVIGATE_OFFSET: {\r\n      const date = shiftDate(startOf(state.view.date, 'month'), action.payload);\r\n      const newState = {\r\n        view: {\r\n          mode: state.view.mode,\r\n          date\r\n        }\r\n      };\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    case BsDatepickerActions.NAVIGATE_TO: {\r\n      const payload: BsViewNavigationEvent = action.payload;\r\n\r\n      const date = setFullDate(state.view.date, payload.unit);\r\n      let newState;\r\n      let mode: BsDatepickerViewMode;\r\n      if (canSwitchMode(payload.viewMode, state.minMode)) {\r\n        mode = payload.viewMode;\r\n        newState = { view: { date, mode } };\r\n      } else {\r\n        mode = state.view.mode;\r\n        newState = { selectedDate: date, view: { date, mode } };\r\n      }\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    case BsDatepickerActions.CHANGE_VIEWMODE: {\r\n      if (!canSwitchMode(action.payload, state.minMode)) {\r\n        return state;\r\n      }\r\n      const date = state.view.date;\r\n      const mode = action.payload;\r\n      const newState = { view: { date, mode } };\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    case BsDatepickerActions.HOVER: {\r\n      return Object.assign({}, state, { hoveredDate: action.payload });\r\n    }\r\n\r\n    case BsDatepickerActions.SELECT: {\r\n      const newState = {\r\n        selectedDate: action.payload,\r\n        view: state.view\r\n      };\r\n\r\n      const mode = state.view.mode;\r\n      const _date = action.payload || state.view.date;\r\n      const date = getViewDate(_date, state.minDate, state.maxDate);\r\n      newState.view = { mode, date };\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    case BsDatepickerActions.SET_OPTIONS: {\r\n      const newState = action.payload;\r\n      // preserve view mode\r\n      const mode = newState.minMode ? newState.minMode : state.view.mode;\r\n      const _viewDate = isDateValid(newState.value) && newState.value\r\n        || isArray(newState.value) && isDateValid(newState.value[0]) && newState.value[0]\r\n        || state.view.date;\r\n      const date = getViewDate(_viewDate, newState.minDate, newState.maxDate);\r\n      newState.view = { mode, date };\r\n      // update selected value\r\n      if (newState.value) {\r\n        // if new value is array we work with date range\r\n        if (isArray(newState.value)) {\r\n          newState.selectedRange = newState.value;\r\n        }\r\n\r\n        // if new value is a date -> datepicker\r\n        if (newState.value instanceof Date) {\r\n          newState.selectedDate = newState.value;\r\n        }\r\n\r\n        // provided value is not supported :)\r\n        // need to report it somehow\r\n      }\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    // date range picker\r\n    case BsDatepickerActions.SELECT_RANGE: {\r\n      const newState = {\r\n        selectedRange: action.payload,\r\n        view: state.view\r\n      };\r\n\r\n      const mode = state.view.mode;\r\n      const _date = action.payload && action.payload[0] || state.view.date;\r\n      const date = getViewDate(_date, state.minDate, state.maxDate);\r\n      newState.view = { mode, date };\r\n\r\n      return Object.assign({}, state, newState);\r\n    }\r\n\r\n    case BsDatepickerActions.SET_MIN_DATE: {\r\n      return Object.assign({}, state, {\r\n        minDate: action.payload\r\n      });\r\n    }\r\n    case BsDatepickerActions.SET_MAX_DATE: {\r\n      return Object.assign({}, state, {\r\n        maxDate: action.payload\r\n      });\r\n    }\r\n    case BsDatepickerActions.SET_IS_DISABLED: {\r\n      return Object.assign({}, state, {\r\n        isDisabled: action.payload\r\n      });\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction calculateReducer(state: BsDatepickerState): BsDatepickerState {\r\n  // how many calendars\r\n  const displayMonths = state.displayMonths;\r\n  // use selected date on initial rendering if set\r\n  let viewDate = state.view.date;\r\n\r\n  if (state.view.mode === 'day') {\r\n    state.monthViewOptions.firstDayOfWeek = getLocale(state.locale).firstDayOfWeek();\r\n    const monthsModel = new Array(displayMonths);\r\n    for (let monthIndex = 0; monthIndex < displayMonths; monthIndex++) {\r\n      // todo: for unlinked calendars it will be harder\r\n      monthsModel[monthIndex] = calcDaysCalendar(\r\n        viewDate,\r\n        state.monthViewOptions\r\n      );\r\n      viewDate = shiftDate(viewDate, { month: 1 });\r\n    }\r\n\r\n    return Object.assign({}, state, { monthsModel });\r\n  }\r\n\r\n  if (state.view.mode === 'month') {\r\n    const monthsCalendar = new Array(displayMonths);\r\n    for (\r\n      let calendarIndex = 0;\r\n      calendarIndex < displayMonths;\r\n      calendarIndex++\r\n    ) {\r\n      // todo: for unlinked calendars it will be harder\r\n      monthsCalendar[calendarIndex] = formatMonthsCalendar(\r\n        viewDate,\r\n        getFormatOptions(state)\r\n      );\r\n      viewDate = shiftDate(viewDate, { year: 1 });\r\n    }\r\n\r\n    return Object.assign({}, state, { monthsCalendar });\r\n  }\r\n\r\n  if (state.view.mode === 'year') {\r\n    const yearsCalendarModel = new Array(displayMonths);\r\n\r\n    for (\r\n      let calendarIndex = 0;\r\n      calendarIndex < displayMonths;\r\n      calendarIndex++\r\n    ) {\r\n      // todo: for unlinked calendars it will be harder\r\n      yearsCalendarModel[calendarIndex] = formatYearsCalendar(\r\n        viewDate,\r\n        getFormatOptions(state)\r\n      );\r\n      viewDate = shiftDate(viewDate, { year: yearsPerCalendar });\r\n    }\r\n\r\n    return Object.assign({}, state, { yearsCalendarModel });\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction formatReducer(state: BsDatepickerState,\r\n                       action: Action): BsDatepickerState {\r\n  if (state.view.mode === 'day') {\r\n    const formattedMonths = state.monthsModel.map((month, monthIndex) =>\r\n      formatDaysCalendar(month, getFormatOptions(state), monthIndex)\r\n    );\r\n\r\n    return Object.assign({}, state, { formattedMonths });\r\n  }\r\n\r\n  // how many calendars\r\n  const displayMonths = state.displayMonths;\r\n  // check initial rendering\r\n  // use selected date on initial rendering if set\r\n  let viewDate = state.view.date;\r\n\r\n  if (state.view.mode === 'month') {\r\n    const monthsCalendar = new Array(displayMonths);\r\n    for (\r\n      let calendarIndex = 0;\r\n      calendarIndex < displayMonths;\r\n      calendarIndex++\r\n    ) {\r\n      // todo: for unlinked calendars it will be harder\r\n      monthsCalendar[calendarIndex] = formatMonthsCalendar(\r\n        viewDate,\r\n        getFormatOptions(state)\r\n      );\r\n      viewDate = shiftDate(viewDate, { year: 1 });\r\n    }\r\n\r\n    return Object.assign({}, state, { monthsCalendar });\r\n  }\r\n\r\n  if (state.view.mode === 'year') {\r\n    const yearsCalendarModel = new Array(displayMonths);\r\n    for (\r\n      let calendarIndex = 0;\r\n      calendarIndex < displayMonths;\r\n      calendarIndex++\r\n    ) {\r\n      // todo: for unlinked calendars it will be harder\r\n      yearsCalendarModel[calendarIndex] = formatYearsCalendar(\r\n        viewDate,\r\n        getFormatOptions(state)\r\n      );\r\n      viewDate = shiftDate(viewDate, { year: 16 });\r\n    }\r\n\r\n    return Object.assign({}, state, { yearsCalendarModel });\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction flagReducer(state: BsDatepickerState,\r\n                     action: Action): BsDatepickerState {\r\n  if (state.view.mode === 'day') {\r\n    const flaggedMonths = state.formattedMonths.map(\r\n      (formattedMonth, monthIndex) =>\r\n        flagDaysCalendar(formattedMonth, {\r\n          isDisabled: state.isDisabled,\r\n          minDate: state.minDate,\r\n          maxDate: state.maxDate,\r\n          daysDisabled: state.daysDisabled,\r\n          datesDisabled: state.datesDisabled,\r\n          hoveredDate: state.hoveredDate,\r\n          selectedDate: state.selectedDate,\r\n          selectedRange: state.selectedRange,\r\n          displayMonths: state.displayMonths,\r\n          monthIndex\r\n        })\r\n    );\r\n\r\n    return Object.assign({}, state, { flaggedMonths });\r\n  }\r\n\r\n  if (state.view.mode === 'month') {\r\n    const flaggedMonthsCalendar = state.monthsCalendar.map(\r\n      (formattedMonth, monthIndex) =>\r\n        flagMonthsCalendar(formattedMonth, {\r\n          isDisabled: state.isDisabled,\r\n          minDate: state.minDate,\r\n          maxDate: state.maxDate,\r\n          hoveredMonth: state.hoveredMonth,\r\n          displayMonths: state.displayMonths,\r\n          monthIndex\r\n        })\r\n    );\r\n\r\n    return Object.assign({}, state, { flaggedMonthsCalendar });\r\n  }\r\n\r\n  if (state.view.mode === 'year') {\r\n    const yearsCalendarFlagged = state.yearsCalendarModel.map(\r\n      (formattedMonth, yearIndex) =>\r\n        flagYearsCalendar(formattedMonth, {\r\n          isDisabled: state.isDisabled,\r\n          minDate: state.minDate,\r\n          maxDate: state.maxDate,\r\n          hoveredYear: state.hoveredYear,\r\n          displayMonths: state.displayMonths,\r\n          yearIndex\r\n        })\r\n    );\r\n\r\n    return Object.assign({}, state, { yearsCalendarFlagged });\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction getFormatOptions(state: BsDatepickerState): DatepickerFormatOptions {\r\n  return {\r\n    locale: state.locale,\r\n\r\n    monthTitle: state.monthTitle,\r\n    yearTitle: state.yearTitle,\r\n\r\n    dayLabel: state.dayLabel,\r\n    monthLabel: state.monthLabel,\r\n    yearLabel: state.yearLabel,\r\n\r\n    weekNumbers: state.weekNumbers\r\n  };\r\n}\r\n\r\n/**\r\n * if view date is provided (bsValue|ngModel) it should be shown\r\n * if view date is not provider:\r\n * if minDate>currentDate (default view value), show minDate\r\n * if maxDate<currentDate(default view value) show maxDate\r\n */\r\nfunction getViewDate(viewDate: Date | Date[], minDate: Date, maxDate: Date) {\r\n  const _date = Array.isArray(viewDate) ? viewDate[0] : viewDate;\r\n\r\n  if (minDate && isAfter(minDate, _date, 'day')) {\r\n    return minDate;\r\n  }\r\n\r\n  if (maxDate && isBefore(maxDate, _date, 'day')) {\r\n    return maxDate;\r\n  }\r\n\r\n  return _date;\r\n}\r\n","import { isSameMonth, shiftDate } from 'ngx-bootstrap/chronos';\r\nimport {\r\n  MonthsCalendarViewModel,\r\n  CalendarCellViewModel\r\n} from '../models';\r\nimport { isMonthDisabled, isYearDisabled } from '../utils/bs-calendar-utils';\r\n\r\nexport interface FlagMonthCalendarOptions {\r\n  isDisabled: boolean;\r\n  minDate: Date;\r\n  maxDate: Date;\r\n  hoveredMonth: Date;\r\n  displayMonths: number;\r\n  monthIndex: number;\r\n}\r\n\r\nexport function flagMonthsCalendar(\r\n  monthCalendar: MonthsCalendarViewModel,\r\n  options: FlagMonthCalendarOptions\r\n): MonthsCalendarViewModel {\r\n  monthCalendar.months.forEach(\r\n    (months: CalendarCellViewModel[], rowIndex: number) => {\r\n      months.forEach((month: CalendarCellViewModel, monthIndex: number) => {\r\n        const isHovered = isSameMonth(month.date, options.hoveredMonth);\r\n        const isDisabled =\r\n          options.isDisabled ||\r\n          isMonthDisabled(month.date, options.minDate, options.maxDate);\r\n        const newMonth = Object.assign(/*{},*/ month, {\r\n          isHovered,\r\n          isDisabled\r\n        });\r\n        if (\r\n          month.isHovered !== newMonth.isHovered ||\r\n          month.isDisabled !== newMonth.isDisabled\r\n        ) {\r\n          monthCalendar.months[rowIndex][monthIndex] = newMonth;\r\n        }\r\n      });\r\n    }\r\n  );\r\n\r\n  // todo: add check for linked calendars\r\n  monthCalendar.hideLeftArrow =\r\n    options.monthIndex > 0 && options.monthIndex !== options.displayMonths;\r\n  monthCalendar.hideRightArrow =\r\n    options.monthIndex < options.displayMonths &&\r\n    options.monthIndex + 1 !== options.displayMonths;\r\n\r\n  monthCalendar.disableLeftArrow = isYearDisabled(\r\n    shiftDate(monthCalendar.months[0][0].date, { year: -1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n  monthCalendar.disableRightArrow = isYearDisabled(\r\n    shiftDate(monthCalendar.months[0][0].date, { year: 1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n\r\n  return monthCalendar;\r\n}\r\n","import { isSameYear, shiftDate } from 'ngx-bootstrap/chronos';\r\nimport { YearsCalendarViewModel, CalendarCellViewModel } from '../models';\r\nimport { isYearDisabled } from '../utils/bs-calendar-utils';\r\n\r\nexport interface FlagYearsCalendarOptions {\r\n  isDisabled: boolean;\r\n  minDate: Date;\r\n  maxDate: Date;\r\n  hoveredYear: Date;\r\n  displayMonths: number;\r\n  yearIndex: number;\r\n}\r\n\r\nexport function flagYearsCalendar(\r\n  yearsCalendar: YearsCalendarViewModel,\r\n  options: FlagYearsCalendarOptions\r\n): YearsCalendarViewModel {\r\n  yearsCalendar.years.forEach(\r\n    (years: CalendarCellViewModel[], rowIndex: number) => {\r\n      years.forEach((year: CalendarCellViewModel, yearIndex: number) => {\r\n        const isHovered = isSameYear(year.date, options.hoveredYear);\r\n        const isDisabled =\r\n          options.isDisabled ||\r\n          isYearDisabled(year.date, options.minDate, options.maxDate);\r\n\r\n        const newMonth = Object.assign(/*{},*/ year, { isHovered, isDisabled });\r\n        if (\r\n          year.isHovered !== newMonth.isHovered ||\r\n          year.isDisabled !== newMonth.isDisabled\r\n        ) {\r\n          yearsCalendar.years[rowIndex][yearIndex] = newMonth;\r\n        }\r\n      });\r\n    }\r\n  );\r\n\r\n  // todo: add check for linked calendars\r\n  yearsCalendar.hideLeftArrow =\r\n    options.yearIndex > 0 && options.yearIndex !== options.displayMonths;\r\n  yearsCalendar.hideRightArrow =\r\n    options.yearIndex < options.displayMonths &&\r\n    options.yearIndex + 1 !== options.displayMonths;\r\n\r\n  yearsCalendar.disableLeftArrow = isYearDisabled(\r\n    shiftDate(yearsCalendar.years[0][0].date, { year: -1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n  const i = yearsCalendar.years.length - 1;\r\n  const j = yearsCalendar.years[i].length - 1;\r\n  yearsCalendar.disableRightArrow = isYearDisabled(\r\n    shiftDate(yearsCalendar.years[i][j].date, { year: 1 }),\r\n    options.minDate,\r\n    options.maxDate\r\n  );\r\n\r\n  return yearsCalendar;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MiniStore, Action, MiniState } from 'ngx-bootstrap/mini-ngrx';\r\nimport { BsDatepickerState, initialDatepickerState } from './bs-datepicker.state';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { bsDatepickerReducer } from './bs-datepicker.reducer';\r\n\r\n@Injectable()\r\nexport class BsDatepickerStore extends MiniStore<BsDatepickerState> {\r\n  constructor() {\r\n    const _dispatcher = new BehaviorSubject<Action>({\r\n      type: '[datepicker] dispatcher init'\r\n    });\r\n    const state = new MiniState<BsDatepickerState>(\r\n      initialDatepickerState,\r\n      _dispatcher,\r\n      bsDatepickerReducer\r\n    );\r\n    super(_dispatcher, bsDatepickerReducer, state);\r\n  }\r\n}\r\n","import { Component, EventEmitter, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { BsDatepickerAbstractComponent } from '../../base/bs-datepicker-container';\r\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\r\nimport { DayViewModel } from '../../models';\r\nimport { BsDatepickerActions } from '../../reducer/bs-datepicker.actions';\r\nimport { BsDatepickerEffects } from '../../reducer/bs-datepicker.effects';\r\nimport { BsDatepickerStore } from '../../reducer/bs-datepicker.store';\r\nimport { PositioningService } from 'ngx-bootstrap/positioning';\r\n\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'bs-datepicker-container',\r\n  providers: [BsDatepickerStore, BsDatepickerEffects],\r\n  templateUrl: './bs-datepicker-view.html',\r\n  host: {\r\n    '(click)': '_stopPropagation($event)',\r\n    style: 'position: absolute; display: block;',\r\n    role: 'dialog',\r\n    'aria-label': 'calendar'\r\n  }\r\n})\r\nexport class BsDatepickerContainerComponent extends BsDatepickerAbstractComponent\r\n  implements OnInit, OnDestroy {\r\n  set value(value: Date) {\r\n    this._effects.setValue(value);\r\n  }\r\n  valueChange: EventEmitter<Date> = new EventEmitter<Date>();\r\n\r\n  _subs: Subscription[] = [];\r\n  constructor(\r\n    private _config: BsDatepickerConfig,\r\n    private _store: BsDatepickerStore,\r\n    private _actions: BsDatepickerActions,\r\n    _effects: BsDatepickerEffects,\r\n    private _positionService: PositioningService\r\n  ) {\r\n    super();\r\n    this._effects = _effects;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this._positionService.setOptions({\r\n      modifiers: {\r\n        flip: {\r\n          enabled: this._config.adaptivePosition\r\n        }\r\n      }\r\n    });\r\n\r\n    this.isOtherMonthsActive = this._config.selectFromOtherMonth;\r\n    this.containerClass = this._config.containerClass;\r\n    this._effects\r\n      .init(this._store)\r\n      // intial state options\r\n      .setOptions(this._config)\r\n      // data binding view --> model\r\n      .setBindings(this)\r\n      // set event handlers\r\n      .setEventHandlers(this)\r\n      .registerDatepickerSideEffects();\r\n\r\n    // todo: move it somewhere else\r\n    // on selected date change\r\n    this._subs.push(\r\n      this._store\r\n        /* tslint:disable-next-line: no-any */\r\n        .select((state: any) => state.selectedDate)\r\n        /* tslint:disable-next-line: no-any */\r\n        .subscribe((date: any) => this.valueChange.emit(date))\r\n    );\r\n  }\r\n\r\n  daySelectHandler(day: DayViewModel): void {\r\n    const isDisabled = this.isOtherMonthsActive ? day.isDisabled : (day.isOtherMonth || day.isDisabled);\r\n\r\n    if (isDisabled) {\r\n      return;\r\n    }\r\n\r\n    this._store.dispatch(this._actions.select(day.date));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n    this._effects.destroy();\r\n  }\r\n}\r\n","import {\r\n  ComponentRef, Directive, ElementRef, EventEmitter, Input, OnChanges,\r\n  OnDestroy, OnInit, Output, Renderer2, SimpleChanges, ViewContainerRef\r\n} from '@angular/core';\r\nimport { ComponentLoader, ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\r\nimport { BsDatepickerContainerComponent } from './themes/bs/bs-datepicker-container.component';\r\nimport { Subscription } from 'rxjs';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\nimport { BsDatepickerViewMode } from './models';\r\n\r\n@Directive({\r\n  selector: '[bsDatepicker]',\r\n  exportAs: 'bsDatepicker'\r\n})\r\nexport class BsDatepickerDirective implements OnInit, OnDestroy, OnChanges {\r\n  /**\r\n   * Placement of a datepicker. Accepts: \"top\", \"bottom\", \"left\", \"right\"\r\n   */\r\n  @Input() placement: 'top' | 'bottom' | 'left' | 'right' = 'bottom';\r\n  /**\r\n   * Specifies events that should trigger. Supports a space separated list of\r\n   * event names.\r\n   */\r\n  @Input() triggers = 'click';\r\n  /**\r\n   * Close datepicker on outside click\r\n   */\r\n  @Input() outsideClick = true;\r\n  /**\r\n   * A selector specifying the element the datepicker should be appended to.\r\n   * Currently only supports \"body\".\r\n   */\r\n  @Input() container = 'body';\r\n\r\n  @Input() outsideEsc = true;\r\n\r\n  /**\r\n   * Returns whether or not the datepicker is currently being shown\r\n   */\r\n  @Input()\r\n  get isOpen(): boolean {\r\n    return this._datepicker.isShown;\r\n  }\r\n\r\n  set isOpen(value: boolean) {\r\n    if (value) {\r\n      this.show();\r\n    } else {\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Emits an event when the datepicker is shown\r\n   */\r\n  /* tslint:disable-next-line: no-any*/\r\n  @Output() onShown: EventEmitter<any>;\r\n  /**\r\n   * Emits an event when the datepicker is hidden\r\n   */\r\n  /* tslint:disable-next-line: no-any*/\r\n  @Output() onHidden: EventEmitter<any>;\r\n\r\n  _bsValue: Date;\r\n  /**\r\n   * Initial value of datepicker\r\n   */\r\n  @Input()\r\n  set bsValue(value: Date) {\r\n    if (this._bsValue === value) {\r\n      return;\r\n    }\r\n    this._bsValue = value;\r\n    this.bsValueChange.emit(value);\r\n  }\r\n\r\n  /**\r\n   * Config object for datepicker\r\n   */\r\n  @Input() bsConfig: Partial<BsDatepickerConfig>;\r\n  /**\r\n   * Indicates whether datepicker's content is enabled or not\r\n   */\r\n  @Input() isDisabled: boolean;\r\n  /**\r\n   * Minimum date which is available for selection\r\n   */\r\n  @Input() minDate: Date;\r\n  /**\r\n   * Maximum date which is available for selection\r\n   */\r\n  @Input() maxDate: Date;\r\n\r\n  /**\r\n   * Minimum view mode : day, month, or year\r\n   */\r\n  @Input() minMode: BsDatepickerViewMode;\r\n\r\n  /**\r\n   * Disable Certain days in the week\r\n   */\r\n  @Input() daysDisabled: number[];\r\n\r\n  /**\r\n   * Disable specific dates\r\n   */\r\n  @Input() datesDisabled: Date[];\r\n  /**\r\n   * Emits when datepicker value has been changed\r\n   */\r\n  @Output() bsValueChange: EventEmitter<Date> = new EventEmitter();\r\n\r\n  protected _subs: Subscription[] = [];\r\n\r\n  private _datepicker: ComponentLoader<BsDatepickerContainerComponent>;\r\n  private _datepickerRef: ComponentRef<BsDatepickerContainerComponent>;\r\n\r\n  constructor(public _config: BsDatepickerConfig,\r\n              _elementRef: ElementRef,\r\n              _renderer: Renderer2,\r\n              _viewContainerRef: ViewContainerRef,\r\n              cis: ComponentLoaderFactory) {\r\n    // todo: assign only subset of fields\r\n    Object.assign(this, this._config);\r\n    this._datepicker = cis.createLoader<BsDatepickerContainerComponent>(\r\n      _elementRef,\r\n      _viewContainerRef,\r\n      _renderer\r\n    );\r\n    this.onShown = this._datepicker.onShown;\r\n    this.onHidden = this._datepicker.onHidden;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this._datepicker.listen({\r\n      outsideClick: this.outsideClick,\r\n      outsideEsc: this.outsideEsc,\r\n      triggers: this.triggers,\r\n      show: () => this.show()\r\n    });\r\n    this.setConfig();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (!this._datepickerRef || !this._datepickerRef.instance) {\r\n      return;\r\n    }\r\n\r\n    if (changes.minDate) {\r\n      this._datepickerRef.instance.minDate = this.minDate;\r\n    }\r\n\r\n    if (changes.maxDate) {\r\n      this._datepickerRef.instance.maxDate = this.maxDate;\r\n    }\r\n\r\n    if (changes.daysDisabled) {\r\n      this._datepickerRef.instance.daysDisabled = this.daysDisabled;\r\n    }\r\n\r\n    if (changes.datesDisabled) {\r\n      this._datepickerRef.instance.datesDisabled = this.datesDisabled;\r\n    }\r\n\r\n    if (changes.isDisabled) {\r\n      this._datepickerRef.instance.isDisabled = this.isDisabled;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens an elements datepicker. This is considered a manual triggering of\r\n   * the datepicker.\r\n   */\r\n  show(): void {\r\n    if (this._datepicker.isShown) {\r\n      return;\r\n    }\r\n\r\n    this.setConfig();\r\n\r\n    this._datepickerRef = this._datepicker\r\n      .provide({provide: BsDatepickerConfig, useValue: this._config})\r\n      .attach(BsDatepickerContainerComponent)\r\n      .to(this.container)\r\n      .position({attachment: this.placement})\r\n      .show({placement: this.placement});\r\n\r\n    // if date changes from external source (model -> view)\r\n    this._subs.push(\r\n      this.bsValueChange.subscribe((value: Date) => {\r\n        this._datepickerRef.instance.value = value;\r\n      })\r\n    );\r\n\r\n    // if date changes from picker (view -> model)\r\n    this._subs.push(\r\n      this._datepickerRef.instance.valueChange.subscribe((value: Date) => {\r\n        this.bsValue = value;\r\n        this.hide();\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Closes an elements datepicker. This is considered a manual triggering of\r\n   * the datepicker.\r\n   */\r\n  hide(): void {\r\n    if (this.isOpen) {\r\n      this._datepicker.hide();\r\n    }\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles an elements datepicker. This is considered a manual triggering\r\n   * of the datepicker.\r\n   */\r\n  toggle(): void {\r\n    if (this.isOpen) {\r\n      return this.hide();\r\n    }\r\n\r\n    this.show();\r\n  }\r\n\r\n  /**\r\n   * Set config for datepicker\r\n   */\r\n  setConfig(): void {\r\n    this._config = Object.assign({}, this._config, this.bsConfig, {\r\n      value: this._bsValue,\r\n      isDisabled: this.isDisabled,\r\n      minDate: this.minDate || this.bsConfig && this.bsConfig.minDate,\r\n      maxDate: this.maxDate || this.bsConfig && this.bsConfig.maxDate,\r\n      daysDisabled: this.daysDisabled || this.bsConfig && this.bsConfig.daysDisabled,\r\n      datesDisabled: this.datesDisabled || this.bsConfig && this.bsConfig.datesDisabled,\r\n      minMode: this.minMode || this.bsConfig && this.bsConfig.minMode\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._datepicker.dispose();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\n\r\n@Injectable()\r\nexport class BsDatepickerInlineConfig extends BsDatepickerConfig { }\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { BsDatepickerContainerComponent } from './bs-datepicker-container.component';\r\n\r\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\r\nimport { BsDatepickerActions } from '../../reducer/bs-datepicker.actions';\r\nimport { BsDatepickerEffects } from '../../reducer/bs-datepicker.effects';\r\nimport { BsDatepickerStore } from '../../reducer/bs-datepicker.store';\r\n\r\nimport { PositioningService } from 'ngx-bootstrap/positioning';\r\n\r\n@Component({\r\n  selector: 'bs-datepicker-inline-container',\r\n  providers: [BsDatepickerStore, BsDatepickerEffects],\r\n  templateUrl: './bs-datepicker-view.html',\r\n  host: {\r\n    '(click)': '_stopPropagation($event)',\r\n    style: 'display: inline-block;'\r\n  }\r\n})\r\nexport class BsDatepickerInlineContainerComponent extends BsDatepickerContainerComponent\r\n  implements OnInit, OnDestroy {\r\n  constructor(\r\n    _config: BsDatepickerConfig,\r\n    _store: BsDatepickerStore,\r\n    _actions: BsDatepickerActions,\r\n    _effects: BsDatepickerEffects,\r\n    _positioningService: PositioningService\r\n  ) {\r\n    super(_config, _store, _actions, _effects, _positioningService);\r\n  }\r\n}\r\n","import {\r\n  ComponentRef, Directive, ElementRef, EventEmitter, Input, OnChanges,\r\n  OnDestroy, OnInit, Output, Renderer2, SimpleChanges, ViewContainerRef\r\n} from '@angular/core';\r\nimport { ComponentLoader, ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\r\nimport { BsDatepickerInlineContainerComponent } from './themes/bs/bs-datepicker-inline-container.component';\r\nimport { Subscription } from 'rxjs';\r\nimport { BsDatepickerInlineConfig } from './bs-datepicker-inline.config';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\n\r\n@Directive({\r\n  selector: 'bs-datepicker-inline',\r\n  exportAs: 'bsDatepickerInline'\r\n})\r\nexport class BsDatepickerInlineDirective implements OnInit, OnDestroy, OnChanges {\r\n  _bsValue: Date;\r\n  /**\r\n   * Initial value of datepicker\r\n   */\r\n  @Input()\r\n  set bsValue(value: Date) {\r\n    if (this._bsValue === value) {\r\n      return;\r\n    }\r\n    this._bsValue = value;\r\n    this.bsValueChange.emit(value);\r\n  }\r\n\r\n  /**\r\n   * Config object for datepicker\r\n   */\r\n  @Input() bsConfig: Partial<BsDatepickerInlineConfig>;\r\n  /**\r\n   * Indicates whether datepicker is enabled or not\r\n   */\r\n  @Input() isDisabled: boolean;\r\n  /**\r\n   * Minimum date which is available for selection\r\n   */\r\n  @Input() minDate: Date;\r\n  /**\r\n   * Maximum date which is available for selection\r\n   */\r\n  @Input() maxDate: Date;\r\n  /**\r\n   * Disable specific dates\r\n   */\r\n  @Input() datesDisabled: Date[];\r\n  /**\r\n   * Emits when datepicker value has been changed\r\n   */\r\n  @Output() bsValueChange: EventEmitter<Date> = new EventEmitter();\r\n\r\n  protected _subs: Subscription[] = [];\r\n\r\n  private _datepicker: ComponentLoader<BsDatepickerInlineContainerComponent>;\r\n  private _datepickerRef: ComponentRef<BsDatepickerInlineContainerComponent>;\r\n\r\n  constructor(public _config: BsDatepickerInlineConfig,\r\n              private _elementRef: ElementRef,\r\n              _renderer: Renderer2,\r\n              _viewContainerRef: ViewContainerRef,\r\n              cis: ComponentLoaderFactory) {\r\n    // todo: assign only subset of fields\r\n    Object.assign(this, this._config);\r\n    this._datepicker = cis.createLoader<BsDatepickerInlineContainerComponent>(\r\n      _elementRef,\r\n      _viewContainerRef,\r\n      _renderer\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.setConfig();\r\n\r\n    this._datepickerRef = this._datepicker\r\n      .provide({provide: BsDatepickerConfig, useValue: this._config})\r\n      .attach(BsDatepickerInlineContainerComponent)\r\n      .to(this._elementRef)\r\n      .show();\r\n\r\n    // if date changes from external source (model -> view)\r\n    this._subs.push(\r\n      this.bsValueChange.subscribe((value: Date) => {\r\n        this._datepickerRef.instance.value = value;\r\n      })\r\n    );\r\n\r\n    // if date changes from picker (view -> model)\r\n    this._subs.push(\r\n      this._datepickerRef.instance.valueChange.subscribe((value: Date) => {\r\n        this.bsValue = value;\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (!this._datepickerRef || !this._datepickerRef.instance) {\r\n      return;\r\n    }\r\n\r\n    if (changes.minDate) {\r\n      this._datepickerRef.instance.minDate = this.minDate;\r\n    }\r\n\r\n    if (changes.maxDate) {\r\n      this._datepickerRef.instance.maxDate = this.maxDate;\r\n    }\r\n\r\n    if (changes.datesDisabled) {\r\n      this._datepickerRef.instance.datesDisabled = this.datesDisabled;\r\n    }\r\n\r\n    if (changes.isDisabled) {\r\n      this._datepickerRef.instance.isDisabled = this.isDisabled;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set config for datepicker\r\n   */\r\n  setConfig(): void {\r\n    this._config = Object.assign({}, this._config, this.bsConfig, {\r\n      value: this._bsValue,\r\n      isDisabled: this.isDisabled,\r\n      minDate: this.minDate || this.bsConfig && this.bsConfig.minDate,\r\n      maxDate: this.maxDate || this.bsConfig && this.bsConfig.maxDate,\r\n      datesDisabled: this.datesDisabled || this.bsConfig && this.bsConfig.datesDisabled\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): any {\r\n    this._datepicker.dispose();\r\n  }\r\n}\r\n","import {\r\n  ChangeDetectorRef,\r\n  Directive,\r\n  ElementRef,\r\n  forwardRef,\r\n  Host,\r\n  Provider,\r\n  Renderer2\r\n} from '@angular/core';\r\n\r\nimport {\r\n  AbstractControl,\r\n  ControlValueAccessor,\r\n  NG_VALIDATORS,\r\n  NG_VALUE_ACCESSOR,\r\n  ValidationErrors,\r\n  Validator\r\n} from '@angular/forms';\r\n\r\nimport {\r\n  parseDate,\r\n  formatDate,\r\n  getLocale,\r\n  isAfter,\r\n  isBefore,\r\n  isDate,\r\n  isDateValid\r\n} from 'ngx-bootstrap/chronos';\r\n\r\nimport { BsDatepickerDirective } from './bs-datepicker.component';\r\nimport { BsLocaleService } from './bs-locale.service';\r\n\r\nconst BS_DATEPICKER_VALUE_ACCESSOR: Provider = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => BsDatepickerInputDirective),\r\n  multi: true\r\n};\r\n\r\nconst BS_DATEPICKER_VALIDATOR: Provider = {\r\n  provide: NG_VALIDATORS,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => BsDatepickerInputDirective),\r\n  multi: true\r\n};\r\n\r\n@Directive({\r\n  selector: `input[bsDatepicker]`,\r\n  host: {\r\n    '(change)': 'onChange($event)',\r\n    '(keyup.esc)': 'hide()',\r\n    '(blur)': 'onBlur()'\r\n  },\r\n  providers: [BS_DATEPICKER_VALUE_ACCESSOR, BS_DATEPICKER_VALIDATOR]\r\n})\r\nexport class BsDatepickerInputDirective\r\n  implements ControlValueAccessor, Validator {\r\n  private _onChange = Function.prototype;\r\n  private _onTouched = Function.prototype;\r\n  /* tslint:disable-next-line: no-unused-variable */\r\n  private _validatorChange = Function.prototype;\r\n  private _value: Date;\r\n\r\n  constructor(@Host() private _picker: BsDatepickerDirective,\r\n              private _localeService: BsLocaleService,\r\n              private _renderer: Renderer2,\r\n              private _elRef: ElementRef,\r\n              private changeDetection: ChangeDetectorRef) {\r\n    // update input value on datepicker value update\r\n    this._picker.bsValueChange.subscribe((value: Date) => {\r\n      this._setInputValue(value);\r\n      if (this._value !== value) {\r\n        this._value = value;\r\n        this._onChange(value);\r\n        this._onTouched();\r\n      }\r\n      this.changeDetection.markForCheck();\r\n    });\r\n\r\n    // update input value on locale change\r\n    this._localeService.localeChange.subscribe(() => {\r\n      this._setInputValue(this._value);\r\n    });\r\n  }\r\n\r\n  _setInputValue(value: Date): void {\r\n    const initialDate = !value ? ''\r\n      : formatDate(value, this._picker._config.dateInputFormat, this._localeService.currentLocale);\r\n\r\n    this._renderer.setProperty(this._elRef.nativeElement, 'value', initialDate);\r\n  }\r\n\r\n  onChange(event: Event) {\r\n    /* tslint:disable-next-line: no-any*/\r\n    this.writeValue((event.target as any).value);\r\n    this._onChange(this._value);\r\n    this._onTouched();\r\n  }\r\n\r\n  validate(c: AbstractControl): ValidationErrors | null {\r\n    const _value: Date | string = c.value;\r\n\r\n    /* tslint:disable-next-line: prefer-switch */\r\n    if (_value === null || _value === undefined || _value === '') {\r\n      return null;\r\n    }\r\n\r\n    if (isDate(_value)) {\r\n      const _isDateValid = isDateValid(_value);\r\n      if (!_isDateValid) {\r\n        return { bsDate: { invalid: _value } };\r\n      }\r\n\r\n      if (this._picker && this._picker.minDate && isBefore(_value, this._picker.minDate, 'date')) {\r\n        return { bsDate: { minDate: this._picker.minDate } };\r\n      }\r\n\r\n      if (this._picker && this._picker.maxDate && isAfter(_value, this._picker.maxDate, 'date')) {\r\n        return { bsDate: { maxDate: this._picker.maxDate } };\r\n      }\r\n    }\r\n  }\r\n\r\n  registerOnValidatorChange(fn: () => void): void {\r\n    this._validatorChange = fn;\r\n  }\r\n\r\n  writeValue(value: Date | string) {\r\n    if (!value) {\r\n      this._value = null;\r\n    } else {\r\n      const _localeKey = this._localeService.currentLocale;\r\n      const _locale = getLocale(_localeKey);\r\n      if (!_locale) {\r\n        throw new Error(\r\n          `Locale \"${_localeKey}\" is not defined, please add it with \"defineLocale(...)\"`\r\n        );\r\n      }\r\n      this._value = parseDate(value, this._picker._config.dateInputFormat, this._localeService.currentLocale);\r\n    }\r\n\r\n    this._picker.bsValue = this._value;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this._picker.isDisabled = isDisabled;\r\n    if (isDisabled) {\r\n      this._renderer.setAttribute(this._elRef.nativeElement, 'disabled', 'disabled');\r\n\r\n      return;\r\n    }\r\n    this._renderer.removeAttribute(this._elRef.nativeElement, 'disabled');\r\n  }\r\n\r\n  registerOnChange(fn: () => void): void {\r\n    this._onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: () => void): void {\r\n    this._onTouched = fn;\r\n  }\r\n\r\n  onBlur() {\r\n    this._onTouched();\r\n  }\r\n\r\n  hide() {\r\n    this._picker.hide();\r\n    this._renderer.selectRootElement(this._elRef.nativeElement).blur();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\n\r\n@Injectable()\r\nexport class BsDaterangepickerConfig extends BsDatepickerConfig {\r\n  // DatepickerRenderOptions\r\n  displayMonths = 2;\r\n}\r\n","import { Component, EventEmitter, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { BsDatepickerAbstractComponent } from '../../base/bs-datepicker-container';\r\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\r\nimport { DayViewModel } from '../../models';\r\nimport { BsDatepickerActions } from '../../reducer/bs-datepicker.actions';\r\nimport { BsDatepickerEffects } from '../../reducer/bs-datepicker.effects';\r\nimport { BsDatepickerStore } from '../../reducer/bs-datepicker.store';\r\nimport { PositioningService } from 'ngx-bootstrap/positioning';\r\n\r\nimport { Subscription } from 'rxjs';\r\n\r\n\r\n@Component({\r\n  selector: 'bs-daterangepicker-container',\r\n  providers: [BsDatepickerStore, BsDatepickerEffects],\r\n  templateUrl: './bs-datepicker-view.html',\r\n  host: {\r\n    '(click)': '_stopPropagation($event)',\r\n    style: 'position: absolute; display: block;',\r\n    role: 'dialog',\r\n    'aria-label': 'calendar'\r\n  }\r\n})\r\nexport class BsDaterangepickerContainerComponent extends BsDatepickerAbstractComponent\r\n  implements OnInit, OnDestroy {\r\n  set value(value: Date[]) {\r\n    this._effects.setRangeValue(value);\r\n  }\r\n\r\n  valueChange = new EventEmitter<Date[]>();\r\n\r\n  _rangeStack: Date[] = [];\r\n  _subs: Subscription[] = [];\r\n  constructor(\r\n    _effects: BsDatepickerEffects,\r\n    private _actions: BsDatepickerActions,\r\n    private _config: BsDatepickerConfig,\r\n    private _store: BsDatepickerStore,\r\n    private _positionService: PositioningService\r\n  ) {\r\n    super();\r\n    this._effects = _effects;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this._positionService.setOptions({\r\n      modifiers: {\r\n        flip: {\r\n          enabled: this._config.adaptivePosition\r\n        }\r\n      }\r\n    });\r\n\r\n    this.containerClass = this._config.containerClass;\r\n    this.isOtherMonthsActive = this._config.selectFromOtherMonth;\r\n    this._effects\r\n      .init(this._store)\r\n      // intial state options\r\n      // todo: fix this, split configs\r\n      .setOptions(this._config)\r\n      // data binding view --> model\r\n      .setBindings(this)\r\n      // set event handlers\r\n      .setEventHandlers(this)\r\n      .registerDatepickerSideEffects();\r\n\r\n    // todo: move it somewhere else\r\n    // on selected date change\r\n    this._subs.push(\r\n      this._store\r\n        .select(state => state.selectedRange)\r\n        .subscribe(date => this.valueChange.emit(date))\r\n    );\r\n  }\r\n\r\n  daySelectHandler(day: DayViewModel): void {\r\n    const isDisabled = this.isOtherMonthsActive ? day.isDisabled : (day.isOtherMonth || day.isDisabled);\r\n\r\n    if (isDisabled) {\r\n      return;\r\n    }\r\n\r\n    // if only one date is already selected\r\n    // and user clicks on previous date\r\n    // start selection from new date\r\n    // but if new date is after initial one\r\n    // than finish selection\r\n    if (this._rangeStack.length === 1) {\r\n      this._rangeStack =\r\n        day.date >= this._rangeStack[0]\r\n          ? [this._rangeStack[0], day.date]\r\n          : [day.date];\r\n    }\r\n\r\n    if (this._rangeStack.length === 0) {\r\n      this._rangeStack = [day.date];\r\n    }\r\n\r\n    this._store.dispatch(this._actions.selectRange(this._rangeStack));\r\n\r\n    if (this._rangeStack.length === 2) {\r\n      this._rangeStack = [];\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n    this._effects.destroy();\r\n  }\r\n}\r\n","import {\r\n  ComponentRef,\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  ViewContainerRef\r\n} from '@angular/core';\r\nimport { BsDaterangepickerConfig } from './bs-daterangepicker.config';\r\nimport { BsDaterangepickerContainerComponent } from './themes/bs/bs-daterangepicker-container.component';\r\nimport { Subscription } from 'rxjs';\r\nimport { ComponentLoaderFactory, ComponentLoader } from 'ngx-bootstrap/component-loader';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\nimport { filter } from 'rxjs/operators';\r\n\r\n@Directive({\r\n  selector: '[bsDaterangepicker]',\r\n  exportAs: 'bsDaterangepicker'\r\n})\r\nexport class BsDaterangepickerDirective\r\n  implements OnInit, OnDestroy, OnChanges {\r\n  /**\r\n   * Placement of a daterangepicker. Accepts: \"top\", \"bottom\", \"left\", \"right\"\r\n   */\r\n  @Input() placement: 'top' | 'bottom' | 'left' | 'right' = 'bottom';\r\n  /**\r\n   * Specifies events that should trigger. Supports a space separated list of\r\n   * event names.\r\n   */\r\n  @Input() triggers = 'click';\r\n  /**\r\n   * Close daterangepicker on outside click\r\n   */\r\n  @Input() outsideClick = true;\r\n  /**\r\n   * A selector specifying the element the daterangepicker should be appended\r\n   * to. Currently only supports \"body\".\r\n   */\r\n  @Input() container = 'body';\r\n\r\n  @Input() outsideEsc = true;\r\n\r\n  /**\r\n   * Returns whether or not the daterangepicker is currently being shown\r\n   */\r\n  @Input()\r\n  get isOpen(): boolean {\r\n    return this._datepicker.isShown;\r\n  }\r\n\r\n  set isOpen(value: boolean) {\r\n    if (value) {\r\n      this.show();\r\n    } else {\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Emits an event when the daterangepicker is shown\r\n   */\r\n  /* tslint:disable-next-line: no-any*/\r\n  @Output() onShown: EventEmitter<any>;\r\n  /**\r\n   * Emits an event when the daterangepicker is hidden\r\n   */\r\n  /* tslint:disable-next-line: no-any*/\r\n  @Output() onHidden: EventEmitter<any>;\r\n\r\n  _bsValue: Date[];\r\n  /**\r\n   * Initial value of daterangepicker\r\n   */\r\n  @Input()\r\n  set bsValue(value: Date[]) {\r\n    if (this._bsValue === value) {\r\n      return;\r\n    }\r\n    this._bsValue = value;\r\n    this.bsValueChange.emit(value);\r\n  }\r\n\r\n  /**\r\n   * Config object for daterangepicker\r\n   */\r\n  @Input() bsConfig: Partial<BsDaterangepickerConfig>;\r\n  /**\r\n   * Indicates whether daterangepicker's content is enabled or not\r\n   */\r\n  @Input() isDisabled: boolean;\r\n  /**\r\n   * Minimum date which is available for selection\r\n   */\r\n  @Input() minDate: Date;\r\n  /**\r\n   * Maximum date which is available for selection\r\n   */\r\n  @Input() maxDate: Date;\r\n  /**\r\n   * Disable specific dates\r\n   */\r\n  @Input() datesDisabled: Date[];\r\n  /**\r\n   * Emits when daterangepicker value has been changed\r\n   */\r\n  @Output() bsValueChange: EventEmitter<Date[]> = new EventEmitter();\r\n\r\n  protected _subs: Subscription[] = [];\r\n\r\n  private _datepicker: ComponentLoader<BsDaterangepickerContainerComponent>;\r\n  private _datepickerRef: ComponentRef<BsDaterangepickerContainerComponent>;\r\n\r\n  constructor(public _config: BsDaterangepickerConfig,\r\n              _elementRef: ElementRef,\r\n              _renderer: Renderer2,\r\n              _viewContainerRef: ViewContainerRef,\r\n              cis: ComponentLoaderFactory) {\r\n    this._datepicker = cis.createLoader<BsDaterangepickerContainerComponent>(\r\n      _elementRef,\r\n      _viewContainerRef,\r\n      _renderer\r\n    );\r\n    Object.assign(this, _config);\r\n    this.onShown = this._datepicker.onShown;\r\n    this.onHidden = this._datepicker.onHidden;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this._datepicker.listen({\r\n      outsideClick: this.outsideClick,\r\n      outsideEsc: this.outsideEsc,\r\n      triggers: this.triggers,\r\n      show: () => this.show()\r\n    });\r\n    this.setConfig();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (!this._datepickerRef || !this._datepickerRef.instance) {\r\n      return;\r\n    }\r\n\r\n    if (changes.minDate) {\r\n      this._datepickerRef.instance.minDate = this.minDate;\r\n    }\r\n\r\n    if (changes.maxDate) {\r\n      this._datepickerRef.instance.maxDate = this.maxDate;\r\n    }\r\n\r\n    if (changes.datesDisabled) {\r\n      this._datepickerRef.instance.datesDisabled = this.datesDisabled;\r\n    }\r\n\r\n    if (changes.isDisabled) {\r\n      this._datepickerRef.instance.isDisabled = this.isDisabled;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens an elements datepicker. This is considered a manual triggering of\r\n   * the datepicker.\r\n   */\r\n  show(): void {\r\n    if (this._datepicker.isShown) {\r\n      return;\r\n    }\r\n\r\n    this.setConfig();\r\n\r\n    this._datepickerRef = this._datepicker\r\n      .provide({provide: BsDatepickerConfig, useValue: this._config})\r\n      .attach(BsDaterangepickerContainerComponent)\r\n      .to(this.container)\r\n      .position({attachment: this.placement})\r\n      .show({placement: this.placement});\r\n\r\n    // if date changes from external source (model -> view)\r\n    this._subs.push(\r\n      this.bsValueChange.subscribe((value: Date[]) => {\r\n        this._datepickerRef.instance.value = value;\r\n      })\r\n    );\r\n\r\n    // if date changes from picker (view -> model)\r\n    this._subs.push(\r\n      this._datepickerRef.instance.valueChange\r\n        .pipe(\r\n          filter((range: Date[]) => range && range[0] && !!range[1])\r\n        )\r\n        .subscribe((value: Date[]) => {\r\n          this.bsValue = value;\r\n          this.hide();\r\n        })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Set config for daterangepicker\r\n   */\r\n  setConfig() {\r\n    this._config = Object.assign(\r\n      {},\r\n      this._config,\r\n      this.bsConfig,\r\n      {\r\n        value: this._bsValue,\r\n        isDisabled: this.isDisabled,\r\n        minDate: this.minDate || this.bsConfig && this.bsConfig.minDate,\r\n        maxDate: this.maxDate || this.bsConfig && this.bsConfig.maxDate,\r\n        datesDisabled: this.datesDisabled || this.bsConfig && this.bsConfig.datesDisabled\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Closes an elements datepicker. This is considered a manual triggering of\r\n   * the datepicker.\r\n   */\r\n  hide(): void {\r\n    if (this.isOpen) {\r\n      this._datepicker.hide();\r\n    }\r\n    for (const sub of this._subs) {\r\n      sub.unsubscribe();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles an elements datepicker. This is considered a manual triggering\r\n   * of the datepicker.\r\n   */\r\n  toggle(): void {\r\n    if (this.isOpen) {\r\n      return this.hide();\r\n    }\r\n\r\n    this.show();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._datepicker.dispose();\r\n  }\r\n}\r\n","import {\r\n  ChangeDetectorRef,\r\n  Directive,\r\n  ElementRef,\r\n  forwardRef,\r\n  Host,\r\n  Provider,\r\n  Renderer2\r\n} from '@angular/core';\r\nimport {\r\n  AbstractControl,\r\n  ControlValueAccessor,\r\n  NG_VALIDATORS,\r\n  NG_VALUE_ACCESSOR,\r\n  ValidationErrors,\r\n  Validator\r\n} from '@angular/forms';\r\nimport { parseDate, formatDate, getLocale, isAfter, isBefore, isArray, isDateValid } from 'ngx-bootstrap/chronos';\r\nimport { BsDaterangepickerDirective } from './bs-daterangepicker.component';\r\nimport { BsLocaleService } from './bs-locale.service';\r\n\r\nconst BS_DATERANGEPICKER_VALUE_ACCESSOR: Provider = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => BsDaterangepickerInputDirective),\r\n  multi: true\r\n};\r\n\r\nconst BS_DATERANGEPICKER_VALIDATOR: Provider = {\r\n  provide: NG_VALIDATORS,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => BsDaterangepickerInputDirective),\r\n  multi: true\r\n};\r\n\r\n\r\n@Directive({\r\n  selector: `input[bsDaterangepicker]`,\r\n  host: {\r\n    '(change)': 'onChange($event)',\r\n    '(keyup.esc)': 'hide()',\r\n    '(blur)': 'onBlur()'\r\n  },\r\n  providers: [BS_DATERANGEPICKER_VALUE_ACCESSOR, BS_DATERANGEPICKER_VALIDATOR]\r\n})\r\nexport class BsDaterangepickerInputDirective\r\n  implements ControlValueAccessor, Validator {\r\n  private _onChange = Function.prototype;\r\n  private _onTouched = Function.prototype;\r\n  /* tslint:disable-next-line: no-unused-variable */\r\n  private _validatorChange = Function.prototype;\r\n  private _value: Date[];\r\n\r\n  constructor(@Host() private _picker: BsDaterangepickerDirective,\r\n              private _localeService: BsLocaleService,\r\n              private _renderer: Renderer2,\r\n              private _elRef: ElementRef,\r\n              private changeDetection: ChangeDetectorRef) {\r\n    // update input value on datepicker value update\r\n    this._picker.bsValueChange.subscribe((value: Date[]) => {\r\n      this._setInputValue(value);\r\n      if (this._value !== value) {\r\n        this._value = value;\r\n        this._onChange(value);\r\n        this._onTouched();\r\n      }\r\n      this.changeDetection.markForCheck();\r\n    });\r\n\r\n    // update input value on locale change\r\n    this._localeService.localeChange.subscribe(() => {\r\n      this._setInputValue(this._value);\r\n    });\r\n  }\r\n\r\n  _setInputValue(date: Date[]): void {\r\n    let range = '';\r\n    if (date) {\r\n      const start: string = !date[0] ? ''\r\n        : formatDate(date[0],\r\n          this._picker._config.rangeInputFormat,\r\n          this._localeService.currentLocale\r\n        );\r\n      const end: string = !date[1] ? ''\r\n        : formatDate(\r\n          date[1],\r\n          this._picker._config.rangeInputFormat,\r\n          this._localeService.currentLocale\r\n        );\r\n      range = (start && end) ? start + this._picker._config.rangeSeparator + end : '';\r\n    }\r\n    this._renderer.setProperty(this._elRef.nativeElement, 'value', range);\r\n  }\r\n\r\n  onChange(event: Event) {\r\n    /* tslint:disable-next-line: no-any*/\r\n    this.writeValue((event.target as any).value);\r\n    this._onChange(this._value);\r\n    this._onTouched();\r\n  }\r\n\r\n  validate(c: AbstractControl): ValidationErrors | null {\r\n    const _value: [Date, Date] = c.value;\r\n\r\n    if (_value === null || _value === undefined || !isArray(_value)) {\r\n      return null;\r\n    }\r\n\r\n    const _isFirstDateValid = isDateValid(_value[0]);\r\n    const _isSecondDateValid = isDateValid(_value[1]);\r\n\r\n    if (!_isFirstDateValid) {\r\n      return { bsDate: { invalid: _value[0] } };\r\n    }\r\n\r\n    if (!_isSecondDateValid) {\r\n      return { bsDate: { invalid: _value[1] } };\r\n    }\r\n\r\n    if (this._picker && this._picker.minDate && isBefore(_value[0], this._picker.minDate, 'date')) {\r\n      return { bsDate: { minDate: this._picker.minDate } };\r\n    }\r\n\r\n    if (this._picker && this._picker.maxDate && isAfter(_value[1], this._picker.maxDate, 'date')) {\r\n      return { bsDate: { maxDate: this._picker.maxDate } };\r\n    }\r\n  }\r\n\r\n  registerOnValidatorChange(fn: () => void): void {\r\n    this._validatorChange = fn;\r\n  }\r\n\r\n  writeValue(value: Date[] | string) {\r\n    if (!value) {\r\n      this._value = null;\r\n    } else {\r\n      const _localeKey = this._localeService.currentLocale;\r\n      const _locale = getLocale(_localeKey);\r\n      if (!_locale) {\r\n        throw new Error(\r\n          `Locale \"${_localeKey}\" is not defined, please add it with \"defineLocale(...)\"`\r\n        );\r\n      }\r\n\r\n      let _input: (string[] | Date[]) = [];\r\n      if (typeof value === 'string') {\r\n        _input = value.split(this._picker._config.rangeSeparator);\r\n      }\r\n\r\n      if (Array.isArray(value)) {\r\n        _input = value;\r\n      }\r\n\r\n\r\n      this._value = (_input as string[])\r\n        .map((_val: string): Date =>\r\n          parseDate(_val, this._picker._config.dateInputFormat, this._localeService.currentLocale))\r\n        .map((date: Date) => (isNaN(date.valueOf()) ? null : date));\r\n    }\r\n\r\n    this._picker.bsValue = this._value;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this._picker.isDisabled = isDisabled;\r\n    if (isDisabled) {\r\n      this._renderer.setAttribute(this._elRef.nativeElement, 'disabled', 'disabled');\r\n\r\n      return;\r\n    }\r\n    this._renderer.removeAttribute(this._elRef.nativeElement, 'disabled');\r\n  }\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  registerOnChange(fn: () => void): void {\r\n    this._onChange = fn;\r\n  }\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  registerOnTouched(fn: () => void): void {\r\n    this._onTouched = fn;\r\n  }\r\n\r\n  onBlur() {\r\n    this._onTouched();\r\n  }\r\n\r\n  hide() {\r\n    this._picker.hide();\r\n    this._renderer.selectRootElement(this._elRef.nativeElement).blur();\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bs-calendar-layout',\r\n  template: `\r\n    <!-- current date, will be added in nearest releases -->\r\n    <bs-current-date title=\"hey there\" *ngIf=\"false\"></bs-current-date>\r\n\r\n    <!--navigation-->\r\n    <div class=\"bs-datepicker-head\">\r\n      <ng-content select=\"bs-datepicker-navigation-view\"></ng-content>\r\n    </div>\r\n\r\n    <div class=\"bs-datepicker-body\">\r\n      <ng-content></ng-content>\r\n    </div>\r\n\r\n    <!--timepicker-->\r\n    <bs-timepicker *ngIf=\"false\"></bs-timepicker>\r\n  `\r\n})\r\nexport class BsCalendarLayoutComponent {}\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bs-current-date',\r\n  template: `<div class=\"current-timedate\"><span>{{ title }}</span></div>`\r\n})\r\nexport class BsCurrentDateViewComponent {\r\n  @Input() title: string;\r\n}\r\n","import { Component, ChangeDetectionStrategy, Input } from '@angular/core';\r\n\r\nexport interface BsCustomDates {\r\n  label: string;\r\n  value: Date | Date[];\r\n}\r\n\r\n@Component({\r\n  selector: 'bs-custom-date-view',\r\n  template: `\r\n    <div class=\"bs-datepicker-predefined-btns\">\r\n      <button *ngFor=\"let range of ranges\">{{ range.label }}</button>\r\n      <button *ngIf=\"isCustomRangeShown\">Custom Range</button>\r\n    </div>\r\n  `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class BsCustomDatesViewComponent {\r\n  @Input() isCustomRangeShown: true;\r\n  @Input() ranges: BsCustomDates[];\r\n}\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  ElementRef,\r\n  Input,\r\n  OnInit,\r\n  Renderer2\r\n} from '@angular/core';\r\n\r\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\r\nimport { DayViewModel } from '../../models';\r\n\r\n@Component({\r\n  selector: '[bsDatepickerDayDecorator]',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  host: {\r\n    '[class.disabled]': 'day.isDisabled',\r\n    '[class.is-highlighted]': 'day.isHovered',\r\n    '[class.is-other-month]': 'day.isOtherMonth',\r\n    '[class.is-active-other-month]': 'day.isOtherMonthHovered',\r\n    '[class.in-range]': 'day.isInRange',\r\n    '[class.select-start]': 'day.isSelectionStart',\r\n    '[class.select-end]': 'day.isSelectionEnd',\r\n    '[class.selected]': 'day.isSelected'\r\n  },\r\n  template: `{{ day.label }}`\r\n})\r\nexport class BsDatepickerDayDecoratorComponent implements OnInit {\r\n  @Input() day: DayViewModel;\r\n\r\n  constructor(\r\n    private _config: BsDatepickerConfig,\r\n    private _elRef: ElementRef,\r\n    private _renderer: Renderer2\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.day.isToday && this._config && this._config.customTodayClass) {\r\n      this._renderer.addClass(this._elRef.nativeElement, this._config.customTodayClass);\r\n    }\r\n  }\r\n}\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  Output\r\n} from '@angular/core';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationDirection,\r\n  DaysCalendarViewModel\r\n} from '../../models';\r\n\r\n@Component({\r\n  selector: 'bs-datepicker-navigation-view',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <button class=\"previous\"\r\n            [disabled]=\"calendar.disableLeftArrow\"\r\n            [style.visibility]=\"calendar.hideLeftArrow ? 'hidden' : 'visible'\"\r\n            (click)=\"navTo(true)\"><span>&lsaquo;</span>\r\n    </button>\r\n\r\n    &#8203;  <!-- zero-width space needed for correct alignement\r\n                  with preserveWhitespaces: false in Angular -->\r\n\r\n    <button class=\"current\"\r\n            *ngIf=\"calendar.monthTitle\"\r\n            (click)=\"view('month')\"\r\n    ><span>{{ calendar.monthTitle }}</span>\r\n    </button>\r\n\r\n    &#8203;  <!-- zero-width space needed for correct alignement\r\n                  with preserveWhitespaces: false in Angular -->\r\n\r\n    <button class=\"current\" (click)=\"view('year')\"\r\n    ><span>{{ calendar.yearTitle }}</span></button>\r\n\r\n    &#8203;  <!-- zero-width space needed for correct alignement\r\n                  with preserveWhitespaces: false in Angular -->\r\n\r\n    <button class=\"next\"\r\n            [disabled]=\"calendar.disableRightArrow\"\r\n            [style.visibility]=\"calendar.hideRightArrow ? 'hidden' : 'visible'\"\r\n            (click)=\"navTo(false)\"><span>&rsaquo;</span>\r\n    </button>\r\n  `\r\n})\r\nexport class BsDatepickerNavigationViewComponent {\r\n  @Input() calendar: DaysCalendarViewModel;\r\n\r\n  @Output() onNavigate = new EventEmitter<BsNavigationDirection>();\r\n  @Output() onViewMode = new EventEmitter<BsDatepickerViewMode>();\r\n\r\n  navTo(down: boolean): void {\r\n    this.onNavigate.emit(\r\n      down ? BsNavigationDirection.DOWN : BsNavigationDirection.UP\r\n    );\r\n  }\r\n\r\n  view(viewMode: BsDatepickerViewMode): void {\r\n    this.onViewMode.emit(viewMode);\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  Output\r\n} from '@angular/core';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationDirection,\r\n  BsNavigationEvent,\r\n  CellHoverEvent,\r\n  DatepickerRenderOptions,\r\n  DaysCalendarViewModel,\r\n  DayViewModel, WeekViewModel\r\n} from '../../models';\r\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\r\n\r\n@Component({\r\n  selector: 'bs-days-calendar-view',\r\n  // changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <bs-calendar-layout>\r\n      <bs-datepicker-navigation-view\r\n        [calendar]=\"calendar\"\r\n        (onNavigate)=\"navigateTo($event)\"\r\n        (onViewMode)=\"changeViewMode($event)\"\r\n      ></bs-datepicker-navigation-view>\r\n\r\n      <!--days matrix-->\r\n      <table role=\"grid\" class=\"days weeks\">\r\n        <thead>\r\n        <tr>\r\n          <!--if show weeks-->\r\n          <th *ngIf=\"options.showWeekNumbers\"></th>\r\n          <th *ngFor=\"let weekday of calendar.weekdays; let i = index\"\r\n              aria-label=\"weekday\">{{ calendar.weekdays[i] }}\r\n          </th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr *ngFor=\"let week of calendar.weeks; let i = index\">\r\n          <td class=\"week\" [class.active-week]=\"isWeekHovered\"  *ngIf=\"options.showWeekNumbers\">\r\n            <span\r\n                (click)=\"selectWeek(week)\"\r\n                (mouseenter)=\"weekHoverHandler(week, true)\"\r\n                (mouseleave)=\"weekHoverHandler(week, false)\">{{ calendar.weekNumbers[i] }}</span>\r\n          </td>\r\n          <td *ngFor=\"let day of week.days\" role=\"gridcell\">\r\n          <span bsDatepickerDayDecorator\r\n                [day]=\"day\"\r\n                (click)=\"selectDay(day)\"\r\n                (mouseenter)=\"hoverDay(day, true)\"\r\n                (mouseleave)=\"hoverDay(day, false)\">{{ day.label }}</span>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n    </bs-calendar-layout>\r\n  `\r\n})\r\nexport class BsDaysCalendarViewComponent  {\r\n  @Input() calendar: DaysCalendarViewModel;\r\n  @Input() options: DatepickerRenderOptions;\r\n\r\n  @Output() onNavigate = new EventEmitter<BsNavigationEvent>();\r\n  @Output() onViewMode = new EventEmitter<BsDatepickerViewMode>();\r\n\r\n  @Output() onSelect = new EventEmitter<DayViewModel>();\r\n  @Output() onHover = new EventEmitter<CellHoverEvent>();\r\n  @Output() onHoverWeek = new EventEmitter<WeekViewModel>();\r\n\r\n  isWeekHovered: boolean;\r\n\r\n  constructor(private _config: BsDatepickerConfig) { }\r\n\r\n  navigateTo(event: BsNavigationDirection): void {\r\n    const step = BsNavigationDirection.DOWN === event ? -1 : 1;\r\n    this.onNavigate.emit({ step: { month: step } });\r\n  }\r\n\r\n  changeViewMode(event: BsDatepickerViewMode): void {\r\n    this.onViewMode.emit(event);\r\n  }\r\n\r\n  selectDay(event: DayViewModel): void {\r\n    this.onSelect.emit(event);\r\n  }\r\n\r\n  selectWeek(week: WeekViewModel): void {\r\n    if (!this._config.selectWeek) {\r\n      return;\r\n    }\r\n\r\n    if (week.days\r\n      && week.days[0]\r\n      && !week.days[0].isDisabled\r\n      && this._config.selectFromOtherMonth) {\r\n\r\n      this.onSelect.emit(week.days[0]);\r\n\r\n      return;\r\n    }\r\n\r\n    if (week.days.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const selectedDay = week.days.find((day: DayViewModel) => {\r\n      return this._config.selectFromOtherMonth\r\n        ? !day.isDisabled\r\n        : !day.isOtherMonth && !day.isDisabled;\r\n    });\r\n\r\n    this.onSelect.emit(selectedDay);\r\n  }\r\n\r\n  weekHoverHandler(cell: WeekViewModel, isHovered: boolean): void {\r\n    if (!this._config.selectWeek) {\r\n      return;\r\n    }\r\n\r\n    const hasActiveDays = cell.days.find((day: DayViewModel) => {\r\n      return this._config.selectFromOtherMonth\r\n        ? !day.isDisabled\r\n        : !day.isOtherMonth && !day.isDisabled;\r\n    });\r\n\r\n    if (hasActiveDays) {\r\n      cell.isHovered = isHovered;\r\n      this.isWeekHovered = isHovered;\r\n      this.onHoverWeek.emit(cell);\r\n    }\r\n  }\r\n\r\n  hoverDay(cell: DayViewModel, isHovered: boolean): void {\r\n    if (this._config.selectFromOtherMonth && cell.isOtherMonth) {\r\n      cell.isOtherMonthHovered = isHovered;\r\n    }\r\n\r\n    this.onHover.emit({ cell, isHovered });\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationDirection,\r\n  BsNavigationEvent,\r\n  CellHoverEvent,\r\n  MonthsCalendarViewModel,\r\n  CalendarCellViewModel\r\n} from '../../models';\r\n\r\n@Component({\r\n  selector: 'bs-month-calendar-view',\r\n  template: `\r\n    <bs-calendar-layout>\r\n      <bs-datepicker-navigation-view\r\n        [calendar]=\"calendar\"\r\n        (onNavigate)=\"navigateTo($event)\"\r\n        (onViewMode)=\"changeViewMode($event)\"\r\n      ></bs-datepicker-navigation-view>\r\n\r\n      <table role=\"grid\" class=\"months\">\r\n        <tbody>\r\n        <tr *ngFor=\"let row of calendar.months\">\r\n          <td *ngFor=\"let month of row\" role=\"gridcell\"\r\n              (click)=\"viewMonth(month)\"\r\n              (mouseenter)=\"hoverMonth(month, true)\"\r\n              (mouseleave)=\"hoverMonth(month, false)\"\r\n              [class.disabled]=\"month.isDisabled\"\r\n              [class.is-highlighted]=\"month.isHovered\">\r\n            <span>{{ month.label }}</span>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </bs-calendar-layout>\r\n  `\r\n})\r\nexport class BsMonthCalendarViewComponent {\r\n  @Input() calendar: MonthsCalendarViewModel;\r\n\r\n  @Output() onNavigate = new EventEmitter<BsNavigationEvent>();\r\n  @Output() onViewMode = new EventEmitter<BsDatepickerViewMode>();\r\n\r\n  @Output() onSelect = new EventEmitter<CalendarCellViewModel>();\r\n  @Output() onHover = new EventEmitter<CellHoverEvent>();\r\n\r\n  navigateTo(event: BsNavigationDirection): void {\r\n    const step = BsNavigationDirection.DOWN === event ? -1 : 1;\r\n    this.onNavigate.emit({ step: { year: step } });\r\n  }\r\n\r\n  viewMonth(month: CalendarCellViewModel) {\r\n    this.onSelect.emit(month);\r\n  }\r\n\r\n  hoverMonth(cell: CalendarCellViewModel, isHovered: boolean) {\r\n    this.onHover.emit({ cell, isHovered });\r\n  }\r\n\r\n  changeViewMode(event: BsDatepickerViewMode): void {\r\n    this.onViewMode.emit(event);\r\n  }\r\n}\r\n","// tslint:disable:max-line-length\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bs-timepicker',\r\n  template: `\r\n    <div class=\"bs-timepicker-container\">\r\n      <div class=\"bs-timepicker-controls\">\r\n        <button class=\"bs-decrease\">-</button>\r\n        <input type=\"text\" [value]=\"hours\" placeholder=\"00\">\r\n        <button class=\"bs-increase\">+</button>\r\n      </div>\r\n      <div class=\"bs-timepicker-controls\">\r\n        <button class=\"bs-decrease\">-</button>\r\n        <input type=\"text\" [value]=\"minutes\" placeholder=\"00\">\r\n        <button class=\"bs-increase\">+</button>\r\n      </div>\r\n      <button class=\"switch-time-format\">{{ ampm }}\r\n        <img\r\n          src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAABSElEQVQYV3XQPUvDUBQG4HNuagtVqc6KgouCv6GIuIntYBLB9hcIQpLStCAIV7DYmpTcRWcXqZio3Vwc/UCc/QEqfgyKGbr0I7nS1EiHeqYzPO/h5SD0jaxUZjmSLCB+OFb+UFINFwASAEAdpu9gaGXVyAHHFQBkHpKHc6a9dzECvADyY9sqlAMsK9W0jzxDXqeytr3mhQckxSji27TJJ5/rPmIpwJJq3HrtduriYOurv1a4i1p5HnhkG9OFymi0ReoO05cGwb+ayv4dysVygjeFmsP05f8wpZQ8fsdvfmuY9zjWSNqUtgYFVnOVReILYoBFzdQI5/GGFzNHhGbeZnopDGU29sZbscgldmC99w35VOATTycIMMcBXIfpSVGzZhA6C8hh00conln6VQ9TGgV32OEAKQC4DrBq7CJwd0ggR7Vq/rPrfgB+C3sGypY5DAAAAABJRU5ErkJggg==\"\r\n          alt=\"\">\r\n      </button>\r\n    </div>\r\n  `\r\n})\r\nexport class BsTimepickerViewComponent {\r\n  ampm = 'ok';\r\n  hours = 0;\r\n  minutes = 0;\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { yearsPerCalendar } from '../../engine/format-years-calendar';\r\nimport {\r\n  BsDatepickerViewMode,\r\n  BsNavigationDirection,\r\n  BsNavigationEvent,\r\n  CalendarCellViewModel,\r\n  CellHoverEvent,\r\n  YearsCalendarViewModel\r\n} from '../../models';\r\n\r\n@Component({\r\n  selector: 'bs-years-calendar-view',\r\n  template: `\r\n    <bs-calendar-layout>\r\n      <bs-datepicker-navigation-view\r\n        [calendar]=\"calendar\"\r\n        (onNavigate)=\"navigateTo($event)\"\r\n        (onViewMode)=\"changeViewMode($event)\"\r\n      ></bs-datepicker-navigation-view>\r\n\r\n      <table role=\"grid\" class=\"years\">\r\n        <tbody>\r\n        <tr *ngFor=\"let row of calendar.years\">\r\n          <td *ngFor=\"let year of row\" role=\"gridcell\"\r\n              (click)=\"viewYear(year)\"\r\n              (mouseenter)=\"hoverYear(year, true)\"\r\n              (mouseleave)=\"hoverYear(year, false)\"\r\n              [class.disabled]=\"year.isDisabled\"\r\n              [class.is-highlighted]=\"year.isHovered\">\r\n            <span>{{ year.label }}</span>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </bs-calendar-layout>\r\n  `\r\n})\r\nexport class BsYearsCalendarViewComponent {\r\n  @Input() calendar: YearsCalendarViewModel;\r\n\r\n  @Output() onNavigate = new EventEmitter<BsNavigationEvent>();\r\n  @Output() onViewMode = new EventEmitter<BsDatepickerViewMode>();\r\n\r\n  @Output() onSelect = new EventEmitter<CalendarCellViewModel>();\r\n  @Output() onHover = new EventEmitter<CellHoverEvent>();\r\n\r\n  navigateTo(event: BsNavigationDirection): void {\r\n    const step = BsNavigationDirection.DOWN === event ? -1 : 1;\r\n    this.onNavigate.emit({ step: { year: step * yearsPerCalendar } });\r\n  }\r\n\r\n  viewYear(year: CalendarCellViewModel) {\r\n    this.onSelect.emit(year);\r\n  }\r\n\r\n  hoverYear(cell: CalendarCellViewModel, isHovered: boolean) {\r\n    this.onHover.emit({ cell, isHovered });\r\n  }\r\n\r\n  changeViewMode(event: BsDatepickerViewMode): void {\r\n    this.onViewMode.emit(event);\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\r\nimport { PositioningService } from 'ngx-bootstrap/positioning';\r\n\r\nimport { BsDatepickerInputDirective } from './bs-datepicker-input.directive';\r\nimport { BsDatepickerDirective } from './bs-datepicker.component';\r\nimport { BsDatepickerConfig } from './bs-datepicker.config';\r\nimport { BsDaterangepickerInputDirective } from './bs-daterangepicker-input.directive';\r\nimport { BsDaterangepickerDirective } from './bs-daterangepicker.component';\r\nimport { BsDaterangepickerConfig } from './bs-daterangepicker.config';\r\nimport { BsDatepickerInlineDirective } from './bs-datepicker-inline.component';\r\nimport { BsDatepickerInlineConfig } from './bs-datepicker-inline.config';\r\n\r\nimport { BsLocaleService } from './bs-locale.service';\r\nimport { BsDatepickerActions } from './reducer/bs-datepicker.actions';\r\nimport { BsDatepickerEffects } from './reducer/bs-datepicker.effects';\r\nimport { BsDatepickerStore } from './reducer/bs-datepicker.store';\r\nimport { BsCalendarLayoutComponent } from './themes/bs/bs-calendar-layout.component';\r\nimport { BsCurrentDateViewComponent } from './themes/bs/bs-current-date-view.component';\r\nimport { BsCustomDatesViewComponent } from './themes/bs/bs-custom-dates-view.component';\r\nimport { BsDatepickerContainerComponent } from './themes/bs/bs-datepicker-container.component';\r\nimport { BsDatepickerDayDecoratorComponent } from './themes/bs/bs-datepicker-day-decorator.directive';\r\nimport { BsDatepickerNavigationViewComponent } from './themes/bs/bs-datepicker-navigation-view.component';\r\nimport { BsDaterangepickerContainerComponent } from './themes/bs/bs-daterangepicker-container.component';\r\nimport { BsDaysCalendarViewComponent } from './themes/bs/bs-days-calendar-view.component';\r\nimport { BsMonthCalendarViewComponent } from './themes/bs/bs-months-calendar-view.component';\r\nimport { BsTimepickerViewComponent } from './themes/bs/bs-timepicker-view.component';\r\nimport { BsYearsCalendarViewComponent } from './themes/bs/bs-years-calendar-view.component';\r\nimport { BsDatepickerInlineContainerComponent } from './themes/bs/bs-datepicker-inline-container.component';\r\n\r\nconst _exports = [\r\n  BsDatepickerContainerComponent,\r\n  BsDaterangepickerContainerComponent,\r\n  BsDatepickerInlineContainerComponent,\r\n\r\n  BsDatepickerDirective,\r\n  BsDatepickerInputDirective,\r\n\r\n  BsDaterangepickerInputDirective,\r\n  BsDaterangepickerDirective,\r\n\r\n  BsDatepickerInlineDirective\r\n];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [\r\n    BsDatepickerDayDecoratorComponent,\r\n    BsCurrentDateViewComponent,\r\n    BsDatepickerNavigationViewComponent,\r\n    BsTimepickerViewComponent,\r\n\r\n    BsCalendarLayoutComponent,\r\n    BsDaysCalendarViewComponent,\r\n    BsMonthCalendarViewComponent,\r\n    BsYearsCalendarViewComponent,\r\n\r\n    BsCustomDatesViewComponent,\r\n\r\n    ..._exports\r\n  ],\r\n  entryComponents: [\r\n    BsDatepickerContainerComponent,\r\n    BsDaterangepickerContainerComponent,\r\n    BsDatepickerInlineContainerComponent\r\n  ],\r\n  exports: _exports\r\n})\r\nexport class BsDatepickerModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: BsDatepickerModule,\r\n      providers: [\r\n        ComponentLoaderFactory,\r\n        PositioningService,\r\n        BsDatepickerStore,\r\n        BsDatepickerActions,\r\n        BsDatepickerConfig,\r\n        BsDaterangepickerConfig,\r\n        BsDatepickerInlineConfig,\r\n        BsDatepickerEffects,\r\n        BsLocaleService\r\n      ]\r\n    };\r\n  }\r\n}\r\n","import { formatDate } from 'ngx-bootstrap/chronos';\r\n\r\nexport class DateFormatter {\r\n  format(date: Date, format: string, locale: string): string {\r\n    return formatDate(date, format, locale);\r\n  }\r\n}\r\n","/* tslint:disable: max-file-line-count */\r\nimport {\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges\r\n} from '@angular/core';\r\n\r\nimport { DateFormatter } from './date-formatter';\r\n\r\n\r\n@Component({\r\n  selector: 'datepicker-inner',\r\n  template: `\r\n    <!--&lt;!&ndash;ng-keydown=\"keydown($event)\"&ndash;&gt;-->\r\n    <div *ngIf=\"datepickerMode\" class=\"well well-sm bg-faded p-a card\" role=\"application\" >\r\n      <ng-content></ng-content>\r\n    </div>\r\n  `\r\n})\r\nexport class DatePickerInnerComponent implements OnInit, OnChanges {\r\n  @Input() locale: string;\r\n  @Input() datepickerMode: string;\r\n  @Input() startingDay: number;\r\n  @Input() yearRange: number;\r\n\r\n  @Input() minDate: Date;\r\n  @Input() maxDate: Date;\r\n  @Input() minMode: string;\r\n  @Input() maxMode: string;\r\n  @Input() showWeeks: boolean;\r\n  @Input() formatDay: string;\r\n  @Input() formatMonth: string;\r\n  @Input() formatYear: string;\r\n  @Input() formatDayHeader: string;\r\n  @Input() formatDayTitle: string;\r\n  @Input() formatMonthTitle: string;\r\n  @Input() onlyCurrentMonth: boolean;\r\n  @Input() shortcutPropagation: boolean;\r\n  @Input() customClass: { date: Date; mode: string; clazz: string }[];\r\n  @Input() monthColLimit: number;\r\n  @Input() yearColLimit: number;\r\n  @Input() dateDisabled: { date: Date; mode: string }[];\r\n  @Input() dayDisabled: number[];\r\n  @Input() initDate: Date;\r\n\r\n  @Output() selectionDone: EventEmitter<Date> = new EventEmitter<Date>(undefined);\r\n  @Output() update: EventEmitter<Date> = new EventEmitter<Date>(false);\r\n  @Output() activeDateChange: EventEmitter<Date> = new EventEmitter<Date>(undefined);\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  stepDay: any = {};\r\n  /* tslint:disable-next-line: no-any*/\r\n  stepMonth: any = {};\r\n  /* tslint:disable-next-line: no-any*/\r\n  stepYear: any = {};\r\n\r\n  uniqueId: string;\r\n\r\n  protected modes: string[] = ['day', 'month', 'year'];\r\n  protected dateFormatter: DateFormatter = new DateFormatter();\r\n  protected _activeDate: Date;\r\n  protected selectedDate: Date;\r\n  protected activeDateId: string;\r\n\r\n  protected refreshViewHandlerDay: Function;\r\n  protected compareHandlerDay: Function;\r\n  protected refreshViewHandlerMonth: Function;\r\n  protected compareHandlerMonth: Function;\r\n  protected refreshViewHandlerYear: Function;\r\n  protected compareHandlerYear: Function;\r\n\r\n  @Input()\r\n  get activeDate(): Date {\r\n    return this._activeDate;\r\n  }\r\n\r\n  set activeDate(value: Date) {\r\n    this._activeDate = value;\r\n  }\r\n\r\n  // todo: add formatter value to Date object\r\n  ngOnInit(): void {\r\n    // todo: use date for unique value\r\n    this.uniqueId =  `datepicker--${Math.floor(Math.random() * 10000)}`;\r\n\r\n    if (this.initDate) {\r\n      this.activeDate = this.initDate;\r\n      this.selectedDate = new Date(this.activeDate.valueOf());\r\n      this.update.emit(this.activeDate);\r\n    } else if (this.activeDate === undefined) {\r\n      this.activeDate = new Date();\r\n    }\r\n  }\r\n\r\n  // this.refreshView should be called here to reflect the changes on the fly\r\n  // tslint:disable-next-line:no-unused-variable\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.refreshView();\r\n    this.checkIfActiveDateGotUpdated(changes.activeDate);\r\n  }\r\n\r\n  // Check if activeDate has been update and then emit the activeDateChange with the new date\r\n  /* tslint:disable-next-line: no-any */\r\n  checkIfActiveDateGotUpdated(activeDate: any): void {\r\n    if (activeDate && !activeDate.firstChange) {\r\n      const previousValue = activeDate.previousValue;\r\n      if (\r\n        previousValue &&\r\n        previousValue instanceof Date &&\r\n        previousValue.getTime() !== activeDate.currentValue.getTime()\r\n      ) {\r\n        this.activeDateChange.emit(this.activeDate);\r\n      }\r\n    }\r\n  }\r\n\r\n  setCompareHandler(handler: Function, type: string): void {\r\n    if (type === 'day') {\r\n      this.compareHandlerDay = handler;\r\n    }\r\n\r\n    if (type === 'month') {\r\n      this.compareHandlerMonth = handler;\r\n    }\r\n\r\n    if (type === 'year') {\r\n      this.compareHandlerYear = handler;\r\n    }\r\n  }\r\n\r\n  compare(date1: Date, date2: Date): number | undefined {\r\n    if (date1 === undefined || date2 === undefined) {\r\n      return undefined;\r\n    }\r\n\r\n    if (this.datepickerMode === 'day' && this.compareHandlerDay) {\r\n      return this.compareHandlerDay(date1, date2);\r\n    }\r\n\r\n    if (this.datepickerMode === 'month' && this.compareHandlerMonth) {\r\n      return this.compareHandlerMonth(date1, date2);\r\n    }\r\n\r\n    if (this.datepickerMode === 'year' && this.compareHandlerYear) {\r\n      return this.compareHandlerYear(date1, date2);\r\n    }\r\n\r\n    return void 0;\r\n  }\r\n\r\n  setRefreshViewHandler(handler: Function, type: string): void {\r\n    if (type === 'day') {\r\n      this.refreshViewHandlerDay = handler;\r\n    }\r\n\r\n    if (type === 'month') {\r\n      this.refreshViewHandlerMonth = handler;\r\n    }\r\n\r\n    if (type === 'year') {\r\n      this.refreshViewHandlerYear = handler;\r\n    }\r\n  }\r\n\r\n  refreshView(): void {\r\n    if (this.datepickerMode === 'day' && this.refreshViewHandlerDay) {\r\n      this.refreshViewHandlerDay();\r\n    }\r\n\r\n    if (this.datepickerMode === 'month' && this.refreshViewHandlerMonth) {\r\n      this.refreshViewHandlerMonth();\r\n    }\r\n\r\n    if (this.datepickerMode === 'year' && this.refreshViewHandlerYear) {\r\n      this.refreshViewHandlerYear();\r\n    }\r\n  }\r\n\r\n  dateFilter(date: Date, format: string): string {\r\n    return this.dateFormatter.format(date, format, this.locale);\r\n  }\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  isActive(dateObject: any): boolean {\r\n    if (this.compare(dateObject.date, this.activeDate) === 0) {\r\n      this.activeDateId = dateObject.uid;\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  createDateObject(date: Date, format: string): any {\r\n    /* tslint:disable-next-line: no-any*/\r\n    const dateObject: any = {};\r\n    dateObject.date = new Date(\r\n      date.getFullYear(),\r\n      date.getMonth(),\r\n      date.getDate()\r\n    );\r\n    dateObject.date = this.fixTimeZone(dateObject.date);\r\n    dateObject.label = this.dateFilter(date, format);\r\n    dateObject.selected = this.compare(date, this.selectedDate) === 0;\r\n    dateObject.disabled = this.isDisabled(date);\r\n    dateObject.current = this.compare(date, new Date()) === 0;\r\n    dateObject.customClass = this.getCustomClassForDate(dateObject.date);\r\n\r\n    return dateObject;\r\n  }\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  split(arr: any[], size: number): any[] {\r\n    /* tslint:disable-next-line: no-any*/\r\n    const arrays: any[] = [];\r\n    while (arr.length > 0) {\r\n      arrays.push(arr.splice(0, size));\r\n    }\r\n\r\n    return arrays;\r\n  }\r\n\r\n  // Fix a hard-reproducible bug with timezones\r\n  // The bug depends on OS, browser, current timezone and current date\r\n  // i.e.\r\n  // var date = new Date(2014, 0, 1);\r\n  // console.log(date.getFullYear(), date.getMonth(), date.getDate(),\r\n  // date.getHours()); can result in \"2013 11 31 23\" because of the bug.\r\n  fixTimeZone(date: Date): Date {\r\n    const hours = date.getHours();\r\n\r\n    return new Date(\r\n      date.getFullYear(),\r\n      date.getMonth(),\r\n      date.getDate(),\r\n      hours === 23 ? hours + 2 : 0\r\n    );\r\n  }\r\n\r\n  select(date: Date, isManual = true): void {\r\n    if (this.datepickerMode === this.minMode) {\r\n      if (!this.activeDate) {\r\n        this.activeDate = new Date(0, 0, 0, 0, 0, 0, 0);\r\n      }\r\n\r\n      this.activeDate = new Date(\r\n        date.getFullYear(),\r\n        date.getMonth(),\r\n        date.getDate()\r\n      );\r\n      this.activeDate = this.fixTimeZone(this.activeDate);\r\n      if (isManual) {\r\n        this.selectionDone.emit(this.activeDate);\r\n      }\r\n    } else {\r\n      this.activeDate = new Date(\r\n        date.getFullYear(),\r\n        date.getMonth(),\r\n        date.getDate()\r\n      );\r\n      this.activeDate = this.fixTimeZone(this.activeDate);\r\n      if (isManual) {\r\n        this.datepickerMode = this.modes[\r\n          this.modes.indexOf(this.datepickerMode) - 1\r\n        ];\r\n      }\r\n    }\r\n\r\n    this.selectedDate = new Date(this.activeDate.valueOf());\r\n    this.update.emit(this.activeDate);\r\n    this.refreshView();\r\n  }\r\n\r\n  move(direction: number): void {\r\n    /* tslint:disable-next-line: no-any*/\r\n    let expectedStep: any;\r\n    if (this.datepickerMode === 'day') {\r\n      expectedStep = this.stepDay;\r\n    }\r\n\r\n    if (this.datepickerMode === 'month') {\r\n      expectedStep = this.stepMonth;\r\n    }\r\n\r\n    if (this.datepickerMode === 'year') {\r\n      expectedStep = this.stepYear;\r\n    }\r\n\r\n    if (expectedStep) {\r\n      const year =\r\n        this.activeDate.getFullYear() + direction * (expectedStep.years || 0);\r\n      const month =\r\n        this.activeDate.getMonth() + direction * (expectedStep.months || 0);\r\n      this.activeDate = new Date(year, month, 1);\r\n\r\n      this.refreshView();\r\n      this.activeDateChange.emit(this.activeDate);\r\n    }\r\n  }\r\n\r\n  toggleMode(_direction: number): void {\r\n    const direction = _direction || 1;\r\n\r\n    if (\r\n      (this.datepickerMode === this.maxMode && direction === 1) ||\r\n      (this.datepickerMode === this.minMode && direction === -1)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.datepickerMode = this.modes[\r\n      this.modes.indexOf(this.datepickerMode) + direction\r\n    ];\r\n    this.refreshView();\r\n  }\r\n\r\n  protected getCustomClassForDate(date: Date): string {\r\n    if (!this.customClass) {\r\n      return '';\r\n    }\r\n    // todo: build a hash of custom classes, it will work faster\r\n    const customClassObject: {\r\n      date: Date;\r\n      mode: string;\r\n      clazz: string;\r\n    /* tslint:disable-next-line: no-any */\r\n    } = this.customClass.find((customClass: any) => {\r\n      return (\r\n        customClass.date.valueOf() === date.valueOf() &&\r\n        customClass.mode === this.datepickerMode\r\n      );\r\n    }, this);\r\n\r\n    return customClassObject === undefined ? '' : customClassObject.clazz;\r\n  }\r\n\r\n  protected compareDateDisabled(\r\n    date1Disabled: { date: Date; mode: string },\r\n    date2: Date\r\n  ): number {\r\n    if (date1Disabled === undefined || date2 === undefined) {\r\n      return undefined;\r\n    }\r\n\r\n    if (date1Disabled.mode === 'day' && this.compareHandlerDay) {\r\n      return this.compareHandlerDay(date1Disabled.date, date2);\r\n    }\r\n\r\n    if (date1Disabled.mode === 'month' && this.compareHandlerMonth) {\r\n      return this.compareHandlerMonth(date1Disabled.date, date2);\r\n    }\r\n\r\n    if (date1Disabled.mode === 'year' && this.compareHandlerYear) {\r\n      return this.compareHandlerYear(date1Disabled.date, date2);\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  protected isDisabled(date: Date): boolean {\r\n    let isDateDisabled = false;\r\n    if (this.dateDisabled) {\r\n      this.dateDisabled.forEach(\r\n        (disabledDate: { date: Date; mode: string }) => {\r\n          if (this.compareDateDisabled(disabledDate, date) === 0) {\r\n            isDateDisabled = true;\r\n          }\r\n        }\r\n      );\r\n    }\r\n\r\n    if (this.dayDisabled) {\r\n      isDateDisabled =\r\n        isDateDisabled ||\r\n        this.dayDisabled.indexOf(date.getDay()) > -1;\r\n    }\r\n\r\n    return (\r\n      isDateDisabled ||\r\n      (this.minDate && this.compare(date, this.minDate) < 0) ||\r\n      (this.maxDate && this.compare(date, this.maxDate) > 0)\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class DatepickerConfig {\r\n  locale = 'en';\r\n  datepickerMode = 'day';\r\n  startingDay = 0;\r\n  yearRange = 20;\r\n  minMode = 'day';\r\n  maxMode = 'year';\r\n  showWeeks = true;\r\n  formatDay = 'DD';\r\n  formatMonth = 'MMMM';\r\n  formatYear = 'YYYY';\r\n  formatDayHeader = 'dd';\r\n  formatDayTitle = 'MMMM YYYY';\r\n  formatMonthTitle = 'YYYY';\r\n  onlyCurrentMonth = false;\r\n  monthColLimit = 3;\r\n  yearColLimit = 5;\r\n  shortcutPropagation = false;\r\n}\r\n","import {\r\n  Component,\r\n  EventEmitter,\r\n  forwardRef,\r\n  Input,\r\n  Output,\r\n  Provider,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\nimport { DatepickerConfig } from './datepicker.config';\r\n\r\nexport const DATEPICKER_CONTROL_VALUE_ACCESSOR: Provider = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  /* tslint:disable-next-line: no-use-before-declare */\r\n  useExisting: forwardRef(() => DatePickerComponent),\r\n  multi: true\r\n};\r\n\r\n/* tslint:disable:component-selector-name component-selector-type */\r\n@Component({\r\n  selector: 'datepicker',\r\n  template: `\r\n    <datepicker-inner [activeDate]=\"activeDate\"\r\n                      (update)=\"onUpdate($event)\"\r\n                      [locale]=\"config.locale\"\r\n                      [datepickerMode]=\"datepickerMode\"\r\n                      [initDate]=\"initDate\"\r\n                      [minDate]=\"minDate\"\r\n                      [maxDate]=\"maxDate\"\r\n                      [minMode]=\"minMode\"\r\n                      [maxMode]=\"maxMode\"\r\n                      [showWeeks]=\"showWeeks\"\r\n                      [formatDay]=\"formatDay\"\r\n                      [formatMonth]=\"formatMonth\"\r\n                      [formatYear]=\"formatYear\"\r\n                      [formatDayHeader]=\"formatDayHeader\"\r\n                      [formatDayTitle]=\"formatDayTitle\"\r\n                      [formatMonthTitle]=\"formatMonthTitle\"\r\n                      [startingDay]=\"startingDay\"\r\n                      [yearRange]=\"yearRange\"\r\n                      [customClass]=\"customClass\"\r\n                      [dateDisabled]=\"dateDisabled\"\r\n                      [dayDisabled]=\"dayDisabled\"\r\n                      [onlyCurrentMonth]=\"onlyCurrentMonth\"\r\n                      [shortcutPropagation]=\"shortcutPropagation\"\r\n                      [monthColLimit]=\"monthColLimit\"\r\n                      [yearColLimit]=\"yearColLimit\"\r\n                      (selectionDone)=\"onSelectionDone($event)\"\r\n                      (activeDateChange)=\"onActiveDateChange($event)\">\r\n      <daypicker tabindex=\"0\"></daypicker>\r\n      <monthpicker tabindex=\"0\"></monthpicker>\r\n      <yearpicker tabindex=\"0\"></yearpicker>\r\n    </datepicker-inner>\r\n    `,\r\n  providers: [DATEPICKER_CONTROL_VALUE_ACCESSOR]\r\n})\r\n/* tslint:enable:component-selector-name component-selector-type */\r\nexport class DatePickerComponent implements ControlValueAccessor {\r\n  /** sets datepicker mode, supports: `day`, `month`, `year` */\r\n  @Input() datepickerMode = 'day';\r\n  /** default date to show if `ng-model` value is not specified */\r\n  @Input() initDate: Date;\r\n  /**  oldest selectable date */\r\n  @Input() minDate: Date;\r\n  /** latest selectable date */\r\n  @Input() maxDate: Date;\r\n  /** set lower datepicker mode, supports: `day`, `month`, `year` */\r\n  @Input() minMode: string;\r\n  /** sets upper datepicker mode, supports: `day`, `month`, `year` */\r\n  @Input() maxMode: string;\r\n  /** if false week numbers will be hidden */\r\n  @Input() showWeeks = true;\r\n  /** format of day in month */\r\n  @Input() formatDay: string;\r\n  /** format of month in year */\r\n  @Input() formatMonth: string;\r\n  /** format of year in year range */\r\n  @Input() formatYear: string;\r\n  /** format of day in week header */\r\n  @Input() formatDayHeader: string;\r\n  /** format of title when selecting day */\r\n  @Input() formatDayTitle: string;\r\n  /** format of title when selecting month */\r\n  @Input() formatMonthTitle: string;\r\n  /** starting day of the week from 0-6 (0=Sunday, ..., 6=Saturday) */\r\n  @Input() startingDay: number;\r\n  /** number of years displayed in year selection */\r\n  @Input() yearRange: number;\r\n  /** if true only dates from the currently displayed month will be shown */\r\n  @Input() onlyCurrentMonth: boolean;\r\n  /** if true shortcut`s event propagation will be disabled */\r\n  @Input() shortcutPropagation: boolean;\r\n  /** number of months displayed in a single row of month picker */\r\n  @Input() monthColLimit: number;\r\n  /** number of years displayed in a single row of year picker */\r\n  @Input() yearColLimit: number;\r\n  /** array of custom css classes to be applied to targeted dates */\r\n  @Input() customClass: { date: Date; mode: string; clazz: string }[];\r\n  /** array of disabled dates */\r\n  @Input() dateDisabled: { date: Date; mode: string }[];\r\n  /** disabled days of the week from 0-6 (0=Sunday, ..., 6=Saturday) */\r\n  @Input() dayDisabled: number[];\r\n\r\n  /** currently active date */\r\n  @Input()\r\n  get activeDate(): Date {\r\n    return this._activeDate || this._now;\r\n  }\r\n\r\n  set activeDate(value: Date) {\r\n    this._activeDate = value;\r\n  }\r\n\r\n  @Output()\r\n  selectionDone: EventEmitter<Date> = new EventEmitter<Date>(undefined);\r\n\r\n  /** callback to invoke when the activeDate is changed. */\r\n  @Output()\r\n  activeDateChange: EventEmitter<Date> = new EventEmitter<Date>(\r\n    undefined\r\n  );\r\n\r\n  @ViewChild(DatePickerInnerComponent)\r\n  _datePicker: DatePickerInnerComponent;\r\n\r\n  /* tslint:disable-next-line: no-any*/\r\n  onChange: any = Function.prototype;\r\n  /* tslint:disable-next-line: no-any*/\r\n  onTouched: any = Function.prototype;\r\n\r\n  config: DatepickerConfig;\r\n\r\n  protected _now: Date = new Date();\r\n  protected _activeDate: Date;\r\n\r\n  constructor(config: DatepickerConfig) {\r\n    this.config = config;\r\n    this.configureOptions();\r\n  }\r\n\r\n  configureOptions(): void {\r\n    Object.assign(this, this.config);\r\n  }\r\n\r\n  onUpdate(event: Date): void {\r\n    this.activeDate = event;\r\n    this.onChange(event);\r\n  }\r\n\r\n  onSelectionDone(event: Date): void {\r\n    this.selectionDone.emit(event);\r\n  }\r\n\r\n  onActiveDateChange(event: Date): void {\r\n    this.activeDateChange.emit(event);\r\n  }\r\n  // todo: support null value\r\n  /* tslint:disable-next-line: no-any*/\r\n  writeValue(value: any): void {\r\n    if (this._datePicker.compare(value, this._activeDate) === 0) {\r\n      return;\r\n    }\r\n    if (value && value instanceof Date) {\r\n      this.activeDate = value;\r\n      this._datePicker.select(value, false);\r\n\r\n      return;\r\n    }\r\n\r\n    this.activeDate = value ? new Date(value) : void 0;\r\n  }\r\n\r\n  registerOnChange(fn: () => void): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: () => void): void {\r\n    this.onTouched = fn;\r\n  }\r\n}\r\n","// @deprecated\r\n// tslint:disable\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { isBs3 } from 'ngx-bootstrap/utils';\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\n\r\n@Component({\r\n  selector: 'daypicker',\r\n  template: `\r\n<table *ngIf=\"datePicker.datepickerMode === 'day'\" role=\"grid\" [attr.aria-labelledby]=\"datePicker.uniqueId + '-title'\" aria-activedescendant=\"activeDateId\">\r\n  <thead>\r\n    <tr>\r\n      <th>\r\n        <button *ngIf=\"!isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\"\r\n                tabindex=\"-1\"></button>\r\n        <button *ngIf=\"isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\"\r\n                tabindex=\"-1\">&lt;</button>\r\n      </th>\r\n      <th [attr.colspan]=\"5 + (datePicker.showWeeks ? 1 : 0)\">\r\n        <button [id]=\"datePicker.uniqueId + '-title'\"\r\n                type=\"button\" class=\"btn btn-default btn-secondary btn-sm\"\r\n                (click)=\"datePicker.toggleMode(0)\"\r\n                [disabled]=\"datePicker.datepickerMode === datePicker.maxMode\"\r\n                [ngClass]=\"{disabled: datePicker.datepickerMode === datePicker.maxMode}\" tabindex=\"-1\" style=\"width:100%;\">\r\n          <strong>{{ title }}</strong>\r\n        </button>\r\n      </th>\r\n      <th>\r\n        <button *ngIf=\"!isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\"\r\n                tabindex=\"-1\"></button>\r\n        <button *ngIf=\"isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\"\r\n                tabindex=\"-1\">&gt;\r\n        </button>\r\n      </th>\r\n    </tr>\r\n    <tr>\r\n      <th *ngIf=\"datePicker.showWeeks\"></th>\r\n      <th *ngFor=\"let labelz of labels\" class=\"text-center\">\r\n        <small aria-label=\"labelz.full\"><b>{{ labelz.abbr }}</b></small>\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <ng-template ngFor [ngForOf]=\"rows\" let-rowz=\"$implicit\" let-index=\"index\">\r\n      <tr *ngIf=\"!(datePicker.onlyCurrentMonth && rowz[0].secondary && rowz[6].secondary)\">\r\n        <td *ngIf=\"datePicker.showWeeks\" class=\"h6\" class=\"text-center\">\r\n          <em>{{ weekNumbers[index] }}</em>\r\n        </td>\r\n        <td *ngFor=\"let dtz of rowz\" class=\"text-center\" role=\"gridcell\" [id]=\"dtz.uid\">\r\n          <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-sm {{dtz.customClass}}\"\r\n                  *ngIf=\"!(datePicker.onlyCurrentMonth && dtz.secondary)\"\r\n                  [ngClass]=\"{'btn-secondary': isBs4 && !dtz.selected && !datePicker.isActive(dtz), 'btn-info': dtz.selected, disabled: dtz.disabled, active: !isBs4 && datePicker.isActive(dtz), 'btn-default': !isBs4}\"\r\n                  [disabled]=\"dtz.disabled\"\r\n                  (click)=\"datePicker.select(dtz.date)\" tabindex=\"-1\">\r\n            <span [ngClass]=\"{'text-muted': dtz.secondary || dtz.current, 'text-info': !isBs4 && dtz.current}\">{{ dtz.label }}</span>\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n  </tbody>\r\n</table>\r\n  `,\r\n  styles: [\r\n    `\r\n    :host .btn-secondary {\r\n      color: #292b2c;\r\n      background-color: #fff;\r\n      border-color: #ccc;\r\n    }\r\n    :host .btn-info .text-muted {\r\n      color: #292b2c !important;\r\n    }\r\n  `\r\n  ]\r\n})\r\nexport class DayPickerComponent implements OnInit {\r\n  labels: any[] = [];\r\n  title: string;\r\n  rows: any[] = [];\r\n  weekNumbers: number[] = [];\r\n  datePicker: DatePickerInnerComponent;\r\n\r\n  constructor(datePicker: DatePickerInnerComponent) {\r\n    this.datePicker = datePicker;\r\n  }\r\n\r\n  get isBs4(): boolean {\r\n    return !isBs3();\r\n  }\r\n\r\n  /*protected getDaysInMonth(year:number, month:number) {\r\n   return ((month === 1) && (year % 4 === 0) &&\r\n   ((year % 100 !== 0) || (year % 400 === 0))) ? 29 : DAYS_IN_MONTH[month];\r\n   }*/\r\n  ngOnInit(): void {\r\n    const self = this;\r\n\r\n    this.datePicker.stepDay = { months: 1 };\r\n\r\n    this.datePicker.setRefreshViewHandler(function(): void {\r\n      const year = this.activeDate.getFullYear();\r\n      const month = this.activeDate.getMonth();\r\n      const firstDayOfMonth = new Date(year, month, 1);\r\n      const difference = this.startingDay - firstDayOfMonth.getDay();\r\n      const numDisplayedFromPreviousMonth =\r\n        difference > 0 ? 7 - difference : -difference;\r\n      const firstDate = new Date(firstDayOfMonth.getTime());\r\n\r\n      if (numDisplayedFromPreviousMonth > 0) {\r\n        firstDate.setDate(-numDisplayedFromPreviousMonth + 1);\r\n      }\r\n\r\n      // 42 is the number of days on a six-week calendar\r\n      const _days: Date[] = self.getDates(firstDate, 42);\r\n      const days: any[] = [];\r\n      for (let i = 0; i < 42; i++) {\r\n        const _dateObject = this.createDateObject(_days[i], this.formatDay);\r\n        _dateObject.secondary = _days[i].getMonth() !== month;\r\n        _dateObject.uid = this.uniqueId + '-' + i;\r\n        days[i] = _dateObject;\r\n      }\r\n\r\n      self.labels = [];\r\n      for (let j = 0; j < 7; j++) {\r\n        self.labels[j] = {};\r\n        self.labels[j].abbr = this.dateFilter(\r\n          days[j].date,\r\n          this.formatDayHeader\r\n        );\r\n        self.labels[j].full = this.dateFilter(days[j].date, 'EEEE');\r\n      }\r\n\r\n      self.title = this.dateFilter(this.activeDate, this.formatDayTitle);\r\n      self.rows = this.split(days, 7);\r\n\r\n      if (this.showWeeks) {\r\n        self.weekNumbers = [];\r\n        const thursdayIndex = (4 + 7 - this.startingDay) % 7;\r\n        const numWeeks = self.rows.length;\r\n        for (let curWeek = 0; curWeek < numWeeks; curWeek++) {\r\n          self.weekNumbers.push(\r\n            self.getISO8601WeekNumber(self.rows[curWeek][thursdayIndex].date)\r\n          );\r\n        }\r\n      }\r\n    }, 'day');\r\n\r\n    this.datePicker.setCompareHandler(function(\r\n      date1: Date,\r\n      date2: Date\r\n    ): number {\r\n      const d1 = new Date(date1.getFullYear(), date1.getMonth(), date1.getDate());\r\n      const d2 = new Date(date2.getFullYear(), date2.getMonth(), date2.getDate());\r\n      return d1.getTime() - d2.getTime();\r\n    }, 'day');\r\n\r\n    this.datePicker.refreshView();\r\n  }\r\n\r\n  protected getDates(startDate: Date, n: number): Date[] {\r\n    const dates: Date[] = new Array(n);\r\n    let current = new Date(startDate.getTime());\r\n    let i = 0;\r\n    let date: Date;\r\n    while (i < n) {\r\n      date = new Date(current.getTime());\r\n      date = this.datePicker.fixTimeZone(date);\r\n      dates[i++] = date;\r\n      current = new Date(\r\n        date.getFullYear(),\r\n        date.getMonth(),\r\n        date.getDate() + 1\r\n      );\r\n    }\r\n    return dates;\r\n  }\r\n\r\n  protected getISO8601WeekNumber(date: Date): number {\r\n    const checkDate = new Date(date.getTime());\r\n    // Thursday\r\n    checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));\r\n    const time = checkDate.getTime();\r\n    // Compare with Jan 1\r\n    checkDate.setMonth(0);\r\n    checkDate.setDate(1);\r\n    return (\r\n      Math.floor(Math.round((time - checkDate.getTime()) / 86400000) / 7) + 1\r\n    );\r\n  }\r\n\r\n  // todo: key events implementation\r\n}\r\n","// @deprecated\r\n// tslint:disable\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\nimport { isBs3 } from 'ngx-bootstrap/utils';\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\n\r\n@Component({\r\n  selector: 'monthpicker',\r\n  template: `\r\n<table *ngIf=\"datePicker.datepickerMode==='month'\" role=\"grid\">\r\n  <thead>\r\n    <tr>\r\n      <th>\r\n        <button type=\"button\" class=\"btn btn-default btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\" tabindex=\"-1\"></button></th>\r\n      <th [attr.colspan]=\"((datePicker.monthColLimit - 2) <= 0) ? 1 : datePicker.monthColLimit - 2\">\r\n        <button [id]=\"datePicker.uniqueId + '-title'\"\r\n                type=\"button\" class=\"btn btn-default btn-sm\"\r\n                (click)=\"datePicker.toggleMode(0)\"\r\n                [disabled]=\"datePicker.datepickerMode === maxMode\"\r\n                [ngClass]=\"{disabled: datePicker.datepickerMode === maxMode}\" tabindex=\"-1\" style=\"width:100%;\">\r\n          <strong>{{ title }}</strong> \r\n        </button>\r\n      </th>\r\n      <th>\r\n        <button type=\"button\" class=\"btn btn-default btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\" tabindex=\"-1\"></button>\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let rowz of rows\">\r\n      <td *ngFor=\"let dtz of rowz\" class=\"text-center\" role=\"gridcell\" [attr.id]=\"dtz.uid\" [ngClass]=\"dtz.customClass\">\r\n        <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-default\"\r\n                [ngClass]=\"{'btn-link': isBs4 && !dtz.selected && !datePicker.isActive(dtz), 'btn-info': dtz.selected || (isBs4 && !dtz.selected && datePicker.isActive(dtz)), disabled: dtz.disabled, active: !isBs4 && datePicker.isActive(dtz)}\"\r\n                [disabled]=\"dtz.disabled\"\r\n                (click)=\"datePicker.select(dtz.date)\" tabindex=\"-1\">\r\n          <span [ngClass]=\"{'text-success': isBs4 && dtz.current, 'text-info': !isBs4 && dtz.current}\">{{ dtz.label }}</span>\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n  `,\r\n  styles: [\r\n    `\r\n    :host .btn-info .text-success {\r\n      color: #fff !important;\r\n    }\r\n  `\r\n  ]\r\n})\r\nexport class MonthPickerComponent implements OnInit {\r\n  title: string;\r\n  rows: any[] = [];\r\n  datePicker: DatePickerInnerComponent;\r\n  maxMode: string;\r\n\r\n  constructor(datePicker: DatePickerInnerComponent) {\r\n    this.datePicker = datePicker;\r\n  }\r\n\r\n  get isBs4(): boolean {\r\n    return !isBs3();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const self = this;\r\n\r\n    this.datePicker.stepMonth = { years: 1 };\r\n\r\n    this.datePicker.setRefreshViewHandler(function(): void {\r\n      const months: any[] = new Array(12);\r\n      const year: number = this.activeDate.getFullYear();\r\n      let date: Date;\r\n\r\n      for (let i = 0; i < 12; i++) {\r\n        date = new Date(year, i, 1);\r\n        date = this.fixTimeZone(date);\r\n        months[i] = this.createDateObject(date, this.formatMonth);\r\n        months[i].uid = this.uniqueId + '-' + i;\r\n      }\r\n\r\n      self.title = this.dateFilter(this.activeDate, this.formatMonthTitle);\r\n      self.rows = this.split(months, self.datePicker.monthColLimit);\r\n    }, 'month');\r\n\r\n    this.datePicker.setCompareHandler(function(\r\n      date1: Date,\r\n      date2: Date\r\n    ): number {\r\n      const d1 = new Date(date1.getFullYear(), date1.getMonth());\r\n      const d2 = new Date(date2.getFullYear(), date2.getMonth());\r\n      return d1.getTime() - d2.getTime();\r\n    }, 'month');\r\n\r\n    this.datePicker.refreshView();\r\n  }\r\n\r\n  // todo: key events implementation\r\n}\r\n","// @deprecated\r\n// tslint:disable\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\nimport { isBs3 } from 'ngx-bootstrap/utils';\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\n\r\n@Component({\r\n  selector: 'yearpicker',\r\n  template: `\r\n<table *ngIf=\"datePicker.datepickerMode==='year'\" role=\"grid\">\r\n  <thead>\r\n    <tr>\r\n      <th>\r\n        <button type=\"button\" class=\"btn btn-default btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\" tabindex=\"-1\"></button>\r\n      </th>\r\n      <th [attr.colspan]=\"((datePicker.yearColLimit - 2) <= 0) ? 1 : datePicker.yearColLimit - 2\">\r\n        <button [id]=\"datePicker.uniqueId + '-title'\" role=\"heading\"\r\n                type=\"button\" class=\"btn btn-default btn-sm\"\r\n                (click)=\"datePicker.toggleMode(0)\"\r\n                [disabled]=\"datePicker.datepickerMode === datePicker.maxMode\"\r\n                [ngClass]=\"{disabled: datePicker.datepickerMode === datePicker.maxMode}\" tabindex=\"-1\" style=\"width:100%;\">\r\n          <strong>{{ title }}</strong>\r\n        </button>\r\n      </th>\r\n      <th>\r\n        <button type=\"button\" class=\"btn btn-default btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\" tabindex=\"-1\"></button>\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let rowz of rows\">\r\n      <td *ngFor=\"let dtz of rowz\" class=\"text-center\" role=\"gridcell\" [attr.id]=\"dtz.uid\">\r\n        <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-default\"\r\n                [ngClass]=\"{'btn-link': isBs4 && !dtz.selected && !datePicker.isActive(dtz), 'btn-info': dtz.selected || (isBs4 && !dtz.selected && datePicker.isActive(dtz)), disabled: dtz.disabled, active: !isBs4 && datePicker.isActive(dtz)}\"\r\n                [disabled]=\"dtz.disabled\"\r\n                (click)=\"datePicker.select(dtz.date)\" tabindex=\"-1\">\r\n          <span [ngClass]=\"{'text-success': isBs4 && dtz.current, 'text-info': !isBs4 && dtz.current}\">{{ dtz.label }}</span>\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n  `,\r\n  styles: [\r\n    `\r\n    :host .btn-info .text-success {\r\n      color: #fff !important;\r\n    }\r\n  `\r\n  ]\r\n})\r\nexport class YearPickerComponent implements OnInit {\r\n  datePicker: DatePickerInnerComponent;\r\n  title: string;\r\n  rows: any[] = [];\r\n\r\n  constructor(datePicker: DatePickerInnerComponent) {\r\n    this.datePicker = datePicker;\r\n  }\r\n\r\n  get isBs4(): boolean {\r\n    return !isBs3();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const self = this;\r\n\r\n    this.datePicker.stepYear = { years: this.datePicker.yearRange };\r\n\r\n    this.datePicker.setRefreshViewHandler(function(): void {\r\n      const years: any[] = new Array(this.yearRange);\r\n      let date: Date;\r\n      const start = self.getStartingYear(this.activeDate.getFullYear());\r\n\r\n      for (let i = 0; i < this.yearRange; i++) {\r\n        date = new Date(start + i, 0, 1);\r\n        date = this.fixTimeZone(date);\r\n        years[i] = this.createDateObject(date, this.formatYear);\r\n        years[i].uid = this.uniqueId + '-' + i;\r\n      }\r\n\r\n      self.title = [years[0].label, years[this.yearRange - 1].label].join(\r\n        ' - '\r\n      );\r\n      self.rows = this.split(years, self.datePicker.yearColLimit);\r\n    }, 'year');\r\n\r\n    this.datePicker.setCompareHandler(function(\r\n      date1: Date,\r\n      date2: Date\r\n    ): number {\r\n      return date1.getFullYear() - date2.getFullYear();\r\n    }, 'year');\r\n\r\n    this.datePicker.refreshView();\r\n  }\r\n\r\n  protected getStartingYear(year: number): number {\r\n    // todo: parseInt\r\n    return (\r\n      (year - 1) / this.datePicker.yearRange * this.datePicker.yearRange + 1\r\n    );\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\nimport { DatePickerComponent } from './datepicker.component';\r\nimport { DatepickerConfig } from './datepicker.config';\r\nimport { DayPickerComponent } from './daypicker.component';\r\nimport { MonthPickerComponent } from './monthpicker.component';\r\nimport { YearPickerComponent } from './yearpicker.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule],\r\n  declarations: [\r\n    DatePickerComponent,\r\n    DatePickerInnerComponent,\r\n    DayPickerComponent,\r\n    MonthPickerComponent,\r\n    YearPickerComponent\r\n  ],\r\n  exports: [\r\n    DatePickerComponent,\r\n    DatePickerInnerComponent,\r\n    DayPickerComponent,\r\n    MonthPickerComponent,\r\n    YearPickerComponent\r\n  ],\r\n  entryComponents: [DatePickerComponent]\r\n})\r\nexport class DatepickerModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: DatepickerModule, providers: [DatepickerConfig] };\r\n  }\r\n}\r\n"]}